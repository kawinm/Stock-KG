"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},s=function(a,s,c){return c=null!=a?e(o(a)):{},function(e,o,a,s){if(o&&"object"==_typeof(o)||"function"==typeof o){var c,u=_createForOfIteratorHelper(r(o));try{var l=function(){var r=c.value;!i.call(e,r)&&r!==a&&t(e,r,{get:function(){return o[r]},enumerable:!(s=n(o,r))||s.enumerable})};for(u.s();!(c=u.n()).done;)l()}catch(e){u.e(e)}finally{u.f()}}return e}(!s&&a&&a.__esModule?c:t(c,"default",{value:a,enumerable:!0}),a)},c=a((function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var r,o=function(e,t){return void 0===t&&(t="_pctx"),{cookieName:t,readonly:!1,init:function(t){var n;return null!==(n=null!=t?t:e)&&void 0!==n?n:null},refresh:function(e){return e},update:function(e){return e},set:function(e){return e},get:function(e){return e}}},i=function(e){return t(t({},o(e)),{cookieName:null})},a=o("anon"),s=function(){for(var e=(new Date).getTime().toString(36);e.length<16;)e+=Math.round(2147483647*Math.random()).toString(36);return e.substr(0,16)},c=function(e){return null!=e},u=function(e,n){return e&&Object.keys(e).filter((function(t){return n(e[t])})).reduce((function(n,r){var o;return t(t({},n),((o={})[r]=e[r],o))}),{})},l=function(){var e={};return{add:function(t){e[t]=!0},values:function(){return Object.keys(e)}}},d=function(e){return"true"===e||!0===e},p=function(e,t){var n,r=NaN,o=NaN;return function(i){var a=null==t?void 0:t();return(i!==o||r!==a)&&(r=a,o=i,n=e(i)),n}},f=function(e){var t;return function(n){var r=e();r!==t&&(t=r,n(r))}},m=function e(t,n){try{return t()}catch(t){return n?e(n):null}},g=function(e,t){return void 0===t&&(t=!1),m((function(){return JSON.parse(e)}),(function(){return t?JSON.parse(window.atob(e)):null}))||null},v=function(e){return u(e,(function(e){return"CX"!==e.type}))},h=t(t({},o(null)),{init:function(e){return v(e||null)},refresh:v,set:function(e,n){return null===e?null:u(t(t({},n),e),(function(e){return null!==e}))}}),y=function(){return window.pdl||{}},w=function(e,t){return t({protect:!0}),s()},b=t(t({},i()),{init:function(e,t){return t({protect:!0}),y().pageViewId||s()},refresh:w,update:w,set:function(e,t,n){return n({protect:!0}),e}}),_=t(t({},o(null,"_pcid")),{init:function(e,t){return t({protect:!0}),e||s()},update:function(e,t){return t({protect:!0}),s()},set:function(e,t,n){return n({protect:!0}),e}}),k="DL",C=["PA","DMP","COMPOSER","ID","VX","ESP","Social Flow",k].map((function(e,t){return{name:e,id:t}})),I=C.reduce((function(e,n,r){var o,i=n.name;return t(t({},e),((o={})[i]=r,o[i.toLowerCase()]=r,o))}),{}),S=["opt-in","opt-out","essential"],E=["include","exclude","obfuscate"],P=function(e,t){return'"'.concat(e,'" should be one of ').concat(t.join(", "))},x=function(){},T=function(e,t){return function(n){return t(e+n)}},A=function(e,t){void 0===t&&(t=x);var n=I[e.toLowerCase()];return void 0!==n?C[n].name:(t('"'.concat(e,'" is not found')),null)},O=function(e){return S.includes(e)?e:null},M=function(e,t){void 0===t&&(t=x);var n=e.source,r=e.patches||[];return O(n)||(t(P("source",S)),n="opt-in"),Array.isArray(r)||(t('"patches" should be an array'),r=[]),{source:n,patches:r=r.reduce((function(e,n,r){if("object"!=_typeof(n)||Array.isArray(n))return t("patch[".concat(r,"]: should be type of {action, item, with?}")),e;var o=n.action,i=n.item;return E.includes(o)?i&&"object"==_typeof(i)&&i.key&&i.type?(e.push(n),e):(t("patch[".concat(r,']: "item" should be type of {key, type}')),e):(t("patch[".concat(r,"]: ")+P("action",E)),e)}),[])}},N=function(e,t){if(void 0===t&&(t=x),!e)return null;var n={};return e.products&&(Array.isArray(e.products)?n.products=e.products.reduce((function(e,n){var r=A(n,T("consent.products: ",t));return r&&e.push(r),e}),[]):t("consent.products: should be an array")),e.defaultPreset&&(n.defaultPreset=Object.keys(e.defaultPreset).reduce((function(n,r){var o=A(r,T("consent.defaultPreset: ",t)),i=O(e.defaultPreset[r]);return i||t("consent.defaultPreset: "+P(r,S)),o&&i&&(n[o]=i),n}),{})),n},R=p(N),L=["opt-in","essential","opt-out"].reduce((function(e,n,r){var o;return t(t({},e),((o={})[r]=n,o))}),{}),U=[[0,0,0,0,0,0,0,0],[0,0,2,2,2,2,2,0],[1,2,2,2,2,2,2,1],[0,2,0,2,2,2,0,0],[1,2,2,2,2,2,1,1],[2,0,0,2,2,2,2,0],[2,0,2,2,2,2,2,0],[2,2,2,2,2,2,0,2],[2,2,0,0,0,0,2,0],[2,2,1,2,1,2,2,1],[2,2,1,1,2,2,2,1]],j=function(e){return e.reduce((function(e,n,r){var o;return t(t({},e),((o={})[r]={mode:L[n]},o))}),{})},D=U.map((function(e,t){return{id:t,preset:j(e)}})),B=f((function(){var e;return null===(e=R(y().consent))||void 0===e?void 0:e.defaultPreset})),F=(r=D,function(){return B((function(e){r=n([],D,!0),e&&(r[0]={id:0,preset:t({},r[0].preset)},Object.keys(e).forEach((function(t){var n=e[t],o=I[t];r[0].preset[o]={mode:n}})))})),r}),V=function(){return F()[0].preset},q=function(){return y().consent_modifiers||null},z=function(){return!!y().requireConsent},G=f((function(){var e;return null===(e=R(y().consent))||void 0===e?void 0:e.products})),H=function(){var e=C;return function(){return G((function(t){e=t?C.filter((function(e){return t.includes(e.name)||e.name===k})):C})),e}}(),W=function(e){return H().reduce((function(t,n){return t[n.id]=e[n.id]||V()[n.id],t}),{})},J=t(t({},o(null,"_pprv")),{init:function(e){return z()&&e?W(t(t({},V()),e)):null},set:function(e,n){var r,o;return z()?null==e?n:(o="number"==typeof e?(null===(r=F()[e])||void 0===r?void 0:r.preset)||null:Array.isArray(e)?function(e){var t=null;return e.forEach((function(e){var n=U[e];t||!n?!t||!n||(t=t.map((function(e,t){return void 0===n[t]?e:Math.min(e,n[t])}))):t=n})),t&&j(t)}(e):function(e){return Object.keys(e).reduce((function(n,r){var o,i=e[r],a=Number(r);return Number.isNaN(a)&&void 0===(a=I[r.toLowerCase()])||!function(e){return["opt-in","essential","opt-out","custom"].includes(e)}(i.mode)?n:t(t({},n),((o={})[a]={mode:i.mode},o))}),null)}(e),o?W(t(t({},n),o)):n):null},get:p((function(e){return e&&Object.keys(e).reduce((function(n,r){var o,i=C[Number(r)].name,a=t({},e[Number(r)]);return"custom"===a.mode&&(a.modifier=(null===(o=q())||void 0===o?void 0:o[i])||null),n[i]=a,n}),{})}),(function(){return q()}))}),Q=t(t({},i()),{init:F,set:F}),X=t(t({},i()),{init:H,set:H}),Y=t(t({},i(null)),{readonly:!0,set:function(){return null},get:q}),$=function(e){var t=Number(e);return Number.isNaN(t)?String(e):t},K=function(e){return Array.isArray(e)?e:e.split(",").map((function(e){return e.trim().replace(/^['"](.+)['"]$/,"$1")}))},Z=function(e){return e},ee={id:Z,type:Z,zone:Z,createdAt:$,modifiedAt:$,authors:K,section:Z,tags:K,keywords:K,title:Z,description:Z,isNative:d},te=function(e){return"last"===e};function ne(e,t){if(void 0===e&&(e="meta"),function(e){return"first"===e}(t))return document.querySelector(e);var n=document.querySelectorAll(e);return te(t)?n[n.length-1]:Array.from(n)}var re=function(){var e=null;return{refresh:function(){(e=ne()||null)&&setTimeout((function(){e=null}),0)},find:function(t,n){return void 0===n&&(n=!1),e?e.reduce((function(e,r){for(var o=0,i=t;o<i.length;o++){var a=i[o],s=(("name"===a?r.name:r.getAttribute(a))||"").trim().toLowerCase(),c=r.content;if(s&&(!n||c)){e[s]||(e[s]=[]),e[s].push(r);break}}return e}),{}):null}}}(),oe=function(e){var t,n=e.getContent||function(e){return e.content};return e.selector?(t=ne(e.selector,e.take||"first"))&&n(t)||null:function(){var t=re.find(e.attr||["name"],e.hasContent),r=e.names||[],o=!function(e){return"all"===e}(e.take),i=te(e.take);if(!t)return null;for(var a=function(e){var r=[],a=t[e];if(a){if(o){var s=a[i?a.length-1:0];return{value:n(s)||""}}a.forEach((function(e){r=r.concat(n(e)||"")}))}if(r.length)return{value:r}},s=0,c=r;s<c.length;s++){var u=a(c[s]);if("object"==_typeof(u))return u.value}return null}()},ie=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],o=oe(r);if(o)return o}},ae=function(e,t,n){var r=ee[t];if(!Boolean(e[t])&&r){var o=("function"==typeof n?n:function(){return Array.isArray(n)?ie(n):oe(n)})(),i=o&&r(o);i&&(e[t]=i)}},se=function(e){return{names:[e]}},ce={januar:"01",january:"01",jan:"01",februar:"02",february:"02",feb:"02",mars:"03",march:"03",mar:"03",april:"04",apr:"04",mai:"05",may:"05",juni:"06",june:"06",jun:"06",juli:"07",july:"07",jul:"07",august:"08",aug:"08",september:"09",sept:"09",sep:"09",oktober:"10",october:"10",okt:"10",oct:"10",november:"11",nov:"11",desember:"12",december:"12",dec:"12",des:"12"},ue=function(e){var t=e.replace(/DAY/g,"(0?[1-9]|[12][0-9]|3[01])").replace(/MONTHLONG/g,"("+Object.keys(ce).join("|")+")").replace(/MONTH/g,"(0?[1-9]|1[012])").replace(/YEAR2/g,"([0-9][0-9])").replace(/YEAR/g,"(197[1-9]|19[8-9][0-9]|20[0-9][0-9])").replace(/TIME/g,"([0-9][0-9]):([0-9][0-9]):([0-9][0-9])(?:\\.[0-9][0-9][0-9])?([zZ]|[+-][0-9][0-9](?::?[0-9][0-9])?)?"),n=e.replace(/.*?([YMD])(EAR|ONTH|AY).*?/g,"$1").substring(0,3);return[new RegExp(t),n]},le=["\\bDAY\\.MONTH\\.YEAR\\b","\\bDAY\\.?\\s{0,3}MONTHLONG\\.?\\s{1,3}YEAR\\b","\\bYEAR-MONTH-DAY(?:[tT]|\\b)","\\bMONTHLONG\\.?\\s{0,3}DAY(?:st|nd|rd|th)?,?\\s{1,3}YEAR\\b","\\bDAY(?:st|nd|rd|th|\\.)?\\s{0,3}MONTHLONG\\.?,?\\s{1,3}YEAR\\b","\\bYEAR[/年]MONTH[/月]DAY(?=\\b|日)","\\bDAY\\.MONTH\\.YEAR2\\b","\\bDAY/MONTH/YEAR\\b"].map(ue),de=ue("YEAR-MONTH-DAY[tT]TIME")[0],pe=function(e){return e&&parseInt(e,10)||0};function fe(e,t,n,r,o,i,a){var s=new Date(Date.UTC(pe(e),pe(t)-1,pe(n),pe(r),pe(o),pe(i))),c=(a||"").match(/^([+-][0-9][0-9])(?::?([0-9][0-9])?)$/);c&&(s=new Date(s.getTime()-36e5*Number(c[1])-6e4*(Number(c[2])||0)));var u=Date.now()-s.getTime();return u>0||-u<1728e5?s.toISOString():null}var me=function(e){return e.replace(/<\/?[^>?]*\/?>/g," ").replace(/\s+/g," ").trim()};function ge(e){return void 0===e&&(e=""),me(e.replace(/,(?=\s*(jr|sr)(\.?)\b)/g," "))}var ve,he=function(e){return t(t({},e),{take:"last"})},ye=function(e){return t(t({},e),{take:"last",hasContent:!0,getContent:function(e){return me(e.content||"")}})},we=[he({attr:["name","property","itemprop"],names:["cxenseparse:publishtime","cxenseparse:recs:publishtime","article:published_time","date","dc.date","dc.date.created","dc.terms.issued","pub_date","article.published","datepublished","og:article:published_time"]}),he({selector:"time.published[datetime],time[pubdate][datetime]",getContent:function(e){return e.getAttribute("datetime")}}),he({selector:"time[datetime]",getContent:function(e){return e.getAttribute("datetime")}})],be={selector:'meta[property="article:modified_time"]'},_e=[{attr:["property","name"],names:["cxenseparse:author","og:article:author","article:author","og:book:author","book:author","author","dc.creator","article.author"],take:"all",getContent:function(e){var t=e.getAttribute("data-separator"),n=e.content;return t?ge(n).split(t):function(e){return void 0===e&&(e=""),ge(e.replace(/\n+/,";").replace(/(\<|&lt;)br(\>|&gt;)/,";").replace(/\b(and|und|og)\b/g,";")).split(/[,;]/)}(n)}}],ke=[ye({names:["cxenseparse:keywords"]}),ye({attr:["property","name"],names:["news_keywords"]}),ye({names:["keywords"]})],Ce=[ye({names:["cxenseparse:description"]}),ye({attr:["property"],names:["og:description"]}),ye({names:["description"]})],Ie=[{names:["cxenseparse:title"]},he({attr:["property","name"],names:["og:title"]})],Se=function(e){ae(e,"createdAt",(function(){var e=ie(we);return e?function(e){var t=(e=e.toLowerCase()).match(de);if(t)return fe(t[1],t[2],t[3],t[4],t[5],t[6],t[7]);for(var n=0,r=le;n<r.length;n++){var o=r[n],i=e.match(o[0]);if(i)return fe(2===(i="DMY"===o[1]?["",i[3],i[2],i[1]]:"MDY"===o[1]?["",i[3],i[1],i[2]]:i)[1].length?(pe(i[1])<60?"20":"19")+i[1]:i[1],i[2].length<=2?i[2]:ce[i[2]],i[3])}}(e.toLowerCase()):null})),ae(e,"modifiedAt",be),ae(e,"authors",_e),ae(e,"keywords",(function(){var e=ie(ke);return e&&e.length<=1024?e:null})),ae(e,"title",Ie),ae(e,"description",Ce)},Ee=function(){var e=Array.from(document.querySelectorAll("meta[property^=content]")).reduce((function(e,t){var n,r=null===(n=null==t?void 0:t.getAttribute("property"))||void 0===n?void 0:n.split(":").pop(),o=ee[r];return o&&t&&(e[r]=o((null==t?void 0:t.getAttribute("content"))||"")),e}),{});return re.refresh(),function(e){ae(e,"type",{attr:["property"],names:["og:type"]}),ae(e,"section",se("section")),ae(e,"id",se("id")),ae(e,"authors",se("author"))}(e),Se(e),e},Pe=t(t({},i(null)),{init:function(){return Ee()},set:function(e,n){return null===e?{}:u(t(t({},n),e),(function(e){return null!=e}))}}),xe={pageViewId:b,browserId:_,users:h,userStatus:a,siteId:o(),consent:J,consentPresets:Q,products:X,consentModifiers:Y,content:Pe},Te=function(e){var t=e.replace(/\+/g," ").replace(/^\s+|\s+$/g,"");try{return decodeURIComponent(t)}catch(e){return t}},Ae=function(e){return 0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),Te(e)},Oe=function(){var e=function(e,t,n){var r=void 0===n?{}:n,o=r.path,i=r.domain,a=r.expires,s=r.secure,c=r.samesite,u=r.raw;return(u?e:encodeURIComponent(e))+"="+(u?t:encodeURIComponent(t))+(a?"; expires=".concat(function(e){var t=new Date,n=function(e){e&&t.setDate(t.getDate()+e)};if(e instanceof Date)t=e;else if("number"==typeof e)n(e);else{var r=e,o=r.days,i=r.minutes;n(o),i&&t.setMinutes(t.getMinutes()+i)}return t}(a).toUTCString()):"")+(o?"; path=".concat(o):"")+(i?"; domain=".concat(i):"")+(s?"; secure":"")+(c?"boolean"==typeof c?"; sameSite":"; sameSite=".concat(c):"")},t=function(t,n,r,o){void 0===n||void 0!==o&&function(e){return encodeURI(e).split(/%(?:u[\dA-F]{2})?[\dA-F]{2}|./).length-1}(n)>o||(document.cookie=e(t,n,r))},n=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(e(Te(r[0]),r[1]||""))return}};function r(e){var t=null,r={};return n((function(n,o){if(e){if(n===e)return t=Ae(o),!0}else r[n]=Ae(o)})),e?t:r}var o,i=function(e,n){t(e,"",Object.assign({},n,{expires:-1}))},a=(o="_cookie_test",function(e){void 0===e&&(e=[]);var n=window.location.hostname.split("."),a=(new Date).getTime().toString(36)+Math.round(2147483647*Math.random()).toString(36),s=new Date;s.setSeconds(s.getSeconds()+30);for(var c=0;c<n.length;c++)try{var u=n.slice(-(c+1)).join(".");if(!e.includes(u)){t(o,a,{expires:s,path:"/",domain:u});var l=r(o)===a;if(i(o,{path:"/",domain:u}),l)return u}}catch(e){}});return{set:t,get:r,getNames:function(){var e=[];return n((function(t){e.push(t)})),e},remove:i,getTopLevelDomain:a,__private__:{_generateCookieString:e}}}(),Me={path:"/",expires:395,samesite:"lax",secure:"https:"===window.location.protocol,domain:Oe.getTopLevelDomain(["pantheon.io","go-vip.net","go-vip.co"])},Ne=function(e,n){var r=n.cookieName,o=n.encode,i=n.decode,a=!1,s=null,c=null;!function(){var t,n=null===(t=i(e||""))||void 0===t?void 0:t._t;if(n)try{s=new Date(parseInt(String(n),36)),a=!!s}catch(e){}}();var u=function(e){return s=s||function(e){var t=new Date;if(e instanceof Date)t=e;else{if("number"!=typeof e)return null;t.setDate(t.getDate()+e)}return t}(e.expires),s};return{get fixedMode(){return a},onChange:function(e){c=e},setFixedMode:function(e){var t=a;(a=e)!==t&&(s=null,null==c||c(a))},bindOptions:function(e){return a&&(s=u(e))?t(t({},e),{expires:s}):e},decode:function(e){var t=i(e);return null!=t&&t[r]&&delete t[r],t},encode:function(e,t){return a&&((s=u(t))&&(e._t=s.getTime().toString(36))),o(e)}}},Re=function(e,t,n){return void 0===t&&(t="optional"),void 0===n&&(n=!1),{cookieName:e,consent:t,encode:function(e){return function(e,t){void 0===t&&(t=!1);var n=JSON.stringify(e);return m((function(){return t?window.btoa(n):n}))||n}(e,n)},decode:function(e){return g(e,!0)}}},Le={exports:{}};!function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},c="",u="",l="",d=2,p=3,f=2,m=[],g=0,v=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=p++,s[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,v==t-1?(v=0,m.push(n(g)),g=0):v++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1}else{for(o=1,r=0;r<f;r++)g=g<<1|o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[l]}else for(o=a[l],r=0;r<f;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1;0==--d&&(d=Math.pow(2,f),f++),a[u]=p++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,v==t-1?(v=0,m.push(n(g)),g=0):v++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1}else{for(o=1,r=0;r<f;r++)g=g<<1|o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[l]}else for(o=a[l],r=0;r<f;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(o=2,r=0;r<f;r++)g=g<<1|1&o,v==t-1?(v=0,m.push(n(g)),g=0):v++,o>>=1;for(;;){if(g<<=1,v==t-1){m.push(n(g));break}v++}return m.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,s,c,u,l,d=[],p=4,f=4,m=3,g="",v=[],h={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;for(a=0,c=Math.pow(2,2),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;l=e(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;l=e(a);break;case 2:return""}for(d[3]=l,i=l,v.push(l);;){if(h.index>t)return"";for(a=0,c=Math.pow(2,m),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;d[f++]=e(a),l=f-1,p--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),a|=(s>0?1:0)*u,u<<=1;d[f++]=e(a),l=f-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,m),m++),d[l])g=d[l];else{if(l!==f)return null;g=i+i.charAt(0)}v.push(g),d[f++]=i+g.charAt(0),i=g,0==--p&&(p=Math.pow(2,m),m++)}}};return i}();null!=e&&(e.exports=t)}(Le),function(e){e.URI="URI",e.COM="COM",e.B64="B64"}(ve||(ve={}));var Ue={URI:{prefix:"{u}",compress:Le.exports.compressToEncodedURIComponent,decompress:Le.exports.decompressFromEncodedURIComponent},COM:{prefix:"{c}",compress:Le.exports.compress,decompress:Le.exports.decompress},B64:{prefix:"{b}",compress:Le.exports.compressToBase64,decompress:Le.exports.decompressFromBase64}},je=Object.keys(Ue).reduce((function(e,t){return e[Ue[t].prefix]=Ue[t],e}),{}),De={cookieName:"_pctx",consent:"mandatory",encode:function(e,t){void 0===t&&(t=ve.URI);var n=JSON.stringify(e),r=Ue[t].compress(n);return Ue[t].prefix+r},decode:function(e){var t=function(e){var t=e.slice(0,3),n=e.slice(3);if(!je[t])return null;var r=je[t].decompress(n);if(!r)return null;try{return JSON.parse(r)}catch(e){return null}}(e||"");return"object"!=_typeof(t)?null:t}},Be=function(){var e,t;return!(null===(t=null===(e=y().cookies)||void 0===e?void 0:e._pprv)||void 0===t||!t.jsonOnly)},Fe={_pprv:Re("_pprv","mandatory",!Be()),_pcid:Re("_pcid","essential"),_pctx:De},Ve=function(e){return Object.keys(e).reduce((function(n,r){return n[r]=function(e){var n=e.cookieName,r=e.consent,o=Oe.get(n),i=!!o,a=Ne(o,e),s=a.fixedMode,l=i,d=null,p=t({},Me),f=null,m=function(){return i&&l},g=function(e){var t=v(e),r=d||(f?a.encode(f,t):"");if(!r){var o=Oe.get(n),i=a.decode(o||"");r=i?a.encode(i,t):""}r&&(s=!0,Oe.set(n,r,a.bindOptions(t)))},v=function(e){return t(t({},p),u(e||{},c))},h=function(e){Oe.remove(n,v(e))},y=function(e,t){var n=e&&t;!m()&&n&&g(),m()&&!n&&h(),m()&&n&&!s&&g(),i=e,l=t};return a.onChange((function(){m()&&(s=!1,g())})),{get cookieName(){return n},get cookieEnabled(){return m()},get consent(){return r},set:function(e,t){f=e,m()&&g(t)},get:function(){return a.decode(Oe.get(n)||"")},remove:h,setCookieOptions:function(e){p=v(e),m()&&g()},setCookieEnabled:function(e,t){void 0===t&&(t=null),d=e?t:null,y(e,l)},lazyActive:function(){y(i,!0)},setFixedMode:function(e){a.setFixedMode(e)}}}(e[r]),n}),{})}(Fe),qe={},ze=function(){var e=function(){var e=null;return{registerConfig:function(n){return(e={fields:t(t({},n.fields),e&&e.fields),cookieByName:t(t({},n.cookieByName),e&&e.cookieByName)}).cookieByName},get registeredCookiesWrapper(){return(null==e?void 0:e.cookieByName)||null},get:function(){var n={};return e&&Object.keys(e.cookieByName).forEach((function(r){n=t(t({},n),null==e?void 0:e.cookieByName[r].get())})),n},set:function(t,n){void 0===n&&(n=null);var r={};Object.keys(t).forEach((function(o){var i=t[o],a=null==e?void 0:e.fields[o];a&&(r[a]||(r[a]={wrapper:null==e?void 0:e.cookieByName[a],wrapperData:{},needUpdate:!1}),r[a].wrapperData[o]=i,(!n||!r[a].needUpdate&&i!==n[o])&&(r[a].needUpdate=!0))})),Object.keys(r).forEach((function(e){var t=r[e],n=t.wrapper,o=t.wrapperData;t.needUpdate&&n.set(o)}))}}}(),n={},r=null,o=new Map,i=new Map,a=[],c=function(o,s){var c={},u={};Object.keys(s).forEach((function(e){i.has(e)?c[e]=(null==r?void 0:r[e])||null:u[e]=s[e]}));var l=r||n,d=t(t({},r),u);return function(e,t){if(e===t)return!0;if(!e||!t)return null;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some((function(n){return e[n]!==t[n]}))}(d,l)||(e.set(d,l),r=d,a.forEach((function(e){return(0,e[1])(u)}))),Object.keys(c).length>0?c:null},u=function(e,t,n){void 0===n&&(n=!1);var r=[];return Object.keys(t).forEach((function(o){var a=t[o],s=!i.has(o)||i.get(o)===e||n;a&&s?i.set(o,e):!a&&s?i.delete(o):r.push(o)})),r.length>0?r:null};return function(i,l){var d=s();return o.set(d,i),l&&e.registerConfig(l),n=t(t({},e.get()),n),{getInitCookieData:function(){return n},getCachedData:function(){return r||qe},setProtectionData:function(e){return u(d,e)},setProtectionDataUnsafe:function(e){return u(d,e,!0)},updateData:function(e){return c(0,e)},onUpdateData:function(e){!function(e,t){a.push([e,t])}(d,e)},terminate:function(){(function(e){a=a.filter((function(t){return t[0]!==e}))})(d),o.delete(d)},setCookieOptions:function(){return null},setCookieEnabled:function(){return null},get registeredCookiesWrapper(){return e.registeredCookiesWrapper}}}},Ge="__pctx_connection__",He="uvm42pas28m",We=function(e,t){var n=ze();try{Object.defineProperty(window,Ge,{configurable:!1,set:function(e){var t=e();t===He?e(n):"mrlqf5trgho"===t&&(n=ze())}})}catch(e){}return window[Ge]=function(e){return e&&(n=e),He},n(e,t)},Je=function(e){return e.includes("*")},Qe=function(e,t){return[new RegExp("^"+e.replace(/\*/g,".*")+"$"),t]},Xe=function(e){return Object.keys(e).filter(Je).map((function(t){return Qe(t,e[t])}))},Ye=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o[0].test(e))return o[1]}return null},$e=function(e,t){switch(e){case"opt-in":default:return!0;case"essential":return"essential"===t||"mandatory"===t;case"opt-out":return"mandatory"===t}},Ke=function(e){switch(e){case"include":case"obfuscate":return!0;case"exclude":return!1}},Ze=function(e){var t=Object.assign({},e.items),n=Xe(t),r=function(e){return t[e]||Ye(e,n)||"optional"};return function(t,n){var o=y().requireConsent,i=!Array.isArray(t),a=i?[t]:t,s=function(){var t=function(){return a.map((function(e){return{name:e,allowed:!o}}))},i=n||e.getConsent();if(!i)return t();if("custom"===i.mode){var s=function(e,t,n){var r=t&&M(t,n);if(!r)return null;for(var o=[],i={},a=0,s=r.patches;a<s.length;a++){var c=s[a],u=c.action,l=c.with,d=void 0===l?null:l,p=c.item;if(p.type===e){var f={action:u,data:d};i[p.key]=f,Je(p.key)&&o.push(Qe(p.key,f))}}return{source:r.source,getModifier:function(e){return i[e]||Ye(e,o)}}}(e.type,i.modifier,e.log);if(!s)return t();var c=s.source;return a.map((function(e){var t=s.getModifier(e),n=function(e,t){return"obfuscate"===e?t:null}(null==t?void 0:t.action,null==t?void 0:t.data),o={name:e,allowed:null!=t&&t.action?Ke(t.action):$e(c,r(e))};return null!==n&&(o.data=n),o}))}return a.map((function(e){return{name:e,allowed:$e(i.mode,r(e))}}))}();return i?s[0]:s}},et=Object.freeze({__proto__:null,createCheckConsentWrapper:Ze,createMask:Qe,getByMask:Ye,isMask:Je,itemsToMask:Xe}),tt=function(e){var t=e&&e.length;return 16===t||36===t?e:null},nt=function(){var e={pa_vid:function(e){return tt(g(e||"",!0)||e)},atuserid:function(e){var t;return tt((null===(t=g(e||"",!0))||void 0===t?void 0:t.val)||"")}};return function(t){for(var n=function(t){try{var n=function(){if(t.ls)return function(e){var t=function(e){return m((function(){return window.localStorage.getItem(e)}))},n=t(e),r=m((function(){return parseInt(g(t("_ls_ttl"))[e],36)}));return r&&r<=Date.now()?null:n}(t.ls)||null;var n=Oe.get(t);return e[t]&&n?e[t](n):n}();if(n)return{value:n}}catch(e){}},r=0,o=t;r<o.length;r++){var i=n(o[r]);if("object"==_typeof(i))return i.value}return null}}(),rt=[{ls:"_cX_P"},"cX_P"],ot={PA:{browserId:n(["pa_vid","atuserid"],rt,!0)},DMP:{browserId:rt}},it={browserId:{source:"DMP"}},at=function(e){var n,r=t(t({},it),function(e,n){return void 0===n&&(n=x),Object.keys(e||{}).reduce((function(r,o){var i=null==e?void 0:e[o],a=A((null==i?void 0:i.source)||"",n);return r[o]=t(t({},i),{source:a}),r}),{})}(null===(n=y())||void 0===n?void 0:n.migration));Object.keys(r).forEach((function(t){var n,o,i=e.params.get(t),a=r[t]===it[t],s=null===(n=r[t])||void 0===n?void 0:n.source,c=s&&(null===(o=ot[s])||void 0===o?void 0:o[t])||[];if(i&&c.length){var u=nt(c);u&&(i.readonly=!1,e.updateValues(t,u,!0),i.readonly=!a)}}))},st="@@Data-layer/update_value",ct="@@Data-layer/refresh_value",ut=function(){var e=t({},window.pdl),n=function(e){return function(e,t){return"object"!=_typeof(e)?e:Object.keys(e).reduce((function(n,r){var o=e[r],i=t[r],a=i&&i(o);return void 0!==a&&(n[r]=a),n}),{})}(e,{path:String,domain:String,secure:d,expires:function(e){return e instanceof Date?e:Number(e)},samesite:function(e){return"string"==typeof e?e:d(e)}})};return null!=e&&e.cookies&&(e.cookies=Object.keys(e.cookies).reduce((function(t,r){return t[r]=n(e.cookies[r]),t}),{})),null!=e&&e.cookieDefault&&(e.cookieDefault=n(e.cookieDefault)),e},lt=function(e){var t=Object.keys(Fe).reduce((function(e,t){return e[t]=Fe[t].consent,e}),{}),n=function(t){var n;return t||(null===(n=e.get("consent"))||void 0===n?void 0:n.DL)||null},r=Ze({items:t,type:"cookie",getConsent:n}),o=n(),i=function(t){var n,o={_pprv:!y().requireConsent},i=null===(n=e.getConnection())||void 0===n?void 0:n.registeredCookiesWrapper;if(i){var a=Object.keys(i).map((function(e){return i[e].cookieName}));r(a,t).forEach((function(e){var t=e.name,n=e.allowed,r=e.data,a=n&&!o[t];i[t].setCookieEnabled(a,r||null)}))}};e.addChangeListener("consent",(function(e){var t=(null==e?void 0:e.DL)||null;(null==o?void 0:o.mode)!==(null==t?void 0:t.mode)&&(o=t,i(t))})),i(o)},dt=function(e,n,r){var o,i=function(e,t){return{fields:Object.keys(e).reduce((function(t,n){var r=e[n].cookieName;return null!==r&&(t[n]=r),t}),{}),cookieByName:t}}(e,n),a=We("data-layer",i),s=!1,c=new Map,u=new Set,d=new Map,p=function(){if(!a)throw new Error("DataLayer can't be connected");return a},f=function(e){var t=p().registeredCookiesWrapper;t&&e(t)},m=function(e){f((function(t){e.forEach((function(e){var n=t[e];n&&n.lazyActive()}))}))},g=function(){var e={},t=function(t){return Object.keys(e).reduce((function(n,r){var o=e[r];return void 0!==o[t]&&(n[r]=o[t]),n}),{})};return{add:function(t,n){e[t]=n},call:function(){var e;e=t("protect"),Object.keys(e).length>0&&p().setProtectionData(e),function(){var e=t("protectUnsafe");Object.keys(e).length>0&&p().setProtectionDataUnsafe(e)}()}}},v=function(e,t){return Object.keys(e).reduce((function(n,r){var o=d.get(r),i=e[r];return o&&(n[r]=t?t(o,i):o.get(i)),n}),{})},h=function(){return{params:d,getConnection:p,addChangeListener:C,get:b,updateValues:w}},y=function(e){var t=!1;Object.keys(e).forEach((function(n){var r,i=n,a=d.get(i);if(a){var s=e[i];o[i]!==s&&(o[i]=s,t=!0,null===(r=c.get(i))||void 0===r||r.forEach((function(e){return e(a.get(s))})))}})),t&&u.forEach((function(e){return e(v(o))}))},w=function(e,n,r){var i;void 0===r&&(r=!1);var a=e,s=l();"string"==typeof e&&((i={})[e]=n,a=i);var c=g(),u=g();a=Object.keys(a).reduce((function(e,t){var n=a[t],r=d.get(t),i=t;return null!=r&&r.readonly||(r&&r.cookieName&&s.add(r.cookieName),!r||n===o[t])?e:n===ct?(e[t]=r.refresh(o[t],(function(e){u.add(i,e)})),e[t]!==o[t]&&c.add(i,{protectUnsafe:!1}),e):n===st?(e[t]=r.update(o[t],(function(e){u.add(i,e)})),e):(e[t]=r.set(n,o[t],(function(e){u.add(i,e)})),e)}),{}),m(s.values()),c.call();var f=p().updateData(a);if(f&&r){var h=Object.keys(f).reduce((function(e,n){var r;return t(t({},e),((r={})[n]=!1,r))}),{});p().setProtectionDataUnsafe(h),p().updateData(a)}return u.call(),f&&v(f)};function b(e){var t,n,r=l(),i="string"==typeof e;return void 0===e?n=o:i?((t={})[e]=o[e],n=t):n=e.reduce((function(e,t){return d.has(t)&&(e[t]=o[t]),e}),{}),n=v(n,(function(e,t){return e.cookieName&&r.add(e.cookieName),e.get(t)})),m(r.values()),i?n[e]:n}var _=function(e,t){void 0===t&&(t=!1);var n=e;return Array.isArray(e)||(n=[e]),w(n.reduce((function(e,t){return e[t]=st,e}),{}),void 0,t)},k=function(e,t,n){var r;void 0===n&&(n=!1);var o=n?p().setProtectionDataUnsafe:p().setProtectionData,i=e;return"string"==typeof e&&((r={})[e]=t,i=r),o(i)};function C(e,t){var n;"string"!=typeof e?u.add(e):null===(n=c.get(e))||void 0===n||n.add(t)}return{init:function(n){if(void 0===n&&(n={}),!s){a||(a=We("data-layer",i)),function(e){var n=t(t({},e),ut()),r=n.cookieDefault;f((function(e){Object.keys(e).forEach((function(o){var i,a,s,c,u=e[o].cookieName,l=null===(i=n.cookies)||void 0===i?void 0:i[u],d="fixed"===(null===(a=n.cookies)||void 0===a?void 0:a.storageMode);null===(c=(s=e[o]).setFixedMode)||void 0===c||c.call(s,d),(r||l)&&e[o].setCookieOptions(t(t({},r),l))}))}))}(n),s=!0,Object.keys(e).forEach((function(t){var n=e[t];c.set(t,new Set),d.set(t,n)}));var u=!1,l=p().getInitCookieData(),m=p().getCachedData(),v=g(),w=Object.keys(e).reduce((function(t,n){var r=n,o=e[n];return t[n]=(null==m?void 0:m[r])||o.init(null==l?void 0:l[r],(function(e){v.add(r,e)})),null!=m&&m[r]||(u=!0),t}),{});o=w,u&&p().updateData(w),v.call(),p().onUpdateData((function(e){return y(e)})),null==r||r(h())}},set:function(e,t){return w(e,t,!1)},get:b,update:function(e){return _(e)},refresh:function(){var e;if(p().setProtectionData(((e={})["@@Data-layer/refresh_locked_key"]=!0,e)))return!1;var t=[];d.forEach((function(e,n){return t.push(n)}));var n=t.reduce((function(e,t){return e[t]=ct,e}),{});return w(n),!0},protect:function(e,t){return k(e,t)},addChangeListener:C,removeChangeListener:function(e){u.delete(e),c.forEach((function(t){return t.delete(e)}))},terminate:function(){null==a||a.terminate(),c.clear(),u.clear(),a=null,s=!1},setUnsafe:function(e,t){w(e,t,!0)},protectUnsafe:function(e,t){return k(e,t,!0)},updateUnsafe:function(e){return _(e,!0)},setCookieEnabled:function(e){f((function(t){var n=Object.keys(e);n.length?n.forEach((function(n){var r=t[n];r&&r.setCookieEnabled(e[n])})):Object.keys(t).forEach((function(n){t[n].setCookieEnabled(e)}))}))},updateMigration:function(){s&&at(h())},get cookieEnabled(){return e=null,f((function(t){e=Object.keys(t).reduce((function(e,n){return e[t[n].cookieName]=t[n].cookieEnabled,e}),{})})),e;var e},get isReady(){return s},utils:{validateModifier:M,validateConsent:N,checkConsent:et}}}(xe,Ve,(function(e){lt(e),at(e)}));e.dataLayer=dt,e.default=dt})),u=a((function(e){e.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},e.toByteArray=function(e){var t,n,r=s(e),a=r[0],c=r[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,c)),l=0,d=c>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===c&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===c&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},e.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(u(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};var t,n,r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,n=a.length;t<n;++t)r[t]=a[t],o[a.charCodeAt(t)]=t;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function u(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(c(r));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63})),l=a((function(e){e.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,p=n?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-l)-1,f>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=p,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=u}return(f?-1:1)*a*Math.pow(2,i-r)},e.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,m=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=m,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+f]=255&a,f+=m,a/=256,u-=8);e[n+f-m]|=128*g}})),d=a((function(e){var t=u(),n=l(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=i(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(e));if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=function(e){if(a.isBuffer(e)){var t=0|m(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?i(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(e))}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),i(e<0?0:0|m(e))}function p(e){for(var t=e.length<0?0:0|m(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function m(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(o)return r?-1:D(e).length;t=(""+t).toLowerCase(),o=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,p=0;p<c;p++)if(u(e,i+p)!==u(t,p)){d=!1;break}if(d)return i}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(q(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return F(D(t,e.length-n),e,n,r)}function k(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return F(B(t),e,n,r)}function I(e,t,n,r){return F(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&((c=(31&u)<<6|63&i)>127&&(l=c));break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&((c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c));break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c))}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!a.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},a.allocUnsafe=function(e){return d(e)},a.allocUnsafeSlow=function(e){return d(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(V(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(V(i,Uint8Array))o+i.length>r.length?a.from(i).copy(r,o):Uint8Array.prototype.set.call(r,i,o);else{if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(V(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),c=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n),d=0;d<c;++d)if(u[d]!==l[d]){i=u[d],s=l[d];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=z[e[i]];return o}function O(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,r,o,i){return t=+t,r>>>=0,i||R(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function U(e,t,r,o,i){return t=+t,r>>>=0,i||R(e,0,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),c=s.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%c]}return this};var j=/[^+/0-9A-Za-z-_]/g;function D(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function B(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()}));window.pnFullTPVersion=!0,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0});var p=new WeakMap;function f(e,t){return p.get(e)&&p.get(e).get(t)}function m(e,t,n){if(void 0===t)throw new TypeError;var r=f(t,n);return r&&r.get(e)}function g(e,t,n,r){if(r&&!["string","symbol"].includes(_typeof(r)))throw new TypeError;(f(n,r)||function(e,t){var n=p.get(e)||new Map;p.set(e,n);var r=n.get(t)||new Map;return n.set(t,r),r}(n,r)).set(e,t)}function v(e,t,n){return m(e,t,n)?m(e,t,n):Object.getPrototypeOf(t)?v(e,Object.getPrototypeOf(t),n):void 0}var h,y,w={decorate:function(e,t,n,r){if(!Array.isArray(e)||0===e.length)throw new TypeError;return void 0!==n?function(e,t,n,r){return e.reverse().forEach((function(e){r=e(t,n,r)||r})),r}(e,t,n,r):"function"==typeof t?function(e,t){return e.reverse().forEach((function(e){var n=e(t);n&&(t=n)})),t}(e,t):void 0},defineMetadata:function(e,t,n,r){g(e,t,n,r)},getMetadata:function(e,t,n){return v(e,t,n)},getOwnMetadata:function(e,t,n){return m(e,t,n)},hasMetadata:function(e,t,n){return!!v(e,t,n)},hasOwnMetadata:function(e,t,n){return!!m(e,t,n)},metadata:function(e,t){return function(n,r){g(e,t,n,r)}}};window.Reflect=window.Reflect||{},Object.assign(window.Reflect,w),(y=h||(h={}))[y.Transient=0]="Transient",y[y.Singleton=1]="Singleton",y[y.ResolutionScoped=2]="ResolutionScoped",y[y.ContainerScoped=3]="ContainerScoped";var b=h,_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)};function I(e,t){return function(n,r){t(n,r,e)}}function S(e,t){if("object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function E(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function P(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function x(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function A(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T(arguments[t]));return e}function O(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var M="injectionTokens";function N(e){return!!e.useClass}function R(e){return!!e.useFactory}var L=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(n.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t[0]=e();var o=Reflect[n];return o.apply(void 0,A(t))}})),t},e}();function U(e){return"string"==typeof e||"symbol"==_typeof(e)}function j(e){return"object"==_typeof(e)&&"token"in e&&"transform"in e}function D(e){return!!e.useToken}function B(e){return null!=e.useValue}var F=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),V=F,q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t}(V),z=q,G=function(){this.scopedResolutions=new Map};function H(e,t,n){var r=T(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],o=function(e,t){return null===e?"at position #"+t:'"'+e.split(",")[t].trim()+'" at position #'+t}(void 0===r?null:r,t);return function(e,t,n){return void 0===n&&(n="    "),A([e],t.message.split("\n").map((function(e){return n+e}))).join("\n")}("Cannot inject the dependency "+o+' of "'+e.name+'" constructor. Reason:',n)}var W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t}(V),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t}(V),Q=function(){this.preResolution=new W,this.postResolution=new J},X=new Map,Y=function(){function e(e){this.parent=e,this._registry=new z,this.interceptors=new Q,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,n){var r;if(void 0===n&&(n={lifecycle:b.Transient}),this.ensureNotDisposed(),r=function(e){return N(e)||B(e)||D(e)||R(e)}(t)?t:{useClass:t},D(r))for(var o=[e],i=r;null!=i;){var a=i.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+A(o,[a]).join(" -> "));o.push(a);var s=this._registry.get(a);i=s&&D(s.provider)?s.provider:null}if((n.lifecycle===b.Singleton||n.lifecycle==b.ContainerScoped||n.lifecycle==b.ResolutionScoped)&&(B(r)||R(r)))throw new Error('Cannot use lifecycle "'+b[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),U(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),U(e)){if(U(t))return this.register(e,{useToken:t},{lifecycle:b.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:b.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!U(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:b.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new G),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&U(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof L}(e)){r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var i=x(this.interceptors.preResolution.getAll(e)),a=i.next();!a.done;a=i.next()){var s=a.value;"Once"!=s.options.frequency&&o.push(s),s.callback(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,o;if(this.interceptors.postResolution.has(e)){var i=[];try{for(var a=x(this.interceptors.postResolution.getAll(e)),s=a.next();!s.done;s=a.next()){var c=s.value;"Once"!=c.options.frequency&&i.push(c),c.callback(e,t,n)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,i)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===b.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n,r=e.options.lifecycle===b.Singleton,o=e.options.lifecycle===b.ContainerScoped,i=r||o;return n=B(e.provider)?e.provider.useValue:D(e.provider)?i?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):N(e.provider)?i?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):R(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===b.ResolutionScoped&&t.scopedResolutions.set(e,n),n},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new G),this.ensureNotDisposed();var r=this.getAllRegistrations(e);if(!r&&U(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var o=r.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,o,"All"),o}var i=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,i,"All"),i},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=x(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=T(r.value,2),i=o[0],a=o[1];this._registry.setAll(i,a.filter((function(e){return!B(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,n;this.ensureNotDisposed();var r=new e(this);try{for(var o=x(this._registry.entries()),i=o.next();!i.done;i=o.next()){var a=T(i.value,2),s=a[0],c=a[1];c.some((function(e){return e.options.lifecycle===b.ContainerScoped}))&&r._registry.setAll(s,c.map((function(e){return e.options.lifecycle===b.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.dispose=function(){return E(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach((function(t){var n=t.dispose();n&&e.push(n)})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof L)return e.createProxy((function(e){return n.resolve(e,t)}));var r=function(){var r=X.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,A([void 0],o)))}();return function(e){return"function"==typeof e.dispose&&!(e.dispose.length>0)}(r)&&this.disposables.add(r),r},e.prototype.resolveParams=function(e,t){var n=this;return function(r,o){var i,a,s;try{return function(e){return"object"==_typeof(e)&&"token"in e&&"multiple"in e}(r)?j(r)?r.multiple?(i=n.resolve(r.transform)).transform.apply(i,A([n.resolveAll(r.token)],r.transformArgs)):(a=n.resolve(r.transform)).transform.apply(a,A([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):j(r)?(s=n.resolve(r.transform,e)).transform.apply(s,A([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw new Error(H(t,o,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),$=new Y;var K=function(e){return function(e,t){return function(n,r,o){var i=Reflect.getOwnMetadata(M,n)||{};i[o]=t?{token:e,transform:t.transformToken,transformArgs:t.args||[]}:e,Reflect.defineMetadata(M,i,n)}}(e)};var Z=function(){return function(e){X.set(e,function(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(M,e)||{};return Object.keys(n).forEach((function(e){t[+e]=n[e]})),t}(e))}};var ee=function(e){return void 0===e&&(e=[]),function(t){return e.forEach((function(e){var t=e.token,n=e.options,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["token","options"]);return $.register(t,r,n)})),t}};var te,ne,re,oe,ie=function(){return function(e){Z()(e),$.registerSingleton(e)}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");if(window.pnInitPerformance=performance.now(),window.pnHasPolyfilled||(window.pnHasPolyfilled=!1),window.pnFullTPVersion||(window.pnFullTPVersion=!1),void 0!==window.pn&&void 0!==window.pn.container)throw new Error("Piano SDK is loaded twice on same page. Try to fix that to prevent the message.");!window.pnFullTPVersion&&"undefined"!=typeof Proxy&&(te=function(){return ne},ne=new Proxy({},{get:function(e,t,n){return"isv"===t||te},apply:function(e,t,n){return ne}}),$.resolve=new Proxy($.resolve,{apply:function(e,t,n){if($.isRegistered(n[0]))return Reflect.apply(e,t,n);$.register(n[0],{useValue:ne});var r=$.resolve(n[0]);return oe[n[0]]=r,r}})),re=window.pn||{},(oe=window.pn={}).container=$,oe.singleton=ie,oe.injectable=Z,oe.inject=K,oe.registry=ee,oe.instanceCachingFactory=function(e){var t;return function(n){return null==t&&(t=e(n)),t}},oe.predefinedOptions=re,$.register("predefinedOptions",{useValue:re});var ae,se,ce=!1;try{if(!window.pnHasPolyfilled){if("undefined"==typeof Proxy)throw new Error("The browser cannot Proxy");if(new Promise((function(e){})),Object.assign({},{}),[""].includes(""),!Element.prototype.closest)throw new Error("There is no closest method of a DOM element")}}catch(y){ce=!0}if(ce)throw ae=function(){var e,t=document.querySelectorAll("script");if(t.length)for(var n=0,r=t;n<r.length;n++){var o=r[n],i=null===(e=null==o?void 0:o.src)||void 0===e?void 0:e.match(/^.*?(tinypass.com|piano.io)/i);if(i)return i[0]}return"https://sandbox.tinypass.com"}(),delete window.pn,(se=document.createElement("script")).type="text/javascript",se.async=!0,se.src="".concat(ae,"/api/piano.es5.js"),document.getElementsByTagName("head")[0].appendChild(se),new Error("Load full version of piano SDK");var ue,le=(ue=function(e){return new Promise((function(t,n){var r=document.createElement("style");r.type="text/css",r.innerHTML=e,r.onload=t,r.onerror=n,document.getElementsByTagName("head")[0].appendChild(r)}))},{name:"css",loadOfferCss:function(){ue(".tp-backdrop{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#121214;z-index:300000;opacity:0;transition:opacity .25s linear}.tp-backdrop.tp-active{opacity:.9}.tp-modal .tp-close.tp-square{background:#ccc;border-radius:0;border:0;top:0;right:-40px}.tp-modal .tp-close{display:none;position:absolute;top:-15px;right:-15px;width:30px;height:30px;background:#fff url(\"data:image/svg+xml,%3Csvg width='20' height='20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.51 7.208l-.706-.708-2.798 2.798L7.207 6.5l-.707.707 2.798 2.799L6.503 12.8l.707.707 2.796-2.795 2.792 2.792.707-.707-2.792-2.792 2.798-2.798z' fill='%23000' fill-opacity='.4'/%3E%3C/svg%3E\") center center no-repeat;border:none;box-shadow:0 0 10px rgba(28,37,68,.15);outline:none;z-index:300100;border-radius:40px;opacity:0;cursor:pointer;transform:scale(.25);-webkit-appearance:none;-moz-appearance:none;appearance:none}.tp-modal .tp-close:hover,.tp-modal .tp-close:focus{box-shadow:0 0 10px 2px rgba(28,37,68,.15)}.tp-modal .tp-close:focus{border:1px solid}.tp-modal .tp-close.tp-active{display:block;opacity:1;transform:scale(1)}.tp-modal .tp-iframe-wrapper[dir=rtl] .tp-close{right:initial;left:-20px}.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2 .tp-close{top:0;right:0;width:64px;height:64px;box-shadow:none;outline:none;border-radius:0;border-left:1px solid rgba(15,15,21,.2);background:url(\"data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg %3E%3Cpath d='M3 3L13 13M13 3L3 13' stroke='%230F0F15' stroke-width='2'/%3E%3C/g%3E%3C/svg%3E%0A\") center center no-repeat;opacity:.3}.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2 .tp-close.tp-active{opacity:.3}.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2 .tp-close:hover,.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2 .tp-close:focus{box-shadow:none;border:none;border-left:1px solid rgba(15,15,21,.06);opacity:1}.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2[dir=rtl] .tp-close{right:auto;left:0;border-left:none;border-right:1px solid rgba(15,15,21,.2)}.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2[dir=rtl] .tp-close:hover,.tp-modal .tp-iframe-wrapper.piano-id-modal-ver-2[dir=rtl] .tp-close:focus{border-left:none;border-right:1px solid rgba(15,15,21,.06)}.tp-modal{z-index:300050}@media screen and (max-width: 650px){.tp-modal .tp-close{right:0}.tp-modal .tp-iframe-wrapper[dir=rtl] .tp-close{right:initial;left:0}}.tp-modal .tp-iframe-wrapper.tp-curtain{width:600px;height:480px}.tp-modal-open{overflow:hidden!important;height:100vh;-webkit-overflow-scrolling:touch}.tp-modal-open.tp-modal-resizing{-webkit-overflow-scrolling:auto}.tp-modal-close{overflow:auto}.tp-iframe-wrapper{position:relative;margin:50px auto;box-shadow:0 0 10px rgba(0,0,0,.21)}.tp-iframe-wrapper.no-shadow{box-shadow:unset}.tp-modal{overflow-x:hidden;overflow-y:scroll!important;display:none;position:fixed;top:0;bottom:0;left:0;right:0;transform:translateZ(0)}.tp-modal .tp-message{font-family:Graphik Web Regular,Helvetica,Arial,sans-serif;padding:10px}.tp-modal .tp-btn-container{padding-left:10px;padding-bottom:10px}.tp-cxense-placeholder-modal{width:100%;background-color:#fff;max-width:912px;display:block;overflow:hidden;height:auto;opacity:1}.tp-widget-placeholder>div:after{display:block;content:\"\";clear:both}.tp-btn{text-decoration:none;cursor:pointer;padding:0 18px;line-height:40px;border-collapse:separate;border-radius:4px;text-align:center;vertical-align:middle;display:inline-block;color:#fff;border:none;box-shadow:inset 0 -1px rgba(216,218,221,0);background:#3878D8;background-position:bottom;text-shadow:none;font-family:Graphik Web Regular,Helvetica,Arial,sans-serif;white-space:nowrap;outline:0}.tp-please-wait.tp-active{display:block;opacity:.9;transition:opacity .25s linear}.tp-please-wait{position:absolute;top:0;left:0;background-color:#999;opacity:0;width:100%;height:100%;display:none;text-align:center;color:#fff;font-weight:lighter;font-family:Open Sans,sans-serif;font-size:15px}.tp-please-wait.tp-overlap{position:fixed;z-index:300150}.tp-please-wait.tp-local-overlap{position:absolute}.tp-please-wait>.tp-icon{width:80px;height:80px;margin:100px auto 20px}.pn-spinner{color:gray;display:inline-block;position:relative;width:80px;height:80px}.pn-spinner div{transform-origin:40px 40px;animation:pn-spinner 1.2s linear infinite}.pn-spinner div:after{content:\" \";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.pn-spinner div:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.pn-spinner div:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.pn-spinner div:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.pn-spinner div:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.pn-spinner div:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.pn-spinner div:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.pn-spinner div:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.pn-spinner div:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.pn-spinner div:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.pn-spinner div:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.pn-spinner div:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.pn-spinner div:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes pn-spinner{0%{opacity:1}to{opacity:0}}.tp-please-wait>.tp-icon.tp-centered{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.tp-iframe-wrapper.no-width .tp-close,.tp-iframe-wrapper.no-height .tp-close,.tp-modal.no-width .tp-close,.tp-modal.no-height .tp-close{display:none}.tp-banner{position:fixed;bottom:0;left:0;width:100%}.tp-banner>.tp-container-inner,.tp-banner>.tp-container-inner>iframe{width:inherit!important}.tp-modal-overscroll-prevented{overscroll-behavior:contain;width:100%;overflow-x:unset;overflow-y:scroll}.tp-scroll-prevented{height:100vh;overflow:hidden;touch-action:none}.tp-body-scroll-prevented{background:rgba(18,18,20,.9);touch-action:none}\n")}});pn.container.register("css",{useValue:le}),pn.css=pn.container.resolve("css");var de,pe,fe=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},me=Math.round(1e4*Math.random()),ge=window.document,ve=/^(?:text|application)\/javascript/i,he=/^(?:text|application)\/xml/i,ye="application/json",we="text/html",be=/^\s*$/,_e=function e(t){var n=Me({},t||{});for(de in e.settings)void 0===n[de]&&(n[de]=e.settings[de]);Ce(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host);var r=n.dataType,o=/=\?/.test(n.url);if("jsonp"==r||o)return o||(n.url=xe(n.url,"callback=?")),e.JSONP(n);n.url||(n.url=window.location.toString()),Te(n);var i,a=n.accepts[r],s={},c=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,u=e.settings.xhr();n.crossDomain||(s["X-Requested-With"]="XMLHttpRequest"),a&&(s.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),u.overrideMimeType&&u.overrideMimeType(a)),(n.contentType||n.data&&"GET"!=n.type.toUpperCase())&&(s["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=Me(s,n.headers||{});var l=n.xhrFields&&n.xhrFields.withCredentials;l&&(u.withCredentials=l),u.onreadystatechange=function(){if(4==u.readyState){clearTimeout(i);var e,t=!1;if(u.status>=200&&u.status<300||304==u.status||0==u.status&&"file:"==c){r=r||function(e){return e&&(e==we?"html":e==ye?"json":ve.test(e)?"script":he.test(e)&&"xml")||"text"}(u.getResponseHeader("content-type")),e=u.responseText;try{"script"==r?(0,eval)(e):"xml"==r?e=u.responseXML:"json"==r&&(e=be.test(e)?null:JSON.parse(e))}catch(e){t=e}t?Se(t,"parsererror",u,n):Ie(e,u,n)}else Se(null,"error",u,n)}};var d=!("async"in n)||n.async;for(pe in u.open(n.type,n.url,d),n.headers)u.setRequestHeader(pe,n.headers[pe]);return!1===function(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===ke(t,n,"ajaxBeforeSend",[e,t]))return!1;ke(t,n,"ajaxSend",[e,t])}(u,n)?(u.abort(),!1):(n.timeout>0&&(i=setTimeout((function(){u.onreadystatechange=Pe,u.abort(),Se(null,"timeout",u,n)}),n.timeout)),u.send(n.data?n.data:null),u)};function ke(e,t,n,r){if(e.global)return!0}function Ce(e){e.global&&0==_e.active++&&ke(e)}function Ie(e,t,n){var r=n.context,o="success";n.success.call(r,e,o,t),ke(n),Ee(o,t,n)}function Se(e,t,n,r){var o=r.context;r.error.call(o,n,t,e),ke(r),Ee(t,n,r)}function Ee(e,t,n){var r=n.context;n.complete.call(r,t,e),ke(n),function(e){e.global&&!--_e.active&&ke(e)}(n)}function Pe(){}function xe(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Te(e){"object"===fe(e.data)&&(e.data=function(e,t){var n=[];return n.add=function(e,t){void 0!==t&&(t=null==t?"":t,this.push(Ae(e)+"="+Ae(t)))},Oe(n,e,t),n.join("&").replace("%20","+")}(e.data)),e.data&&(!e.type||"GET"==e.type.toUpperCase())&&(e.url=xe(e.url,e.data))}_e.active=0,_e.JSONP=function(e){if(!("type"in e))return _e(e);var t,n="jsonp"+(e.cache?"Callback":++me),r=ge.createElement("script"),o={abort:function(){n in window&&(window[n]=Pe),Ee("abort",o,e)}},i=ge.getElementsByTagName("head")[0]||ge.documentElement;return e.error&&(r.onerror=function(){o.abort(),e.error()}),window[n]=function(r){clearTimeout(t),delete window[n],Ie(r,o,e)},Te(e),r.src=e.url.replace(/=\?/,"="+n),i.insertBefore(r,i.firstChild),e.timeout>0&&(t=setTimeout((function(){o.abort(),Ee("timeout",o,e)}),e.timeout)),o},_e.settings={type:"GET",beforeSend:Pe,success:Pe,error:Pe,complete:Pe,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:ye,xml:"application/xml, text/xml",html:we,text:"text/plain"},crossDomain:!1,timeout:0},_e.get=function(e,t){return _e({url:e,success:t})},_e.post=function(e,t,n,r){return"function"===fe(t)&&(r=r||n,n=t,t=null),_e({type:"POST",url:e,data:t,success:n,dataType:r})},_e.getJSON=function(e,t){return _e({url:e,success:t,dataType:"json"})};var Ae=encodeURIComponent;function Oe(e,t,n,r){var o="array"===fe(t);for(var i in t){var a=t[i];r&&(i=n?r:r+"["+(o?"":i)+"]"),!r&&o?e.add(a.name,a.value):(n?"array"===fe(a):"object"===fe(a))?Oe(e,a,n,i):e.add(i,a)}}function Me(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach((function(t){for(de in t)void 0!==t[de]&&(e[de]=t[de])})),e}var Ne=_e,Re={request:function(e){return e.dataType=e.dataType||"json",Ne(e)}};pn.container.register("ajax",{useValue:Re}),pn.ajax=pn.container.resolve("ajax");var Le,Ue,je,De,Be;pn.container.register("jqUtils",{useValue:(Le=function(e){return"function"==typeof e},Ue=function(e,t){return e?je(e,t)[0]:null},je=function(e,t){if(!e)return[];var n=t||document,r=e.split(","),o=[];return r.forEach((function(e){var t=e.trim();try{o=o.concat(Array.prototype.slice.call(n.querySelectorAll(t)))}catch(e){var r=t.indexOf(" ")>-1;if("."!==t[0]||r)if("#"!==t[0]||r)o=o.concat(Array.prototype.slice.call(n.querySelectorAll(t)));else{var i=document.getElementById(t.substring(1));o=o.concat(i?[i]:[])}else o=o.concat(Array.prototype.slice.call(n.getElementsByClassName(t.substring(1))))}})),o},De=function(e,t,n){n.setAttribute(e,t)},Be=[],{scrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop},winSize:function(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0],o=e.innerWidth||n.clientWidth||r.clientWidth;return{height:e.innerHeight||n.clientHeight||r.clientHeight,width:o}},isPlainObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return 0===Object.keys(e).length&&e.constructor===Object},isFunction:Le,inArray:function(e,t){return t.indexOf(e)},type:function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},remove:function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},queryEl:Ue,qa:je,filter:function(e,t){return Array.prototype.filter.call(document.querySelectorAll(e),t)},addClass:function(e,t){t.classList.add(e)},toggleClass:function(e,t){t.classList.toggle(e)},removeClass:function(e,t){t.classList.remove(e)},getWidth:function(e){var t=getComputedStyle(e,null),n=t.paddingLeft,r=t.paddingRight,o=e.getBoundingClientRect().width;return o-=parseFloat(n)+parseFloat(r)},show:function(e){e.style.display="block"},hide:function(e){e.style.display="none"},getHeight:function(e){var t=getComputedStyle(e,null),n=t.paddingTop,r=t.paddingBottom,o=e.getBoundingClientRect().height;return o-=parseFloat(n)+parseFloat(r)},visible:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},append:function(e,t){e.appendChild(t)},setAttr:De,setAttrs:function(e,t){Object.keys(e).forEach((function(n){De(n,e[n],t)}))},getAttr:function(e,t){return"string"==typeof e&&(e=Ue(e)),e?e.getAttribute(t):null},ready:function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",(function(){return e()}))},delegate:function(e,t,n,r){var o=function(n){for(var o=n.target;o&&null!=o;o=o.parentNode){var i=Be.findIndex((function(n){return n.parentEl===e&&n.elementSelector===t}));if(o.matches&&o.matches(t)&&i>=0){r.call(o,n);break}}};Be.push({parentEl:e,elementSelector:t,handler:o,eventName:n}),e.addEventListener(n,o,!1)},undelegate:function(e,t){Be=Be.filter((function(n){var r=n.parentEl!==e&&n.elementSelector!==t;return r||n.parentEl.removeEventListener(n.eventName,n.handler),r}))},on:function(e,t,n){e.addEventListener(t,(function(e){n(e)}),!1)},off:function(e,t,n){e.removeEventListener(t,n)},deepExtend:function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r={},o=0,i=function(t){for(var n in t)t.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(t[n])?r[n]=e(r[n],t[n]):r[n]=t[n])};o<t.length;o++)i(t[o]);return r},param:function(e){var t=[],n=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(Le(t)?t():t||0===t||!1===t?t:"")};return Object.keys(e).forEach((function(r){Array.isArray(e[r])?e[r].forEach((function(e){t.push(n(r,e))})):t.push(n(r,e[r]))})),t.join("&")}})}),pn.jqUtils=pn.container.resolve("jqUtils");var Fe=s(c()),Ve=Object.defineProperty,qe={};!function(e,t){for(var n in t)Ve(e,n,{get:t[n],enumerable:!0})}(qe,{cookie:function(){return We},localStorage:function(){return Je},sessionStorage:function(){return Qe}});var ze=function(e){var t=new Date,n=function(e){e&&t.setDate(t.getDate()+e)};if(e instanceof Date)t=e;else if("number"==typeof e)n(e);else{var r=e,o=r.days,i=r.minutes;n(o),i&&t.setMinutes(t.getMinutes()+i)}return t},Ge=function(e){var t=e.replace(/\+/g," ").replace(/^\s+|\s+$/g,"");try{return decodeURIComponent(t)}catch(e){return t}},He=function(e){return 0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),Ge(e)},We=function(){var e=function(e,t,n){var r=void 0===n?{}:n,o=r.path,i=r.domain,a=r.expires,s=r.secure,c=r.samesite,u=r.raw;return(u?e:encodeURIComponent(e))+"="+(u?t:encodeURIComponent(t))+(a?"; expires=".concat(ze(a).toUTCString()):"")+(o?"; path=".concat(o):"")+(i?"; domain=".concat(i):"")+(s?"; secure":"")+(c?"boolean"==typeof c?"; sameSite":"; sameSite=".concat(c):"")},t=function(t,n,r,o){void 0===n||void 0!==o&&function(e){return encodeURI(e).split(/%(?:u[\dA-F]{2})?[\dA-F]{2}|./).length-1}(n)>o||(document.cookie=e(t,n,r))},n=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(e(Ge(r[0]),r[1]||""))return}};function r(e){var t=null,r={};return n((function(n,o){if(e){if(n===e)return t=He(o),!0}else r[n]=He(o)})),e?t:r}var o,i=function(e,n){t(e,"",Object.assign({},n,{expires:-1}))},a=(o="_cookie_test",function(e){void 0===e&&(e=[]);var n=window.location.hostname.split("."),a=(new Date).getTime().toString(36)+Math.round(2147483647*Math.random()).toString(36),s=new Date;s.setSeconds(s.getSeconds()+30);for(var c=0;c<n.length;c++)try{var u=n.slice(-(c+1)).join(".");if(!e.includes(u)){t(o,a,{expires:s,path:"/",domain:u});var l=r(o)===a;if(i(o,{path:"/",domain:u}),l)return u}}catch(e){}});return{set:t,get:r,getNames:function(){var e=[];return n((function(t){e.push(t)})),e},remove:i,getTopLevelDomain:a,__private__:{_generateCookieString:e}}}(),Je=function(){var e="_ls_ttl",t=function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}},n=function(t){try{Object.keys(t).length?window.localStorage.setItem(e,JSON.stringify(t)):window.localStorage.removeItem(e)}catch(e){}},r=function(){var e=o(),r=t(),i={};!r||(Object.keys(r).forEach((function(t){if(e.includes(t))if(function(e){return!e||e>Date.now()}(r[t]?parseInt(r[t],36):null))i[t]=r[t];else try{window.localStorage.removeItem(t)}catch(e){}})),JSON.stringify(r)!==JSON.stringify(i)&&n(i))},o=function(){try{return Object.keys(window.localStorage)}catch(e){return[]}};return r(),{get:function(e){var t;r();try{return null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:null}catch(e){return null}},set:function(e,r,o){if(void 0===o&&(o={}),function(e,r){var o=t();if(void 0===r)return null!=o&&o[e]&&(delete o[e],n(o)),!0;var i=ze(r).getTime();return i>Date.now()&&((o=o||{})[e]=i.toString(36),n(o),!0)}(e,o.expires))try{window.localStorage.setItem(e,r)}catch(e){}},getNames:o,remove:function(e){try{window.localStorage.removeItem(e)}catch(e){}r()},expires:r,__protected__:{get ttlName(){return e}}}}(),Qe={get:function(e){try{return window.sessionStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}},getNames:function(){try{return Object.keys(window.sessionStorage)}catch(e){return[]}},remove:function(e){try{window.sessionStorage.removeItem(e)}catch(e){}}},Xe=function(e){return function(){var t=e.dataLayer.get("consent");return t&&t[e.productName]||null}},Ye=function(e,t){var n=null,r=function(r){var o=(null==r?void 0:r[e.productName])||null;o!==n&&(n=o,t(o))};return e.dataLayer.addChangeListener("consent",r),function(){e.dataLayer.removeChangeListener(r)}},$e=function(e,t){return e.utils.checkConsent.createCheckConsentWrapper(t)},Ke=function(e,t,n){var r=e.utils.checkConsent,o=r.itemsToMask(t),i=Object.keys(t).filter((function(e){return!r.isMask(e)}));return n().filter((function(e){return i.includes(e)||r.getByMask(e,o)}))},Ze=function(e,t,n){var r=Xe(n),o=$e(n.dataLayer,{items:n.items,type:t,getConsent:r}),i=function(t){var r;null===(r=o(Ke(n.dataLayer,n.items,e.getNames),t))||void 0===r||r.forEach((function(t){t.allowed?t.data&&e.set(t.name,t.data):e.remove(t.name)}))};return function(){var e=void 0===n.checkConsentOnInit&&n.enableAutoRemove;n.enableAutoRemove&&Ye(n,i),e&&i(r())}(),Object.assign({},e,{set:function(t,n,r){var i,a=o(t);if(null!=a&&a.allowed){var s=null!==(i=a.data)&&void 0!==i?i:n,c=r?[t,s,r]:[t,s];e.set.apply(null,c)}},check:o})},et=function(e){var t=function(e){var t,n,r=Je.__protected__.ttlName,o={dataLayer:e,productName:"DL"},i=(n=$e(o.dataLayer,{items:(t={},t[r]="mandatory",t),type:"localStorage",getConsent:Xe(o)}),function(){var e=n(r);return e.allowed&&!e.data}),a=!0,s=function(){(a=i())||Je.remove(r)};return Ye(o,s),s(),function(){return a}}(e.dataLayer),n=Ze(Je,"localStorage",e);return Object.assign({},n,{set:function(e,r,o){var i=o;return(null==o?void 0:o.expires)&&!t()&&delete(i=Object.assign({},o)).expires,n.set(e,r,i)}})},tt=function(e){var t=e.dataLayer.utils.checkConsent,n=Xe(e),r={},o=[],i={},a={};Object.keys(e.items).forEach((function(n){var a=e.items[n];if(a.type){var s=a,c=s.type,u=s.domain,l=s.path,d={};i[n]=c,u&&(d.domain=u),l&&(d.path=l),t.isMask(n)?o.push(t.createMask(n,d)):r[n]=d}else i[n]=a}));var s,c=$e(e.dataLayer,{items:i,type:"cookie",getConsent:n}),u=function(n){var s;null===(s=c(Ke(e.dataLayer,i,We.getNames),n))||void 0===s||s.forEach((function(e){var n=function(){return r[e.name]||t.getByMask(e.name,o)||a};e.allowed?e.data&&We.set(e.name,e.data,n()):We.remove(e.name,n())}))};s=!(void 0!==e.checkConsentOnInit||!e.enableAutoRemove),e.enableAutoRemove&&(a=e.enableAutoRemove,Ye(e,u)),s&&u(n());return Object.assign({},We,{check:c,set:function(e,t,n,r){var o,i=c(e);null!=i&&i.allowed&&We.set(e,null!==(o=i.data)&&void 0!==o?o:t,n,r)}})},nt=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(location.hostname),rt=qe.cookie.getTopLevelDomain(),ot={COMPOSER:{cookie:{items:{__tbc:"mandatory",xbc:"mandatory",__tac:"mandatory",__tae:"mandatory",__pls:{type:"mandatory",domain:rt,path:"/"},"__pls_*":{type:"mandatory",domain:rt,path:"/"},"_pc_*":{type:"mandatory",domain:"",path:"/"}}},localStorage:{items:{__pnml:"mandatory","__tp-customVariables":"essential","__tp-customVariables-expiration":"essential"},enableAutoRemove:!0}},VX:{cookie:{items:{"__ut_*":"mandatory",__ut:"mandatory",__pvi:"optional",__pat:"optional",__pnahc:"mandatory","glt_*":"optional","__utg_*":"optional","tpcc_*":{type:"optional",domain:nt?"":rt,path:"/"}}},localStorage:{items:{"__tp-gaAccount":"optional","__tp-trackOnlyAids":"optional","__tp-metricsGAAccount":"optional","__tp-exrs":"optional",tp__unprocessedCookies:"optional","tp__unprocessedСookies":"optional","__tp-gaAccount-expiration":"optional","__tp-trackOnlyAids-expiration":"optional","__tp-metricsGAAccount-expiration":"optional","__tp-exrs-expiration":"optional"},enableAutoRemove:!0}},DMP:{cookie:{items:{cX_P:"essential"},enableAutoRemove:{domain:rt,path:"/"}},localStorage:{items:{_cX_P:"essential"},enableAutoRemove:!0}},ID:{cookie:{items:{__utp:"mandatory","__utp_*":"mandatory",__pid:"mandatory",__pil:"essential",__idr:"essential",__eea:"essential","piano-id-initial-gm-sso-shown-*":"mandatory"}},localStorage:{items:{"pnid-tc-string":"optional"},enableAutoRemove:!0}}},it=["opt-in","essential","opt-out","custom"],at=function(e,t){var n=e.reduce((function(e,t){var n,r=t.id,o=t.name;return C(C({},e),((n={})[o]=String(r),n))}),{}),r=t.reduce((function(e,t){var n;return C(C({},e),((n={})[t]=4,n))}),{});return{addMode:function(e,t){var o=n[e];r[o]=function(e){return it.indexOf(e)}(t)},toParamString:function(){var e=Object.entries(r).reduce((function(e,t){var n=t[0],o=t[1];return r[n]&&(e||(e={}),e[n]=o),e}),null);return e&&JSON.stringify(e)}}};pn.container.register("consent",{useValue:function(){var e=!1,t=[],n={composer:null,vx:null,dmp:null,id:null};var r=function(e){e(n)};return{setByPreset:function(e){Fe.dataLayer.set("consent",e)},set:function(e,t){var n;"string"==typeof e?Fe.dataLayer.set("consent",((n={})[e]=t,n)):Fe.dataLayer.set("consent",e)},get:function(e){var t=Fe.dataLayer.get("consent");return e&&t?t[e]:t},get composer(){return n.composer},get vx(){return n.vx},get dmp(){return n.dmp},get id(){return n.id},__protected__:{addConsentsToParams:function(e){var t,n=Fe.dataLayer.get(["products","consent","consentPresets"]),r=n.products,o=n.consent,i=n.consentPresets,a=!(null===(t=window.pdl)||void 0===t||!t.requireConsent);if(!o&&!a)return e;var s=at(r,Object.keys(i[0].preset));o&&Object.keys(o).forEach((function(e){var t;null!==(t=o[e])&&void 0!==t&&t.mode&&s.addMode(e,o[e].mode)}));var c=s.toParamString();return c&&(e.consent_modes=c),e},init:function(){var o,i=pn.debug?function(e){console.log("[PDL validation]: "+e)}:void 0,a=window.pdl||{};null===(o=Fe.dataLayer.get("products"))||void 0===o||o.forEach((function(e){var t,n=e.name;if(null!==(t=a.consent_modifiers)&&void 0!==t&&t[n]){var r=function(e){return pn.debug?function(t){console.log("[PDL validation]: consent_modifier: ".concat(e," - ").concat(t))}:void 0}(n);a.consent_modifiers[n]=Fe.dataLayer.utils.validateModifier(a.consent_modifiers[n],r)}})),a.consent=Fe.dataLayer.utils.validateConsent(a.consent,i)||a.consent;var s={domain:pn.cookieDomain||qe.cookie.getTopLevelDomain(),path:pn.cookiePath||"/"};Object.entries(ot).forEach((function(e){var t,r=e[0],o=e[1],i=r,a=i.toLowerCase(),c={dataLayer:Fe.dataLayer,productName:i};n[a]={cookie:tt(C(C(C({},c),o.cookie),{enableAutoRemove:null!==(t=o.cookie.enableAutoRemove)&&void 0!==t?t:s})),localStorage:et(C(C({},c),o.localStorage))}})),t.forEach(r),t=[],e=!0},getConsentConfig:function(){return pn.debug?ot:null},async:function(n){e?r(n):t.push(n)}}}}()}),pn.consent=pn.container.resolve("consent");var st={name:"cookie",raw:!1,set:function(e,t,n){var r=n;qe.cookie.set(e,t,r)},get:function(e){return qe.cookie.get(e)||void 0},remove:function(e,t){return null!==qe.cookie.get(e)&&(qe.cookie.remove(e,t),!0)}};pn.container.register("cookie",{useValue:st}),pn.cookie=pn.container.resolve("cookie");var ct=function(){var e=function(){try{return window.localStorage}catch(e){return null}}();window.name||(window.name=Math.floor(1e8*Math.random()));return{get:function(t){if(e&&"function"==typeof e.getItem){var n=qe.localStorage.get(t);try{return JSON.parse(n)}catch(e){return n}}},set:function(t,n){!e||"function"!=typeof e.getItem||qe.localStorage.set(t,JSON.stringify(n))},remove:function(t){!e||"function"!=typeof e.getItem||qe.localStorage.remove(t)}}}();pn.container.register("localStorage",{useValue:ct}),pn.localStorage=pn.container.resolve("localStorage");var ut=function(){var e=function(){return"1.7.67"};return window.__tpVersion="1.7.67",{name:"versionService",getTinypassVersion:e}}();pn.container.register("versionService",{useValue:ut}),pn.versionService=pn.container.resolve("versionService");var lt=function(e){void 0===e&&(e=pn.container);var t,n,r,o=e.resolve("ajax"),i=e.resolve("localStorage"),a=e.resolve("consent"),s="tp__unprocessedCookies",c={};function u(){t&&clearTimeout(t),t=setTimeout((function(){o.request({url:pn.cloudflareWorkerUrl+"?maxAge=2628000",type:"POST",data:JSON.stringify(c),crossDomain:!0,xhrFields:{withCredentials:!0},success:function(){c={},i.remove(s)},error:function(e,t){console.error(t)}})}),2500)}function l(){try{var e=i.get(s);e&&Object.keys(e).forEach((function(t){c[t]=e[t]}))}catch(e){console.error(e)}}return n="tp__unprocessedСookies",(r=i.get(n))&&(i.remove(n),i.get(s)||i.set(s,r)),{name:"itp",init:function(){!pn.cloudflareWorkerUrl||(l(),Object.keys(c).length>0&&u())},synchronizeCookie:function(e,t,n){!pn.cloudflareWorkerUrl||(l(),function(e,t,n){c[e]={value:t},n&&(n instanceof Date?c[e].expires=n:c[e].maxAge=3600*n)}(e,t,n),function(){var e=a.vx;null!==e&&e.localStorage.set(s,JSON.stringify(c))}(),u())}}}();pn.container.register("itp",{useValue:lt}),pn.itp=pn.container.resolve("itp");var dt=s(c());pn.container.register("util",{useValue:function(e){void 0===e&&(e=pn.container);var t,n=e.resolve("jqUtils"),r=e.resolve("cookie"),o=e.resolve("versionService"),i=e.resolve("itp"),a=e.resolve("consent"),s="",c={ENABLED_AFTER_DISABLED:-2,NOT_DETECTED:-1,DISABLED:0,ENABLED:1};void 0==="testString".toHex&&Object.defineProperty(String.prototype,"toHex",{enumerable:!1,value:function(){for(var e="",t=0;t<this.length;++t)e+=""+this.charCodeAt(t).toString(16);return e}});var u=function(e,t,n){var o={path:"/",expires:0};void 0!==t&&(o.domain=t),void 0!==n&&(o.path=n),r.remove(e,o)},l=function(e,t,n){-1!==t.indexOf("abril.com.br")&&u(e,".abril.com.br",n),-1!==t.indexOf("scotsman.com")&&u(e,".scotsman.com",n)},d=function(e){var t;if(0===document.cookie.length)return null;if(e instanceof RegExp)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(-1!==o){var i,a=n[r].substr(0,o).trim();if(e.test(a)){i=n[r].substr(o+1).trim();try{return decodeURIComponent(i)}catch(t){f('Could not uri-decode cookie "'+e.toString()+'"',t)}return i}}}else{var s=("; "+document.cookie).split("; "+e+"=");if(s.length>=2){var c=null===(t=s.pop())||void 0===t?void 0:t.split(";").shift();if(void 0===c)return null;try{return decodeURIComponent(c)}catch(t){f('Could not uri-decode cookie "'+e+'"',t)}return c}}return null},p=function(e){if(0===document.cookie.length)return[];for(var t=[],n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(-1!==o){var i,a=n[r].substr(0,o).trim();if(e instanceof RegExp&&e.test(a)){i=n[r].substr(o+1).replace(/^\s+|\s+$/g,"");try{i=decodeURIComponent(i)}catch(t){f('Could not uri-decode cookie "'+e.toString()+'"',t)}t.push({name:a,value:i})}else if(a===e){i=n[r].substr(o+1).replace(/^\s+|\s+$/g,"");try{i=decodeURIComponent(i)}catch(t){f('Could not uri-decode cookie "'+e+'"',t)}t.push({name:a,value:i})}}}return t};function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!0===pn.debug&&g.apply(void 0,e)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n;g.apply(void 0,e),(n="string"==typeof arguments[0]?new Error(arguments[0]):new Error).stack&&g(n.stack)}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply.call&&void 0!==window.console&&void 0!==window.console.log){var n=["TP:"];try{for(var r=0;r<e.length;r++)n.push(e[r])}catch(t){n=e}Q()&&(n=h(n)),"object"==_typeof(window.console.log)?window.console.log.apply.call(this,console,n):console.log.apply(console,n)}}var v=function(){var e=0;return window.pageYOffset?e=window.pageYOffset:e="number"==typeof(e=document.documentElement||document.body.parentNode).scrollTop?e.scrollTop:document.body.scrollTop,e},h=function(e){var t="";try{for(var n=0;n<e.length;n++)try{t+=JSON.stringify(e[n])+", "}catch(e){t+=""+e}return[t]}catch(t){return e}},y=function(){var e,t;return"CSS1Compat"===document.compatMode?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.body.clientWidth,t=document.body.clientHeight),{x:e,y:t}},w=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},b=function(e){var t=e(location.href);if(history&&"function"==typeof history.replaceState){var n="object"==_typeof(window.next)&&"object"==_typeof(window.next.router)?{url:e(history.state.url||""),as:e(history.state.as||""),options:history.state.options}:history.state;history.replaceState(n,document.title,t)}else location.href=t},_=function(e,t,n){var r=C({path:"/",expires:730},n&&{domain:n}),o=P();for(var i in o)u(e,o[i]);r.domain&&l(e,r.domain),(pn.cookieDomain||pn.cookiePath)&&(r.domain=pn.cookieDomain?pn.cookieDomain:r.domain,u(e,r.domain,r.path),r.path=pn.cookiePath?pn.cookiePath:r.path,u(e,r.domain,r.path)),u(e),G("composer",e,t,r)},k=function(){return qe.cookie.getTopLevelDomain()},I=function(e){return pn.useAidSpecifiedCookies&&pn.aid?e+"_"+pn.aid:e},S=function(){var e,t=I("__pls"),n=d(t);if(n)try{if((e=JSON.parse(n))&&!Array.isArray(e))throw new Error("Push list subscriptions must be an array")}catch(e){f("Can't get push list subscriptions",e)}return e},E=function(e){t=e;var n=k();G("vx","__pat",t,{path:"/",expires:30,domain:n})},P=function(){var e,t=[];t.push(document.domain);for(var n=(null===(e=document.domain)||void 0===e?void 0:e.split("."))||[];n.length>=2;)t.push("."+n.join(".")),n.shift();return t},x=function(e){var t=z(e);return"boolean"===n.type(t)||"string"===n.type(t)&&t.length?!0===t||"true"===t?c.ENABLED:c.DISABLED:c.NOT_DETECTED},T=function(){var e=z("__pnahc"),t=!1;return void 0===e&&(e="0",t=!0),{cookieValue:parseInt(e,10),isFirst:t}},A={},O=function(e){A[e]?A[e].counter++:A[e]={counter:1,waiters:[]}},M=function(e,t){if(A[e]&&(A[e].counter--,A[e].counter<=0)){var n=[];A[e].waiters.forEach((function(e){n.push(e)})),delete A[e],n.forEach((function(e){e(void 0!==t?t:{})}))}},N=function(){return navigator.userAgent||navigator.vendor||window.opera},R=function(){return o.getTinypassVersion().indexOf("SNAPSHOT")>=0},L=function(){return"https:"===document.location.protocol},U=function(e,t){var n=[],r=e.indexOf(t);return-1===r?n.push(e):(n.push(e.substr(0,r)),n.push(e.substr(r+1))),n},j=function(e){var t,n,r=U(e,"=");void 0!==e&&(t=r[0],n=r[1]);var o="";return void 0!==t&&(o+=encodeURIComponent(decodeURIComponent(t))),void 0!==n&&(o+="="+encodeURIComponent(decodeURIComponent(n))),o},D=function(e){var t=parseInt(e,10);return!(isNaN(parseFloat(t))||t<0||t>255)},B=function(e){var t=document.createElement("a");t.href=/^https?:\/\//i.test(e)?e:"http://"+e;var n=t.hostname;return 0===n.indexOf("www.")&&(n=n.replace("www.","")),n};var F=function(e,t){return new RegExp("\\?"+t,"gi").test(e)?e.split("&").length>1?e.replace(new RegExp(t+"[^&]+&?","gi"),""):e.replace(new RegExp("\\?"+t+"[^&]+&?","gi"),""):new RegExp("\\&"+t,"gi").test(e)?e.replace(new RegExp("\\&"+t+"[^&]+","gi"),""):e},V=function(e,t){try{var n=new Error,r=pn.user.getProvider().getName(),o=JSON.stringify([{aid:pn.aid,description:"clearing __tp cookie",userProvider:r,accessTokenList:e,url:window.location.href,trace:Y(n.stack,3),tags:["sdk"]}]);pn.api.callApi("/anon/error/log",{log_message:o})}catch(e){}};var q=function(e){e||(e=730);var t=pn.getMaxCookieExpirationInDays();if(null!==t){var n;"number"==typeof e?(n=new Date).setDate(n.getDate()+e):n=e;var r=new Date;if(r.setDate(r.getDate()+t),n>r)return t}return e},z=function(e){return r.get(e)},G=function(e,t,n,o){var i;a[e]||f("CONSENT ERROR: Consent module was not initiliazed"),H(t,n,o,(null===(i=a[e])||void 0===i?void 0:i.cookie.set)||r.set)},H=function(e,t,n,o){void 0===o&&(o=r.set),n=n||{},"11C6aYHwtb"===pn.aid?(n.samesite="none",n.secure=!0):n.samesite="lax",n.expires&&(n.expires=q(n.expires)),o(e,t,n),void 0!==i.synchronizeCookie&&i.synchronizeCookie(e,t,n.expires)},W="__tp-",J="-expiration",Q=function(){var e=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"],t=["_phantom","__nightmare","_selenium","callPhantom","callSelenium","_Selenium_IDE_Recorder"];for(var n in t){if(window[t[n]])return!0}for(var r in e){var o=e[r];if(window.document[o])return!0}for(var i in window.document)if(i.match(/\$[a-z]dc_/)&&window.document[i].cache_)return!0;return!!(window.external&&window.external.toString&&window.external.toString()&&-1!==window.external.toString().indexOf("Sequentum")||window.document.documentElement.getAttribute("selenium")||window.document.documentElement.getAttribute("webdriver")||window.document.documentElement.getAttribute("driver"))},X=function(){return z("__tac")},Y=function(e,t){return e&&e.split("\n").filter((function(e,n){return n>0&&n<t+1})).map((function(e){return e.trim()})).join("\n")},$=function e(t,n){try{return t()}catch(t){return n?e(n):null}},K=function(e,t){return void 0===t&&(t=!1),$((function(){return JSON.parse(e)}),(function(){return t?JSON.parse(window.atob(e)):null}))||null};return{name:"util",__private__:{getAdjustedCookieExpiration:q},__protected__:{deleteTLDCookieForSpecificDomains:l,documentReady:function(e){var t=function t(){document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t),e()};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(e):(document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t))},getCookie:z,setCookieConsent:G,setCookie:H,getLocalStorageItem:function(e){var t=W+e,n=qe.localStorage.get(t),r=qe.localStorage.get(t+J);return r&&r<Math.floor((new Date).getTime()/1e3)?(qe.localStorage.remove(t),qe.localStorage.remove(t+J),null):n},hasLocalStorage:function(){try{return"object"==_typeof(window.localStorage)&&"function"==typeof window.localStorage.getItem}catch(e){return!1}},randomStringCxCompatible:function(){for(var e=(new Date).getTime().toString(36);e.length<16;)e+=Math.round(2147483647*Math.random()).toString(36);return e.substr(0,16)},setLocalStorageItem:function(e,t,n,r,o){void 0===o&&(o=!0);var i=(o?W:"")+t,s=a[e];s?s.localStorage.set(i,n,{expires:r}):m("There is no such initiated consentProduct ->",e)},removeLocalStorageItem:function(e){var t=W+e;qe.localStorage.remove(t)},cameFromFbSubscriptions:function(){return 0===w("redirect_uri").indexOf("https://www.facebook.com/subscriptions/account-linking/confirm/")},logRemoveTokens:function(e){try{var t=new Error,n=pn.user.getProvider().getName(),r=JSON.stringify([{aid:pn.aid,description:"clearing __utp cookie",userProvider:n,url:window.location.href,trace:Y(t.stack,3),tags:["sdk"]}]);pn.api.callApi("/anon/error/log",{log_message:r})}catch(e){}},waitAllPromises:function(e){return Promise.all(e)},isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},racePromise:function(e){return Promise.race(e)},isCxenseBot:function(){var e=N();return/(cxensebot)/i.test(e)},isHttpsProtocol:L,isApplePayAllowed:function(){var e=!1;try{e=window.ApplePaySession&&window.ApplePaySession.canMakePayments()}catch(e){g("ApplePay error",e)}return(R()||L())&&e},isDevEndpoint:R,setVxUsersToDataLayer:function(e){var t=dt.dataLayer.get("users"),n=!1,r=t?Object.keys(t).reduce((function(e,r){var o;return"VX"===(null===(o=t[r])||void 0===o?void 0:o.type)&&(n=!0,e[r]=null),e}),{}):{};(t&&n||e)&&dt.dataLayer.set("users",C(C({},r),e))}},toJSON:function(e,t){void 0===t&&(t=!1);var n=JSON.stringify(e);return $((function(){return t?window.btoa(n):n}))||n},parseJSON:K,addScript:function(e,t){var n,r=document.createElement("script"),o=document.getElementsByTagName("script")[0];null===(n=o.parentNode)||void 0===n||n.insertBefore(r,o),r.type="text/javascript",r.async=!0,r.onload=t,r.src=e},fromUnderscoreToCamelCase:function(e){return e.slice().replace(/_[a-z]/g,(function(e){return e.replace("_","").toUpperCase()}))},randomString:function(e){e||(e=5);var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";if(window.crypto&&window.crypto.getRandomValues&&"function"==typeof Uint32Array){var r=new Uint32Array(e);window.crypto.getRandomValues(r);for(var o=0;o<e;o++)t+=n.charAt(r[o]%n.length)}else for(o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},log:g,debug:f,error:m,findCookieByName:d,findCookiesByName:p,removeVoucherCodeFromUrl:function(e){return F(e,"voucher_code")},removeSharedAccountCodeFromUrl:function(e){return F(e,"shared_account_code")},deleteCookie:u,mapArrayIndex:function(e,t){return t},getScroll:v,getPageSize:function(){return{x:Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth),y:Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}},getViewport:y,center:function(e,t){var n=v(),r=y();return(r={x:r.x/2-e/2,y:r.y/2-t/2+n}).x=Math.max(0,r.x),r.y=Math.max(10,r.y),r},centerScreen:function(e,t){e=e||0,t=t||0;var r=void 0!==window.screenLeft?window.screenLeft:window.screen.left,o=void 0!==window.screenTop?window.screenTop:window.screen.top,i=n.winSize();return{left:(i.width||document.documentElement.clientWidth||window.screen.width)/2-e/2+r,top:(i.height||document.documentElement.clientHeight||window.screen.height)/2-t/2+o}},getQueryParamByName:w,hasQueryParamByName:function(e){var t={};return location.search.substr(1).split("&").forEach((function(e){var n=e.split("="),r=n[0],o=n[1]&&decodeURIComponent(n[1]);r in t?t[r].push(o):t[r]=[o]})),t.hasOwnProperty(e)},removeQueryParamByName:function(e){b((function(t){return function(e,t){var n,r=e.split("#"),o=r[0].split("?");if(r.length>=2&&(n=r[1]),t=Array.isArray(t)?t:[t],o.length>=2){for(var i=o[1].split(/[&;]/g),a=0;a<t.length;a++)for(var s=encodeURIComponent(t[a])+"=",c=i.length;c-- >0;)-1!==i[c].lastIndexOf(s,0)&&i.splice(c,1);return e=o[0]+(i.length>0?"?"+i.join("&"):""),n?e+"#"+n:e}return e}(t,e)}))},setAccessTokenListCookie:function(e,t,r){var o=I("__ut");if(e&&"string"===n.type(e.value)){var i=new Date,a={domain:void 0,path:"/",expires:730};e.cookie_domain&&"localhost"!==e.cookie_domain&&n.inArray(e.cookie_domain,P())>=0&&(a.domain=e.cookie_domain),pn.cookieDomain&&(a.domain=pn.cookieDomain),pn.cookiePath&&(a.path=pn.cookiePath);var s=P();for(var c in s)u("__tac",s[c]),u("__tae",s[c]),u(o,s[c]);G("composer","__tac",e.value,a),G("composer","__tae",i.getTime(),a),G("vx",o,t,a),""===t&&!r&&V(e,t)}else{var l=P();if(l.push(void 0),pn.cookieDomain&&l.push(pn.cookieDomain),pn.cookiePath)for(var c in l)u("__tac",l[c],pn.cookiePath),u("__tae",l[c],pn.cookiePath),u("__eea",l[c],pn.cookiePath),u(o,l[c],pn.cookiePath);for(var c in l)u("__tac",l[c]),u("__tae",l[c]),u("__eea",l[c]),u(o,l[c]);r||V(e,t)}},setTpccCookies:function(){var e=w("tpcc");if(e){var t=new Date,n=JSON.stringify({date:t.getTime()}),r=k();/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(location.hostname)&&(r=""),r||(r=""),G("vx","tpcc_"+e,n,{path:"/",expires:90,domain:r})}},getCampaigns:function(e){var t=p(/^tpcc_.+/),n=w("tpcc"),r="tpcc_".concat(n),o=!1;t.forEach((function(t){e[t.name]=t.value,n&&t.name===r&&(o=!0)})),n&&!o&&(e[r]=JSON.stringify({date:Date.now()}))},getCustomCookies:function(){var e={};return p(/^_pc_.+/).forEach((function(t){e[decodeURIComponent(t.name)]=t.value})),e},ADBLOCKER_STATUS:c,getAdblockStatus:function(){var e=c.NOT_DETECTED,t=T();return pn.adblockerCookieName&&(e=x(pn.adblockerCookieName)),e===c.NOT_DETECTED&&(e=x("__pac")),e===c.NOT_DETECTED&&(e=x("__adblocker")),function(e,t){e<<=1,t===c.ENABLED?e|=1:e&=-2,t!==c.NOT_DETECTED&&G("vx","__pnahc",e+"",{path:"/",expires:90})}(t.cookieValue,e),e===c.ENABLED&&(t.isFirst||function(e){return 1==(e>>0&1)}(t.cookieValue)||(e=c.ENABLED_AFTER_DISABLED)),e},getAdblockerStatusReason:function(){return void 0!==window.blockAdBlock?"1":"0"},getAdblockerHistoryCookieInfo:T,waitCall:function(e,t){A[e]?A[e].waiters.push(t):t()},startCall:O,doneCall:M,hasCall:function(e){return!!A[e]},debounce:function(e,t,n){var r;return function(){var o=this,i=Array.prototype.slice.call(arguments),a=function(){r=null,n||e.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(o,i)}},throttle:function(e,t){var n,r,o=!1;return function i(){if(o)return n=arguments,void(r=this);e.apply(this,arguments),o=!0,setTimeout((function(){o=!1,n&&(i.apply(r,n),n=r=null)}),t)}},profile:function(e){function t(){return t.__invokeCount++,e.apply(this,arguments)}return Object.defineProperty(t,"__invokeCount",{writable:!0,value:0}),Object.defineProperty(t,"invokeCount",{get:function(){return this.__invokeCount}}),t},setTbcCookieFromResponse:function(e){e.browser&&void 0!==e.browser.tbc&&_("__tbc",e.browser.tbc,e.browser.cookie_domain),e.tbc&&e.tbc.cookie_value&&_("__tbc",e.tbc.cookie_value,e.tbc.cookie_domain)},setTacCookieFromResponse:function(e){var t=(new Date).getTime(),n=X(),r=function(e,r){!e||e===n||(_("__tac",e,r),_("__tae",t,r))};e.browser&&r(e.browser.tac,e.browser.cookie_domain),e.tac&&r(e.tac.cookie_value,e.tac.cookie_domain)},setXbcCookieFromResponse:function(e){var t="xbc";if(e.xbc&&e.xbc.cookie_value){var n={path:"/",expires:730};if(e.xbc.cookie_domain&&"localhost"!==e.xbc.cookie_domain&&(n.domain=e.xbc.cookie_domain,l(t,e.xbc.cookie_domain)),pn.cookieDomain||pn.cookiePath){var r=P();for(var o in r)u(t,r[o]);n.domain=pn.cookieDomain?pn.cookieDomain:n.domain,l(t,n.domain,n.path),n.path=pn.cookiePath?pn.cookiePath:n.path,l(t,n.domain,n.path)}u(t),G("composer",t,e.xbc.cookie_value,n)}},getTbcCookie:function(){return z("__tbc")},getPcidCookie:function(){return z("_pcid")},getTacCookie:X,getAidSpecifiedName:I,getUserTokenCookie:function(){var e=I("__ut"),t=d(e);return void 0!==t&&t&&t.length>=0?t:null},getPushListsCookie:S,setPushListsCookie:function(e){if(e){var t=I("__pls"),n=S()||[];n.indexOf(e)>-1||(n.push(e),u(t),G("composer",t,JSON.stringify(n),{path:"/",expires:730,domain:k()}))}},setAppTimezoneOffsetFromResponse:function(e){e.browser&&void 0!==e.browser.app_timezone_offset?E(e.browser.app_timezone_offset):void 0!==e.timezone_offset&&E(e.timezone_offset)},setAppTimezoneOffset:E,getAppTimezoneOffset:function(){return null==t&&(t=z("__pat")),t||0},getBrowserTimezoneOffset:function(){return-Math.round((new Date).getTimezoneOffset())},str2timestamp:function(e){if(void 0!==e&&0!==e.length){if("string"!=typeof e&&(e=""+e),(e=e.trim()).match(/^[0-9]{0,10}$/))return parseInt(e);if(e.match(/^[0-9]{13,}$/))return parseInt(e)/1e3;var t=Date.parse(e);if(t)return t/1e3;if((e=(e=(e=(e=e.replace(/00:([0-9]{2}(:[0-9]{2})?\s*[AP]M)/i,"12:$1").replace(/([0-9]{2})([AP|M])/i,"$1 $2")).replace(/\s*(at|@|\-|on|\|)\s*/gi," ")).replace(/\s*(mon(day)?|tue(s?day)?|wed(nesday)?|thu((rs)?day)?|fri(day)?|sat(urday)?|sun(day)?)\s*/gi,"")).replace(/([0-9]{1,2})(st|nd|rd|th)/,"$1")).match(/\s+ET$/))e=240===(new Date).getTimezoneOffset()?e.replace(/\s+ET$/," EDT"):e.replace(/\s+ET$/," EST");if(e=e.trim(),t=Date.parse(e))return t/1e3;var n=e.match(/!^([a-z]+)[-/ ]([0-9]+)[-/ ]([0-9]+)(.*)$!i/);if(n?e=n[2]+" "+n[1]+" "+n[3]+n[4]:(n=e.match(/!^([0-9]+)[-/ ]([a-z]+)[-/ ]([0-9]+)(.*)$!i/))&&(e=n[1]+" "+n[2]+" "+n[3]+n[4]),t=Date.parse(e))return t/1e3}},getPossibleCookieDomains:P,isMobileTabletIOs:function(){var e=N();return/iPad|iPhone|iPod/.test(e)&&!window.MSStream},isIphone:function(){var e=N();return/iPhone/.test(e)&&!window.MSStream},isIOS:function(){var e=N();return/iPad|iPhone|iPod/.test(e)&&!window.MSStream},isIOsUiWebView:function(){var e=N();return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e)},isSafariOrIOsUiWebView:function(){var e=N();return/(iPhone|iPod|iPad).*AppleWebKit/i.test(e)},isSafariOrUiWebView:function(){var e=N();return/(Macintosh|iPhone|iPod|iPad)(?!.*Chrome)(?!.*Firefox)(?!.*Opera)(?!.*MSIE)(?!.*Trident)(.*AppleWebKit|.*Safari)/i.test(e)},isFBOrInstWebView:function(){var e=N();return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1||e.indexOf("Instagram")>-1},isAndroid:function(){var e=N();return/(android)/i.test(e)},isIE:function(){var e=-1!==(navigator&&navigator.appVersion||"").indexOf("MSIE"),t=(navigator&&navigator.userAgent||"").indexOf("Trident/")>0;return e||t},isCriOS:function(){return-1!==(navigator&&navigator.userAgent||"").indexOf("CriOS")},isRelativeUrl:function(e){return/^\/(?:\w+|\.{1,2}\/\w+)/.test(e)},prepareUrlParameter:function(e){if(!e)return"";var t=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),r=!1;-1!==n&&(r=!0);var o=!1;-1!==t&&(o=!0),r&&o&&n<t&&(o=!1);var i,a="",s="";if(o){var c=U(e,"?");if(i=c[0],r){var u=U(c[1],"#");a=u[0],s=u[1]}else a=c[1]}else if(r){var l=U(e,"#");i=l[0],s=l[1]}else i=e;return{schemeDomainAndPath:i,queryString:a,hash:s,hasQueryString:o,hasHash:r}}(e=e.replace(/^((%20)|\s)+/,"")),n=encodeURI(decodeURI(t.schemeDomainAndPath));return t.hasQueryString&&(n+="?"+function(e){var t="";if(void 0!==e)for(var n=e.split("&"),r=0;r<n.length;r++)r>0&&(t+="&"),t+=j(n[r]);return t}(t.queryString)),t.hasHash&&(n+="#"+encodeURIComponent(decodeURIComponent(t.hash))),n},getReferrer:function(){return document.referrer},getHostname:B,extractCookieDomain:function(e){if(e&&e.length&&"."===e[0])return e;var t=e||window.location.href,n=B(t);return function(e){var t=e.split("."),n=!0;return 4===t.length&&D(t[0])&&D(t[1])&&D(t[2])&&D(t[3])||(n=!1),n}(n)?n:"localhost"===n?null:"."+n},setCurrentDomainFromResponse:function(e){void 0!==e.browser&&void 0!==e.browser.cookie_domain&&M("domainIsReceived",e.browser.cookie_domain),e.tbc&&e.tbc.cookie_domain&&M("domainIsReceived",e.tbc.cookie_domain)},getCurrentDomainFromCookie:function(e,t){void 0===t&&(t=!1);try{return K(z(e),t).domain}catch(e){O("domainIsReceived")}},isBot:Q,getAffiliateToken:function(e){var t=window.location.hash.slice(1);if(t){var n=t.split("="),r=n[0],o=n[1];r&&o&&r===e&&(b((function(e){return e.split("#")[0]})),s=o)}return s},removeAffiliateToken:function(){s=""}}}()}),pn.util=pn.container.resolve("util");var pt="composer-control-policy",ft="composer-request-control-policy",mt=function(e){var t={},n=e;if(e){if("object"!=_typeof(e))try{n=JSON.parse(e)}catch(e){}t=["deny-web","deny-all","deny-fbia"].reduce((function(e,t){return n[t]&&(e[t]=n[t]),e}),{})}return t},gt=function(e){var t=!1,n=Object.keys(e).reduce((function(n,r){return function(e){return!!e&&Math.ceil(Date.now()/1e3)<=e}(e[r])?n[r]=e[r]:t=!0,n}),{});return{needToRemove:!Object.keys(n).length,needToUpdate:t,newValue:n}};pn.container.register("composerControlPolicy",{useValue:function(e){void 0===e&&(e=pn.container);var t=e.resolve("localStorage"),n=mt(t.get(pt)),r=function(e){var r=gt(n),o=r.needToUpdate,i=r.needToRemove,a=r.newValue;n=C(C({},a),e),(o||e)&&t.set(pt,JSON.stringify(n)),!e&&i&&t.remove(pt)};r();var o=function(e){return r(),!!n["deny-all"]||!!n[e]};return{get denyFbia(){return o("deny-fbia")},get denyWeb(){return o("deny-web")},get denyAll(){return o("deny-all")},__private__:{setPolicyByRequest:function(e){var t;if(e.getAllResponseHeaders().includes(ft)){var n=e.getResponseHeader(ft);n&&r(((t={})[n]=function(e){return void 0===e&&(e=15),Math.ceil(Date.now()/1e3)+60*e}(),t))}},checkLS:function(){n=mt(t.get(pt))}}}}()}),pn.composerControlPolicy=pn.container.resolve("composerControlPolicy");var vt=function(){var e,t=pn.container.resolve("jqUtils"),n=pn.container.resolve("util"),r=pn.container.resolve("ajax"),o=n.findCookieByName(/__TP_*/);if(void 0!==window._tpm&&void 0!==window._tpm.paywallID){var i=window._tpm.paywallID;e=n.__protected__.getCookie("umc_"+i)}var a=function(){return pn.getApiEndpoint()},s=function(t,r){var i=n.__protected__.getCookie("__tac");(void 0===t||!t)&&(t={}),t.aid=pn.aid,e&&(t.umc=e),o&&(t.tp_access_token_v2=o),i&&(t.tac=i),!t.user_provider&&r&&!r.isv&&(t.user_provider=r.getName()),(void 0===t.user_token||!t.user_token)&&r&&!r.isv&&(t.user_token="string"==typeof r.getToken()?r.getToken():"");var a=n.getAffiliateToken(pn.affiliateTokenName);a&&(t.affiliateToken=a)};function c(e,o,i,c,u,l){var d;n.debug("Calling API method: "+e),d=void 0!==c?c:a(),d+=e,(void 0===o||!o)&&(o={});var p,f,m=n.getTbcCookie();m&&(o.tbc=m),pn.user&&(p=pn.user.getProvider()),s(o,p),f=function(e){n.debug("API Response",e),n.setTbcCookieFromResponse(e),n.setAppTimezoneOffsetFromResponse(e),n.setCurrentDomainFromResponse(e),void 0!==i&&i(e)};var g=function(e){var t="/access/list",n="/access/check";if(e!==t&&e!==n&&"/user/access/list"!==e&&"/user/access/check.jwt"!==e)return null;var r=Math.floor((new Date).getTime()/1e3);return e===t?{code:0,count:0,data:[],limit:0,offset:0,total:0,ts:r}:e===n?{code:0,ts:1548942314,access:{access_id:null,parent_access_id:null,granted:!1,resource:null,user:null,expire_date:r}}:{code:403,ts:r,message:"User doesn't have permission to call this method"}}(e);if(null===g||pn.user.getProvider().isUserValid()){!function(e){!pn.isDoubleOptInCheckOnAccessCheckEnabled||"/access/check"===e&&pn.doubleOptIn.check()}(e);var v,h={dataType:"jsonp"};if(l){var y=o.aid;delete o.aid,v="aid="+y,Object.assign(h,{type:"POST",dataType:"json",data:o})}else o.callApiJsonp=!0,v=t.param(o);d+="?"+v,h.url=d,u&&(h.async=!1),h.success=function(e){f(e)},h.error=function(e){var t={code:503,message:"Error: Received error when requesting API response from URL: "+d};n.log(t.message),f(t)},r.request(h)}else f(g)}return{name:"api",callApi:function(e,t,n,r,o,i){return c(e,t,n,r,o,i)},getEndpoint:function(){return a()},getCallParams:function(e,t){return s(e,t)}}}();pn.container.register("api",{useValue:vt}),pn.api=pn.container.resolve("api");var ht=function(){var e,t,n,r,o,i,a,s,c,u,l,d=pn.container.resolve("jqUtils"),p=pn.container.resolve("util"),f={},m={},g=[],v={},h=(e={},i=1,a=window,s=!1,u="addEventListener",l=a[c="postMessage"],e[c]=function(e,t,n){!t||(e="string"==typeof e?e:d.param(e),n=n||parent,l?n[c](e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},e.receiveMessage=o=function(e,i,c){l?(e&&(r&&o(),r=function(t){if("string"==typeof i&&t.origin!==i||d.isFunction(i)&&i(t.origin)===s)return s;e(t)}),a[u]?a[e?u:"removeEventListener"]("message",r,s):a[e?"attachEvent":"detachEvent"]("onmessage",r)):(t&&clearInterval(t),t=null,e&&(c="number"==typeof i?i:"number"==typeof c?c:100,t=setInterval((function(){var t=document.location.hash,r=/^#?\d+&/;t!==n&&r.test(t)&&(n=t,e({data:t.replace(r,"")}))}),c)))},e);var y=function(e,t,n){n&&k(n)&&!(n in m)?p.error("Cannot send message to unmanaged iframe: "+n):n&&m[n].element&&("popup"===m[n].config.displayMode||"popup"!==m[n].config.displayMode&&m[n].element.contentWindow?w(e,t,n):(g.push({event:e,params:t,recipient:n}),d.on(m[n].element,"load",function(e){return function(){var t=g.filter((function(t){return t.recipient===e}));g=g.filter((function(t){return t.recipient!==e}));for(var n=t.length;n--;){var r=t.pop();w(r.event,r.params,r.recipient)}}}(n))))},w=function(e,t,n){var r,o={},i="popup"===m[n].config.displayMode?"opener":"parent";o.sender=k(n)?i:n,o.recipient=k(n)?n:i,o.event=e,o.params=t;var a=m[n].element;r="popup"===m[n].config.displayMode?m[n].container:a&&a.contentWindow?a.contentWindow:a&&"[object Window]"===a.toString()?m[n].element:window[i],h.postMessage(JSON.stringify(o),f[n].postMessageUrl,r)};var b=function(e){f[e.iframeId]={iframeConfig:null,receive:null,postMessageUrl:null,initializedListener:!1,initializedKeystrokeHandler:!1},m[e.iframeId]=e},_=function(e){return!(!f[e]||!f[e].iframeConfig)},k=function(e){return!(f[e]&&f[e].iframeConfig)},C=function(e){var t=I(e);return t.showCloseButton&&"inline"!==t.displayMode},I=function(e){var t=f[e],n=t&&t.iframeConfig&&t.iframeConfig.iframe;return n&&n.config};function S(e){var t,n,r=!1;try{t=JSON.parse(e.data)}catch(n){try{t=function(e,t){var n={},r={true:!0,false:!1,null:null};return e.replace(/\+/g," ").split("&").forEach((function(e,o){var i=o.split("="),a="";try{a=decodeURIComponent(i[0])}catch(e){return}var s,c=n,u=0,l=a.split("]["),d=l.length-1;if(/\[/.test(l[0])&&/\]$/.test(l[d])?(l[d]=l[d].replace(/\]$/,""),d=(l=l.shift().split("[").concat(l)).length-1):d=0,2===i.length)if(s=decodeURIComponent(i[1]),t&&(s=s&&!isNaN(s)?+s:"undefined"===s?void 0:void 0!==r[s]?r[s]:s),d)for(;u<=d;u++)c=c[a=""===l[u]?c.length:l[u]]=u<d?c[a]||(l[u+1]&&isNaN(l[u+1])?{}:[]):s;else Array.isArray(n[a])?n[a].push(s):void 0!==n[a]?n[a]=[n[a],s]:n[a]=s;else a&&(n[a]=t?void 0:"")})),n}(e.data),t&&(r=!0)}catch(t){return void p.debug("Error parsing postMessage: "+e.data)}}if(E(t),r){var o;for(var i in m)(n=m[i]).config.isCurtain&&(o=!0,n.config.parent&&f[n.config.parent].receive&&f[n.config.parent].receive(t),f[i].receive&&f[i].receive(t));o||p.debug("Error parsing postMessage: "+e.data)}else if(!k(t.sender)||t.sender&&t.sender in m){if(p.debug((_(t.sender)?"iframe("+t.recipient:"the parent")+") received event '"+t.event+"' from iframe("+t.sender+")",t),f[t.sender].receive&&f[t.sender].receive(t),m[t.sender]&&((n=m[t.sender]).config.parent&&f[n.config.parent].receive)){t.sender=n.config.parent,f[n.config.parent].receive(t,!0)}}else p.debug("Received message from unmanaged iframe: "+t.sender)}var E=function(e){(v[e.event]||[]).forEach((function(t){t(e)}))};return{name:"postmessage",init:function(e,t){if(b(e.iframe),e.postMessageUrl){if(e.iframe.iframeId){f[e.iframe.iframeId].initializedKeystrokeHandler||(f[e.iframe.iframeId].initializedKeystrokeHandler=!0,d.delegate(window,"#".concat(e.iframe.iframeId),"keyup",(function(e){return function(e){27===e.keyCode&&_(e.data.iframeId)&&C(e.data.iframeId)&&y("close",null,e.data.iframeId)}(e)}))),f[e.iframe.iframeId].postMessageUrl=e.postMessageUrl,f[e.iframe.iframeId].initializedListener||(f[e.iframe.iframeId].initializedListener=!0,f[e.iframe.iframeId].receive=e.receive,h.receiveMessage(S)),f[e.iframe.iframeId].iframeConfig=e;var n=t||{};n.height=document.documentElement.offsetHeight,n.width=e.iframeParams&&e.iframeParams.width?e.iframeParams.width:document.documentElement.offsetWidth,y("loaded",n,e.iframe.iframeId)}}else p.error("Must specify postMessageUrl to send and receive postMessages")},__protected__:{isIframeManaged:function(e){var t=m[e];return t&&k(t)}},send:y,removeIframe:function(e){delete m[e],delete f[e]},broadcast:function(e,t,n){for(var r in m)m.hasOwnProperty(r)&&r===n||y(e,t,r)},subscribe:function(e,t){v[e]=v[e]||[],v[e].push(t)},unsubscribe:function(e,t){v[e]instanceof Array&&(v[e]=v[e].filter((function(e){return e!==t})))}}}();pn.container.register("postmessage",{useValue:ht}),pn.postmessage=pn.container.resolve("postmessage");var yt=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("util"),n=pn.container.resolve("postmessage");return{name:"eventUtils",createEventManager:function(r){var o,i={};for(o=0;o<r.length;o++)i[r[o]]=[];var a={addEvent:function(e){void 0===i[e]&&(i[e]=[])},hasIframeCallback:function(e,t){var n,r;if(i[e]&&i[e].length>0)for(r=0,null,n=null;r<i[e].length;++r)if("object"==_typeof(n=i[e][r])&&t===n.iframeId)return!0;return!1},hasCallback:function(e){return i[e]&&i[e].length>0},registerCallback:function(e,n){var r,o,a,s="string"==typeof e?e:null,c="object"==_typeof(e)?e:null;if(s){if(r="function"==typeof n?n:null,void 0===i[s])return;i[s].push(r)}if(c)for(a in o="string"==typeof n?n:null,i)"function"==typeof c[a]&&(t.debug("Registering "+a+" callback for iframe "+o),i[a].push({iframeId:o,callback:c[a]}))},fireCallbacks:function(e,t,n,r){return a.fire(n,e,r,t)},fire:function(r,o,a,s,c,u){var l,d,p,f=!1,m=[];s&&m.push(s),c&&m.push(c),u&&m.push(u);var g=s&&s.resultCallbackId,v=function(n){if(a)try{if(m.length>1)return d.apply(null,m);if("loginRequired"===o){var i=e.deepExtend({},n.term);return delete n.term,d(n,r,i)}return d(n,r)}catch(e){t.debug(e)}};if(void 0!==i[o]){for(p=0,l=null,d=null;p<i[o].length;++p){if("function"==typeof(d=i[o][p]))t.debug("firing callback for event '"+o+"' from iframe("+r+")"),l=v(s),f=!0;else if("object"==_typeof(d)){if(r!==d.iframeId)continue;t.debug("firing callback for event '"+o+"' from iframe("+r+")"),d=d.callback,l=v(s),f=!0}g&&(s.result=l,s.event=o,n.send("resultCallback",s,r))}return!f&&g&&(s.callbackNotFound=!0,s.event=o,n.send("resultCallback",s,r)),l}},fireCallbacksAndStopOnFirstFalse:function(e,n,r,o){for(var a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];if(void 0===i[e])return!0;for(var c=!0,u=0;u<i[e].length;u++){var l=i[e][u];if("function"==typeof l){t.debug("firing callback for event '"+e+"'");try{var d=[];if(d.push(n),d.push(r),d.push(o),d=d.concat([].slice.call(a)),!1===l.apply(null,d)){t.debug("callback for event '"+e+"' returned false"),c=!1;break}}catch(n){t.debug("firing callback for event '"+e+"' failed",n)}}}return c}};return a}}}();pn.container.register("eventUtils",{useValue:yt}),pn.eventUtils=pn.container.resolve("eventUtils");var wt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("api"),n=pn.container.resolve("eventUtils"),r=pn.container.resolve("localStorage"),o=n.createEventManager(["userChanged","logout"]),i="janrain",a=function(){return e.getUserTokenCookie()},s=function(){var e=a();return!!(void 0!==e&&e&&e.length>=0)},c=!1,u=!1,l={onCaptureSessionCreated:[]},d={loginRequiredScreen:"signIn",appName:null,appId:null,clientId:null,settings:null,disableLogout:!1,startCapture:!1},p={register:"traditionalRegistration",login:"signIn"};var f=function(e){return e&&p.hasOwnProperty(e.startScreen)?p[e.startScreen]:d.loginRequiredScreen};var m=function(){d.disableLogout||e.setAccessTokenListCookie(void 0,void 0,!0)},g=!0,v=function(){var e=window.janrain;return e&&e.capture&&e.capture.ui&&e.capture.ui.hasActiveSession()};function h(){e.log("JANRAIN:","Processing janrain user"),g?g=!1:e.startCall("refreshUserToken"),e.log("JANRAIN:","hasActiveSession:"+v());var n=y();if(!v())return e.log("JANRAIN:","No token found.  Done processing user"),m(),void e.doneCall("refreshUserToken");if(s())return e.log("JANRAIN:","Using __ut.  Done processing user"),void e.doneCall("refreshUserToken");var r={janrain_capture_token:n,url:e.prepareUrlParameter(window.location.href)};t.callApi("/anon/janrain/verifyAccountInfo",r,(function(t){if(t&&t.access)try{e.log("JANRAIN:","Verify success.  Done processing user"),e.setAccessTokenListCookie(t.access.access_token,t.access.user_token);var n={access_token:t.access.access_token,user_token:t.access.user_token};t.access.user&&(n.user={uid:t.access.user.uid,email:t.access.user.email,firstName:t.access.user.first_name,lastName:t.access.user.last_name,valid:t.access.user.valid}),function(e,t){if(void 0!==l[e]&&0!==l[e].length)for(var n=0;n<l[e].length;++n)l[e][n].apply(null,arguments)}("onCaptureSessionCreated",n),o.fireCallbacks("userChanged",n,void 0,!0)}finally{e.doneCall("refreshUserToken")}else e.log("JANRAIN:","Verify failed")}))}var y=function(){return r.get("janrainCaptureToken")},w=function(){var t=window.janrain;t.events.onProviderLogoutComplete.addHandler((function(){m()})),t.events.onCaptureSessionEnded.addHandler((function(t){e.log("JANRAIN: Events received for logout",t),m()})),b()},b=function(){if(v())return e.log("JANRAIN:","Found early active session via function"),void h();if(!v()&&!s()&&!y())return e.log("JANRAIN:","not found __ut cookie and janrain token"),void h();var t=!1,n=window.janrain;n.events.onCaptureSessionFound.addHandler((function(n){_()?t&&(e.log("JANRAIN: Events received for logged in user",n),h()):h()})),n.events.onCaptureSessionNotFound.addHandler((function(n){_()?t&&(e.log("JANRAIN: Events received for logged out user",n),h()):h()})),n.events.onCaptureFederateNoLogin.addHandler((function(e){t=e})),n.events.onCaptureFederateLogin.addHandler((function(t){e.log("JANRAIN: Events received for SSO login",t),h()}))},_=function(){var e=window.janrain;return e&&e.settings&&e.settings.capture&&e.settings.capture.federate};function k(e,t){if(!c)throw"Janrain is not configured";var n=0;!function r(){var o=window.janrain;if(u)o.events[e].addHandler((function(e){t(e)}));else{if(n>100)throw"Janrain is not initialized";n++,window.setTimeout(r,100)}}()}return{name:i,isv:!1,init:function(t){if(!c){if(!t.appName||!t.appId||!t.clientId)throw"Must specify appName, appId, and clientId to initialize janrain";for(var n in d)void 0!==t[n]&&(d[n]=t[n]);if(t.settings&&(d.settings=t.settings),t.loginRequiredScreen&&(d.loginRequiredScreen=t.loginRequiredScreen),d.settings){"object"!=_typeof(window.janrain)&&(window.janrain={}),"object"!=_typeof(window.janrain.settings)&&(window.janrain.settings={});var r=window.janrain;r.settings=d.settings,"object"!=_typeof(window.janrain.settings.capture)&&(window.janrain.settings.capture={}),r.settings.appUrl="https://"+d.appName+".rpxnow.com",r.settings.capture.captureServer="https://"+d.appName+".janraincapture.com",r.settings.capture.appId=d.appId,r.settings.capture.clientId=d.clientId;var o,i=d.appName.replace(/\./g,"-"),a="http://widget-cdn.rpxnow.com/load/"+i,s="https://rpxnow.com/load/"+i;o=e.__protected__.isHttpsProtocol()?s:a,pn.push(["addExternalLibrary",o,function(){r.ready=!0}])}e.log("JANRAIN:","start refresh user token"),e.startCall("refreshUserToken",3e4),e.waitCall("refreshUserToken",(function(){e.log("JANRAIN:","end refresh user token")})),function(){var t=100,n=0;function r(){var o=window.janrain;if(window.janrain&&window.janrain.ready&&window.janrain.capture&&window.janrain.capture.ui&&window.janrain.capture.ui.hasActiveSession)(function(){var t=window.janrain,n=function(n){t.events[n].addHandler((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.log("JANRAIN: ",n,t)}))};pn.debug&&t.events.captureEvents.forEach(n)})(),w(),d.startCapture&&o.capture.ui.start(),u=!0;else{if(n>t)throw"Janrain is not initialized";n++,window.setTimeout(r,100)}}r()}(),c=!0,pn.zIndexes={backdrop:900,modal:950,close:990};var l=function(t){e.log("JANRAIN: onLogin"),window.janrain.capture.ui.modal.close(),h()};k("onCaptureLoginSuccess",l),k("onCaptureRegistrationSuccess",l)}},isUserValid:s,getToken:a,getName:function(){return i},onLoginSuccess:function(t){e.setAccessTokenListCookie({value:t.token_list,cookie_domain:t.cookie_domain},t.user_token)},login:function(e,t){if(!c)throw"Janrain is not configured";var n=0;!function r(){if(u)try{window.janrain.capture.ui.renderScreen(f(t)),"function"==typeof e&&function(e,t){l[e]=[],l[e].push(t)}("onCaptureSessionCreated",e)}catch(e){return n++,void window.setTimeout(r,100)}else{if(n>100)throw"Janrain is not initialized";n++,window.setTimeout(r,100)}}()},logout:function(e){if(!c)throw"Janrain is not configured";var t=0,n=0;function r(){n>100?e():v()?(n++,window.setTimeout(r,100)):e()}m(),function n(){if(u){var i=window.janrain;i.capture.ui.modal.close(),i.capture.ui.endCaptureSession(),o.fireCallbacks("logout",null,void 0,!0),e&&r()}else{if(t>100)throw"Janrain is not initialized";t++,window.setTimeout(n,100)}}()},isConfigured:function(){return c},getLoginRequiredScreen:f,addEventHandler:k,registerCallback:function(e,t){o.addEvent(e),o.registerCallback(e,(function(e){t(e)}))}}}();pn.container.register("janrain",{useValue:wt}),pn.janrain=pn.container.resolve("janrain");var bt={name:"sha1",hash:function(e,t){function n(e,t){return e<<t|e>>>32-t}function r(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n}t=t||32;var o,i,a,s,c,u,l,d,p,f=new Array(80),m=1732584193,g=4023233417,v=2562383102,h=271733878,y=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e);var w=e.length,b=new Array;for(i=0;i<w-3;i+=4)a=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),b.push(a);switch(w%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(w-1)<<24|8388608;break;case 2:i=e.charCodeAt(w-2)<<24|e.charCodeAt(w-1)<<16|32768;break;case 3:i=e.charCodeAt(w-3)<<24|e.charCodeAt(w-2)<<16|e.charCodeAt(w-1)<<8|128}for(b.push(i);b.length%16!=14;)b.push(0);for(b.push(w>>>29),b.push(w<<3&4294967295),o=0;o<b.length;o+=16){for(i=0;i<16;i++)f[i]=b[o+i];for(i=16;i<=79;i++)f[i]=n(f[i-3]^f[i-8]^f[i-14]^f[i-16],1);for(s=m,c=g,u=v,l=h,d=y,i=0;i<=19;i++)p=n(s,5)+(c&u|~c&l)+d+f[i]+1518500249&4294967295,d=l,l=u,u=n(c,30),c=s,s=p;for(i=20;i<=39;i++)p=n(s,5)+(c^u^l)+d+f[i]+1859775393&4294967295,d=l,l=u,u=n(c,30),c=s,s=p;for(i=40;i<=59;i++)p=n(s,5)+(c&u|c&l|u&l)+d+f[i]+2400959708&4294967295,d=l,l=u,u=n(c,30),c=s,s=p;for(i=60;i<=79;i++)p=n(s,5)+(c^u^l)+d+f[i]+3395469782&4294967295,d=l,l=u,u=n(c,30),c=s,s=p;m=m+s&4294967295,g=g+c&4294967295,v=v+u&4294967295,h=h+l&4294967295,y=y+d&4294967295}return(p=r(m)+r(g)+r(v)+r(h)+r(y)).toLowerCase().slice(0,t)}};pn.sha1=bt,pn.container.register("sha1",{useValue:bt});var _t=function(){function e(e,t){this._isActive=!1,this.targets=[],this.timeout=200,this.util=t,this.callback=e}return e.prototype._mutationSearch=function(){var e=this;this.targets.forEach((function(t){var n=e._getState(t.element);!n===t.currentState&&(t.currentState=n,e.callback([{target:t.element}]))})),this._isActive&&setTimeout(this._mutationSearch.bind(this),this.timeout)},e.prototype._getState=function(e){var t=[].slice.call(e.attributes).reduce((function(t,n){return t[n.name]=e.getAttribute(n.name),t}),{});return JSON.stringify(t)},e.prototype.observe=function(e){this.targets.push({id:this.util.randomString(),element:e,currentState:this._getState(e)}),this._isActive||(this._isActive=!0,this._mutationSearch())},e.prototype.disconnect=function(){this._isActive=!1,this.targets=[]},e}(),kt=function(){pn.container.resolve("jqUtils");var e=pn.container.resolve("util"),t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n={attributes:!0};return{name:"observer",create:function(r,o){r||e.error("element must be NODE");var i=new(t||_t)((function(e){var t=e.map((function(e){return e.target}));return"function"==typeof o&&o(t)}),e);return i.observe(r,n),i}}}();pn.container.register("observer",{useValue:kt}),pn.observer=pn.container.resolve("observer");var Ct=function(){var e,t,n,r=pn.container.resolve("jqUtils"),o=pn.container.resolve("util"),i=pn.container.resolve("postmessage"),a=pn.container.resolve("eventUtils"),s=pn.container.resolve("sha1"),c={},u={},l=a.createEventManager(["close"]),d="tp-container-inner",p=new Map,f=[],m="tp-modal-overscroll-prevented",g="tp-scroll-prevented",v="tp-body-scroll-prevented",h={_initialScrollPosition:{x:0,y:0},applyFix:function(){var e=window.visualViewport?Math.max(window.scrollY,document.documentElement.scrollTop,window.visualViewport.pageTop):Math.max(window.scrollY,document.documentElement.scrollTop);this.saveInitialScroll(window.scrollX,e),n&&(k(),w(),y(n,m))},removeFix:function(){document.querySelectorAll(".tp-iframe-wrapper.tp-active").length||(this._scrollBack(),t&&(t.disconnect(),t=null),_())},_scrollBack:function(){(this._initialScrollPosition.y||this._initialScrollPosition.x)&&C(this._initialScrollPosition.x,this._initialScrollPosition.y)},saveInitialScroll:function(e,t){this._initialScrollPosition.x=e,this._initialScrollPosition.y=t},modalOpened:function(){this.applyFix()},modalClosed:function(){this.removeFix()}},y=function(e,t){e.classList.add(t)},w=function(){y(document.documentElement,g),y(document.body,v)},b=function(e){document.querySelectorAll(".".concat(e)).forEach((function(t){t.classList.remove(e)}))},_=function(){b(g),b(v)},k=function(){var e=document.querySelectorAll(".tp-iframe-wrapper"),n=e[e.length-1];(t=new MutationObserver((function(e,t){for(var n=0,r=e;n<r.length;n++){var o=r[n];"attributes"===o.type&&"style"===o.attributeName&&C(0,0)}}))).observe(n,{attributes:!0,childList:!0,subtree:!0})},C=function(e,t){function n(e){return/\{\s*\[native code\]\s*\}/.test(""+e)}try{if(n(window.scrollTo))return void window.scrollTo(e,t);if(n(window.scroll))return void window.scroll(e,t);document.body&&(document.body.scrollTop=0)}catch(e){console.warn("Can not perform scroll: "+e.message)}};r.on(window,"resize",(function(){var e;if(Y(),o.isAndroid()){var t=null===(e=document.querySelector(".tp-iframe-wrapper.tp-active"))||void 0===e?void 0:e.closest(".tp-modal");t&&t.scrollBy(0,1)}})),o.isIOS()&&r.on(window,"orientationchange",(function(){setTimeout((function(){return Y()}),100)})),i.subscribe("close",(function(){h.modalClosed()})),i.subscribe("toggleIframeShadow",(function(e){E(e.params.isEnabled)})),i.subscribe("toggleLoadingContainer",(function(e){if(e.params.isEnabled)return ee();te()}));var I,S,E=function(e){var t=document.querySelector(".tp-iframe-wrapper");if(t){if(e)return t.classList.contains("no-shadow")&&t.classList.remove("no-shadow");t.classList.add("no-shadow")}},P=function(e){(function(e){i.send("checkProccessesForClose",{},e.iframeId)})(e),"popup"===e.config.displayMode?e.container.close():(function(e){if(o.debug("Removing iframe",e),e.element&&(r.hide(e.element),"inline"===e.config.displayMode)){var t=e.element.parentElement;t&&r.hide(t)}e.resizeObserver&&e.resizeObserver.disconnect(),("modal"===e.config.displayMode||"inline"===e.config.displayMode)&&(e.waitFinishProcesses=!0)}(e),R(),U())},x=function(){for(var e in c){var t=c[e];if("modal"===t.config.displayMode&&!t.waitFinishProcesses&&!t.config.isPreload)return!0}return!1},T=function(e){var t=document.createElement("form"),n={id:"form_"+e.iframeId,method:"post",action:e.iframeSrc,target:e.iframeId};return r.setAttrs(n,t),[{name:"userToken",value:e.userToken}].forEach((function(e){var n=document.createElement("input"),o={type:"hidden",name:e.name};r.setAttrs(o,n),n.value=e.value,r.append(t,n)})),t},A=function(e){return c[e]},O=function(){function e(e,t,n){this.$=e,this._operationWithContainer=n,this.util=t,this._initModalContainer(),this.iOSBottomToolbarHeight=90}return e.prototype._initModalContainer=function(){var e=this;return this.container||(this.container=document.createElement("div"),this.element=this.container,this.$.addClass("tp-modal",this.container),this.close=document.createElement("button"),this.$.setAttr("type","button",this.close),this.$.setAttr("aria-label","Close",this.close),this.$.addClass("tp-close",this.close),this.iframeWrapper=document.createElement("div"),this.$.addClass("tp-iframe-wrapper",this.iframeWrapper),this.$.append(this.iframeWrapper,this.close),this.container.style.zIndex=pn.zIndexes.modal+"",this.close.style.zIndex=pn.zIndexes.close+"",this.$.on(this.close,"click",(function(){"function"==typeof e.closeClick&&e.closeClick()})),this.util.isIOS()&&!this.util.isFBOrInstWebView()&&(this.iframeWrapper.style.marginBottom="".concat(this.iOSBottomToolbarHeight,"px")),this.$.append(this.container,this.iframeWrapper),this._operationWithContainer("body",(function(t){e.$.append(t,e.container)}))),this.container},e.prototype.getContainer=function(e,t){return this._initModalContainer(),this.closeClick=t,void 0===e&&(e=!0),e?this.showCloseButton():this.hideCloseButton(),this.iframeWrapper},e.prototype.show=function(e){this._initModalContainer(),void 0===e&&(e=!0),e?this.showCloseButton():this.hideCloseButton(),this.$.addClass("tp-active",this.container)},e.prototype.hide=function(){this._initModalContainer(),this.$.removeClass("tp-active",this.container)},e.prototype.showCloseButton=function(){this._initModalContainer(),this.$.addClass("tp-active",this.close)},e.prototype.hideCloseButton=function(){this._initModalContainer(),this.$.removeClass("tp-active",this.close)},e}(),M=function(e,t,n){for(var r in o.debug("Search container to close",e,t,n),c){var i=c[r];e&&r!==e||n&&"inline"===i.config.displayMode||n&&i.config.isPreload||("modal"===i.config.displayMode&&N(i),P(i))}l.fireCallbacks("close",null,e,!0)},N=function(e){var t=f.shift();I&&!t&&r.removeClass("tp-active",I),e.iframeParams.shown=!1,r.removeClass("tp-active",e.container),t?(r.hide(n),n=t,r.show(n)):(R(),U())},R=function(){!n||(V("body",(function(e){r.addClass("tp-modal-close",e),r.removeClass("tp-modal-open",e),e.classList.contains("body-fixed")&&r.removeClass("body-fixed",e)})),r.hide(n))},L=function(e,t,i){if(function(){if(I)return I;var e=document.createElement("div");r.addClass("tp-backdrop",e),e.style.zIndex=pn.zIndexes.backdrop+"",V("body",(function(t){r.append(t,e)})),I=e}(),r.visible(I)){var a=r.qa(".tp-modal").find((function(e){return r.visible(e)}));t&&!i?(a&&(r.hide(a),f.unshift(a)),e&&r.show(e)):t&&(a?(e&&f.push(e),n=a):e&&r.show(e))}else r.show(I),e&&function(e){r.visible(e)||(V("body",(function(e){r.removeClass("tp-modal-close",e),r.addClass("tp-modal-open",e)})),r.show(e),(o.isIphone()||o.isSafariOrIOsUiWebView()||o.isAndroid())&&h.modalOpened())}(e),S=window.setTimeout((function(){r.addClass("tp-active",I)}),50)},U=function(){I&&(r.removeClass("tp-active",I),r.hide(I),clearTimeout(S)),h.modalClosed()},j=function(e){I&&(I.style.height="100%");var t=r.queryEl(".tp-close",e);t&&r.removeClass("tp-square",t)},D=function(e,t){if(e){$(e.element,t);var n=Object.assign({},t,{animate:!1});switch(e.config.displayMode){case"modal":$(e.container,n),V("body",(function(e){r.addClass("tp-modal-resizing",e),setTimeout((function(){r.removeClass("tp-modal-resizing",e)}),50)}));break;case"inline":var o=r.queryEl("."+d,e.container);o&&$(o,t)}}},B=function(e,t,o){var i=e.container,a=i.parentElement;a&&a.classList.contains("tp-modal")?n=a:a=n,e.iframeParams=e.iframeParams||{},e.iframeParams.shown||(e.iframeParams.shown=!0,L(a,t,o),o||(i.classList.contains("tp-active")||r.addClass("tp-active",i),j(i)))},F={},V=function e(t,n){var o=r.queryEl(t);F[t]||(F[t]=0),o?(delete F[t],n(o)):F[t]<100&&(F[t]+=1,setTimeout((function(){e(t,n)}),50))},q=function(e,t){if(void 0===e.showCloseButton&&(e.showCloseButton=!0),e.container)return e.container;var i=new O(r,o,V);return e.isPreload||(n=i.element),i.getContainer(e.showCloseButton,t)},z=function(e){var t={container:null,containerReady:!1};if(!e.iframeParams.containerSelector)return o.log("Inline offer must have a valid containerSelector"),t;if(t.container=e.singleContainer||r.queryEl(e.iframeParams.containerSelector),!t.container)return o.log("Invalid containerSelector"),t;var n=e.config,i="object"==_typeof(n)&&null!==n;return r.empty(t.container),i?!!n.preview||(e.iframeParams.width=r.getWidth(t.container)):e.iframeParams.width=e.iframeParams.width||r.getWidth(t.container),t.containerReady=!0,t},G=function(e){var t=r.winSize(),n=e.width?e.width:t.width,i=e.height?e.height:t.height,a=o.centerScreen(n,i);return{width:n,height:i,top:a.top,left:a.left}},H=function(e,t){var n=G(e),r=window.open(t,o.randomString(16),"scrollbars=yes,location=yes,status=0,toolbar=0,resizable=1, width="+n.width+", height="+n.height+", top="+n.top+", left="+n.left);return window.focus&&r&&r.focus(),r},W=1,J=function(e,t,n){var i="iframe-"+W+++"-"+o.randomString();t.iframeId&&(i=t.iframeId);var a=document.createElement("iframe"),s={id:i,name:i,title:i,scrolling:"no",allowtransparency:"true",allow:"payment",allowfullscreen:"true"};(!pn.isSensitiveDataProtectionEnabled||e.isSensitiveDataProtectionDisabled)&&(s.src=n),Object.keys(s).forEach((function(e){r.setAttr(e,s[e],a)}));var c={overflow:"hidden",backgroundColor:"transparent",border:"0",width:"inline"===e.displayMode?t.width+"px":"0px",height:"0px"};Object.keys(c).forEach((function(e){a.style[e]=c[e]}));try{r.setAttr("frameBorder","0",a)}catch(e){o.log(e)}return a},Q=function(e,t){var n=function(e){return r.queryEl("."+d,e.container)?r.getWidth(e.container):0}(e);return!(!n||!t)&&Math.abs(n-t)<.1},X=function(e,t,n){var o=setInterval((function(){r.empty(e)}),150);r.ready((function(){clearInterval(o),r.append(e,t),pn.isSensitiveDataProtectionEnabled&&(r.append(t,n),n.submit())}))},Y=function(){for(var e in c){var t=c[e];if(!t.config.preview&&"inline"===t.config.displayMode&&t.container&&D(t,{width:r.getWidth(t.container)}),"modal"===t.config.displayMode&&t.container){var n=Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.documentElement.offsetWidth);i.send("RESIZE_MODAL_CHECKOUT",{iframe:t,width:n},t.iframeId)}}},$=function(e,t){!e||(void 0!==t.width&&(e.style.width=t.width+"px",(0===t.width&&!e.classList.contains("no-width")||0!==t.width&&e.classList.contains("no-width"))&&r.toggleClass("no-width",e)),void 0!==t.height&&(t.animate,e.style.height=t.height+"px",(0===t.height&&!e.classList.contains("no-height")||0!==t.height&&e.classList.contains("no-height"))&&r.toggleClass("no-height",e)))},K=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},Z=function(e){return void 0===e&&(e=""),'<div class="tp-please-wait tp-active tp-overlap '.concat(e,'"><div class="tp-icon tp-centered"><div class="pn-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div>')},ee=function(){e||(e=K(Z()))&&document.body.appendChild(e)},te=function(){!e||(document.body.removeChild(e),e=null)};function ne(e){if(e&&e.container){!function(e){if(e&&null!=e&&e.container&&!p.has(e.iframeId)){var t=K(Z("tp-local-overlap"));t&&(e.container.appendChild(t),p.set(e.iframeId,t))}}(e);e.container.addEventListener("load",(function(){!function(e){if(e&&null!=e&&e.container&&p.has(e.iframeId)){var t=p.get(e.iframeId);t&&(e.container.removeChild(t),p.delete(e.iframeId))}}(e)}),{once:!0,capture:!0})}}function re(e){!e||!e.element||(function(e){var t;return!!e&&!(null===(t=null==e?void 0:e.element.getBoundingClientRect())||void 0===t||!t.width)}(e)&&ne(e),e.element.src=e.element.src)}function oe(){for(var e in c){var t=c[e];t&&re(t)}}return{name:"containerUtils",fakeOfferId:"fakeOfferId",createContainer:function(e){var t,n,a,p,f={},m=document.createElement("form"),g=!0,v=e.iframeParams;if("inline"!==v.displayMode&&!v.width&&(v.width=window.innerWidth),a=e.config.buildQueryStringFn?function(t){return e.config.buildQueryStringFn(t,r)}:function(e){var t=r.param(e);return t+"&_qh="+s.hash(t,10)},"popup"===v.displayMode){v.width||(v.width=window.innerWidth);var h=e.url+"?"+a(v);n=H(v,h);try{p=n.document}catch(e){try{p=n}catch(e){p=null,console.warn("Unable to get popup element")}}u[v.iframeId]={container:n,interval:setInterval((function(){u[v.iframeId].container.closed&&(clearInterval(u[v.iframeId].interval),u[v.iframeId].container.close(),e.onCloseCallback&&e.onCloseCallback())}),100)}}else{if("inline"===v.displayMode){void 0!==e.config.showCloseButton&&delete e.config.showCloseButton;var y=z(e);n=y.container,g=!!y.containerReady}else n=q(e.config,(function(){M(v.iframeId,e.parent)}));pn.isSensitiveDataProtectionEnabled&&(f={userToken:v.userToken,iframeId:v.iframeId},delete v.userToken),t=e.url+"?"+a(v),p=J(e.config,v,t)}l.registerCallback(e,v.iframeId);var w=c[v.iframeId]={iframeId:v.iframeId,config:e.config,element:p,container:n,iframeParams:v,containerReady:g};if(i.init({postMessageUrl:e.postMessageUrl,parent:e.parent,receive:e.receive,iframe:w,iframeParams:v}),r.on(document,"keyup",(function(e){})),pn.isSensitiveDataProtectionEnabled&&(f.iframeSrc=t,m=T(f)),"modal"===v.displayMode)r.on(window,"resize",(function(){j(n)})),pn.isSensitiveDataProtectionEnabled?(r.append(n,p),r.append(n,m),null==m||m.submit()):r.append(n,p);else if("inline"===v.displayMode){if(c[v.iframeId].containerReady){var b=document.createElement("div");r.addClass(d,b),r.append(b,p),e.config.isPreload&&r.hide(b),("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)&&n?(r.empty(n),r.append(n,b),pn.isSensitiveDataProtectionEnabled&&(r.append(b,m),null==m||m.submit())):X(n,b,m)}else{var _=document.createElement("div");r.setAttr("id","temp-inline-"+v.iframeId,_),r.hide(_),V("body",(function(e){r.append(e,_)})),r.append(_,p)}if(window.ResizeObserver){var k=new ResizeObserver((function(e){var t=r.getWidth(w.container);if(t>0){if("inline"===w.config.displayMode&&Q(w,t))return;D(w,{width:t})}}));k.observe(w.container),w.resizeObserver=k}}return o.debug("creating iframe: ",e),w},showPreloadedContainer:function(e){if("modal"===e.config.displayMode){if(x())return void o.log("Modal is already shown; must be one modal per time");!function(e){(n=e.container.closest(".tp-modal"))||o.error("there is no such modal container"),B(e,!0,!0)}(e)}else"inline"===e.config.displayMode?function(e){r.show(e.container);var t=r.queryEl(".".concat(d),e.container);t&&r.show(t),D(e,{width:r.getWidth(e.container)})}(e):o.log("Unexpected displayMode of preloaded iframe\n");return e.config.isPreload=!1,e.iframeParams.isPreload=!1,o.debug("show preloaded iframe: ",e.config),e},redirectContainer:function(e,t){var n=t.url+"?"+r.param(t.iframeParams),o=c[e];if("popup"===o.config.displayMode)o.container.location=n;else{var a=o.element;(a.contentWindow||a).location=n}o.config=t.config,i.init({postMessageUrl:t.postMessageUrl,receive:t.receive,iframe:c[t.iframeParams.iframeId],iframeParams:t.iframeParams})},hasModalIframe:x,getForm:T,getIframe:A,generateIframe:J,generateIframeWrapper:function(){var e=document.createElement("div"),t={overflow:"hidden",backgroundColor:"transparent",border:"0",width:"0px",height:"0px",position:"absolute",display:"block",top:"-1px",left:"-1px"};return Object.keys(t).forEach((function(n){e.style[n]=t[n]})),e},getPopupPosition:G,generatePopup:H,initInlineContainer:z,getModalContainer:q,centerBackdrop:function(e){if(I){var t=r.winSize();e.offsetHeight>t.height?I.style.height=t.height+"":I.style.height="100%"}},showBackdrop:L,hideBackdrop:U,checkBackdropAndContainer:B,resizeIframe:D,centerIt:j,operationWithContainer:V,closeContainer:M,closeModalContainer:function(e,t){M(e,t,!0)},purgeIframe:function(e,t){o.debug("Purging iframe",e);var n=c[e];try{if(n.resizeObserver&&n.resizeObserver.disconnect(),i.removeIframe(n.iframeId),r.remove(n.element),"inline"===n.config.displayMode){var a=r.queryEl(".tp-container-inner",n.container);a&&r.remove(a)}}catch(e){}delete c[e]},hideModalContainer:function(e){var t=[];for(var n in c){var o=c[n];e&&n!==e||"inline"!==o.config.displayMode&&"modal"===o.config.displayMode&&(N(o),r.hide(o.container),t.push(n))}return t},closeModal:N,hideCloseButton:function(e){if(e){var t=r.queryEl(".tp-close",e);t&&t.classList.contains("tp-active")&&r.removeClass("tp-active",t)}},activateContainers:function(e){if(e&&e.length)for(var t in c)for(var n=c[t],o=0;o<e.length;o++)if(t===e[o]){var i=n.container,a=i.parentElement;a&&L(a),r.addClass("tp-active",i),r.show(i)}},showWaitPanel:ee,hideWaitPanel:te,addClassToContainer:function(e,t){r.addClass(t,e.container)},turnOnRTL:function(e){e.container&&e.container.setAttribute&&e.container.setAttribute("dir","rtl")},turnOffRTL:function(e){e.container&&e.container.removeAttribute&&e.container.removeAttribute("dir")},setIframesPopstateHandlers:function(){!o.isIphone()&&!o.isSafariOrIOsUiWebView()||window.addEventListener("popstate",oe)},__protected__:{setElementSizes:$,closeInlineContainers:function(e){Array.prototype.slice.call(document.querySelectorAll(e+" > ."+d+" > iframe")).forEach((function(e){e.id&&function(e){var t=A(e);t.config.child&&M(t.config.child),M(e)}(e.id)}))},addChildToInlineIframe:function(e,t){if(e){var n=A(t);n&&n.config&&(n.config.child=e.iframeId)}},closeAndRemoveIframe:P},__private__:{mobileModalFix:h}}}();pn.container.register("containerUtils",{useValue:Ct}),pn.containerUtils=pn.container.resolve("containerUtils");var It,St,Et=s(c());!function(e){e.EXTERNAL_LINK="EXTERNAL_LINK",e.EXTERNAL_EVENT="EXTERNAL_EVENT"}(It||(It={})),function(e){e.LOG_MICRO_CONVERSION="logMicroConversion",e.LOG_AUTO_MICRO_CONVERSION="logAutoMicroConversion",e.LOG_CONVERSION="logConversion",e.LOG_FUNNEL_STEP="logFunnelStep",e.LOG_ESP_MICRO_CONVERSION="logEspMicroConversion",e.LOG_BEACON_REQUEST="logBeaconRequest",e.LOG_CUSTOM_FORM_IMPRESSION="logCustomFormImpression",e.LOG_CUSTOM_FORM_SUBMISSION="logCustomFormSubmission"}(St||(St={}));var Pt;pn.container.register("log",{useValue:function(e){void 0===e&&(e=pn.container);var t=e.resolve("ajax"),n=e.resolve("util");e.resolve("postmessage").subscribe("iframeLogRequest",(function(e){o(e.url,e.queryParams)}));var r=function(e){var t=[];for(var n in e){var r=e[n];t.push(encodeURIComponent(n)+"="+encodeURIComponent("object"==_typeof(r)?JSON.stringify(r):r))}return t.join("&")},o=function(e,o){var i=r(o);n.isRelativeUrl(e.trim())?i.length>6e3?t.request({type:"POST",url:pn.getTrackingEndpoint()+e,data:i}):t.request({url:pn.getTrackingEndpoint()+e+"?"+i,dataType:"jsonp"}):n.log("Url parameter is incorrect")},i=function(e){var t=Et.default.isReady?Et.default.get("browserId"):null;return t?C(C({},e),{browser_id:t}):e},a=function(e,t,r){var a=i({tracking_id:e,event_group_id:t,custom_params:r||""});e?t?o("/api/v3/conversion/logMicroConversion",a):n.log("Parameter eventGroupId is required to log micro conversion."):n.log("Parameter trackingId is required to log micro conversion.")},s=function(e,t,r,a){var s=i({tracking_id:e,event_type:r,event_group_id:t,custom_params:a||""});e?t?o("/api/v3/conversion/logAutoMicroConversion",s):n.log("Parameter eventGroupId is required to log auto micro conversion."):n.log("Parameter trackingId is required to log auto micro conversion.")},c=function(e,t,r,a,s){var c=i({tracking_id:e,esp_widget_id:t,event_type:a,event_group_id:r,custom_params:s||""});e?r?t?o("/api/v3/conversion/logEspMicroConversion",c):n.log("Parameter espWidgetId is required to log esp micro conversion."):n.log("Parameter eventGroupId is required to log esp micro conversion."):n.log("Parameter trackingId is required to log esp micro conversion.")},u=function(e,t,r,a,s,c,u,l){var d=i({tracking_id:e,term_id:t,term_name:r});e?t?r?(void 0!==a&&(d.step_number=a),void 0!==s&&(d.amount=s),void 0!==c&&(d.currency=c),void 0!==u&&(d.custom_params=u),void 0!==l&&(d.conversion_category=l),o("/api/v3/conversion/log",d)):n.log("Parameter termName is required to log conversion."):n.log("Parameter termId is required to log conversion."):n.log("Parameter trackingId is required to log conversion.")},l=function(e,t,n,r,o,i,a,s){if("object"==_typeof(e)){var c=e;u(c.tracking_id,c.term_id,c.term_name,c.step_number,c.amount,c.currency,c.custom_params,c.conversion_category)}else u(e,t,n,r,o,i,a,s)},d=function(e,t,r,a){var s=i({tracking_id:e,step_number:t,step_name:r,custom_params:a||""});e?t?r?o("/api/v3/conversion/logFunnelStep",s):n.log("Parameter stepName is required to log funnel step."):n.log("Parameter stepNumber is required to log funnel step."):n.log("Parameter trackingId is required to log funnel step.")},p=function(e,t,r){t||n.log("Parameter formName is required to log impression."),r||n.log("Parameter source is required to log impression.");var i={aid:pn.aid,pageview_id:pn.main.fetchPageViewId(),custom_form_name:t,custom_form_source:r},a=pn.user.getProvider().getToken();return a&&(i.user_token=a),e&&(i.tracking_id=e),o("/api/v3/customform/log/impression",i)},f=function(e,t,r){t||n.log("Parameter formName is required to log submission."),r||n.log("Parameter source is required to log submission.");var i={aid:pn.aid,pageview_id:pn.main.fetchPageViewId(),custom_form_name:t,custom_form_source:r},a=pn.user.getProvider().getToken();return a&&(i.user_token=a),e&&(i.tracking_id=e),o("/api/v3/customform/log/submission",i)},m=function(e,o){if(!function(){var e=window.doNotTrack||window.navigator.doNotTrack||window.navigator.msDoNotTrack;return!!e&&("1"===e.charAt(0)||"yes"===e)}()){var i,a=r(o),s=e+"?"+a;if(navigator.sendBeacon)if(s.length>6e3){var c=new Blob([a],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(e,c)}else navigator.sendBeacon(s);else(i=-1!==navigator.appVersion.indexOf("MSIE 9")?{dataType:"jsonp",url:s}:{type:"post",url:s,async:!1,xhrFields:{withCredentials:!0}}).error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.debug.apply(n,O(["Beacon request has been failed"],e,!1))},t.request(i)}};return{name:"log",logMicroConversion:a,logConversion:l,logFunnelStep:d,logEspMicroConversion:c,logBeaconRequest:m,logAutoMicroConversion:s,__protected__:{handleEvent:function(e,t){var n=t.trackingId,r=t.termId,o=t.termName,i=t.stepNumber,u=t.stepName,g=t.amount,v=t.currency,h=t.customParams,y=t.conversionCategory,w=t.eventGroupId,b=t.eventType,_=t.url,k=t.params,C=t.formName,I=t.source,S=t.espWidgetId;switch(e){case St.LOG_CONVERSION:return void l(n,r,o,i,g,v,h,y);case St.LOG_AUTO_MICRO_CONVERSION:return void s(n,w,b,h);case St.LOG_BEACON_REQUEST:return void m(_,k);case St.LOG_CUSTOM_FORM_IMPRESSION:return void p(n,C,I);case St.LOG_CUSTOM_FORM_SUBMISSION:return void f(n,C,I);case St.LOG_ESP_MICRO_CONVERSION:return void c(n,S,w,b,h);case St.LOG_FUNNEL_STEP:return void d(n,i,u,h);case St.LOG_MICRO_CONVERSION:return void a(n,w,h)}},logCustomFormImpression:p,logCustomFormSubmission:f,logEspMicroConversion:c,logAutoMicroConversion:s},__private__:{doLog:o,logBeaconRequest:m}}}()}),pn.log=pn.container.resolve("log"),function(e){e.TRACK_EVENT="track",e.TRACK_CUSTOM_EVENT="trackCustom"}(Pt||(Pt={}));var xt,Tt=function(){var e=pn.container.resolve("util"),t=!1,n=function(n,r,o){t?(o||(o={}),e.log("fbpixel: Track Facebook Pixel event",r,o),window.fbq(n,r,o)):e.log("fbpixel: Skip tracking event - Facebook Pixel is not initalized",r,o)},r=function(){return t};return{name:"fbpixel",isInitialized:r,__private__:{isInitialized:r},__protected__:{init:function(){if(!t){var n=pn.getFbPixelId();if(!n)return void e.error("fbpixel: Facebook Pixel ID is not defined");e.log("fbpixel: Initialize Facebook Pixel tracking",n),function(e,t,n,r,o,i,a){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(i=t.createElement(n)).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,a))}(window,document,"script"),window.fbq("set","autoConfig","false",n),window.fbq("init",n),t=!0}},handleEvent:function(e,t){var r=t.eventName,o=t.eventParams;switch(e){case Pt.TRACK_EVENT:return void n(Pt.TRACK_EVENT,r,o);case Pt.TRACK_CUSTOM_EVENT:return void n(Pt.TRACK_CUSTOM_EVENT,r,o)}}}}}();pn.container.register("fbpixel",{useValue:Tt}),pn.fbpixel=pn.container.resolve("fbpixel"),function(e){e.EMIT_GA_EVENT="emitGAEvent",e.EMIT_METRICS_EVENT="emitMetricsEvent"}(xt||(xt={}));var At=function(){var e,t=pn.container.resolve("util"),n=pn.container.resolve("api"),r=pn.container.resolve("postmessage"),o="pianoTracker",i="performanceTracker",a="gaAccount",s="metricsGAAccount",c="trackOnlyAids",u="disabled",l={gaAccount:void 0,trackerName:o,trackOnlyAids:[],metricsGAAccount:void 0,isGAEnabled:!1,isGAAppended:!1,isMetricsEnabled:!1,isTrackerAppended:!1,isMetricsTrackerAppended:!1},d=[],p=!1,f=!0,m=!1,g=!1,v=[],h=function(e){if(e.hitType="timing",!l.isMetricsTrackerAppended)return k("send",e),void function(){if(!g){if(g=!0,E(),!l.metricsGAAccount)return void new Promise((function(e,t){n.callApi("/anon/assets/performanceMetrics",null,(function(n){0===n.code?(x(n.performance_metrics_dto),e(null)):t()}))})).then((function(){return A()})).catch((function(e){t.error("PN catch: something vent wrong with GA injection: ".concat(e))}));A().catch((function(e){t.error("PN catch: something vent wrong with GA injection: ".concat(e))}))}}();if(l.isMetricsEnabled){if(!window.ga||!l.isMetricsTrackerAppended)return void k("send",e);v.length&&C(),S("send",e)}};function y(){m||(f?setTimeout((function(){f=!1,w()}),3e3):w())}function w(){m=!0,E(),l.gaAccount?T().catch((function(){})):new Promise((function(e,t){n.callApi("/anon/assets/gaAccount",{aid:tp.aid},(function(n){0===n.code?(P(n.data),e(null)):t()}))})).then((function(){return T()})).catch((function(){}))}var b=function(e,t){d.push({action:e,params:t})},_=function(){if(window.ga&&l.isTrackerAppended)for(;d.length;){var e=d.pop();I(e.action,e.params)}},k=function(e,t){v.push({action:e,params:t})},C=function(){if(window.ga&&l.isMetricsTrackerAppended)for(;v.length;){var e=v.pop();S(e.action,e.params)}},I=function(e,t){window.ga&&l.isTrackerAppended?window.ga(l.trackerName+"."+e,t):b(e,t)},S=function(e,t){if(l.isMetricsEnabled){if(!window.ga||!l.isMetricsTrackerAppended)return void k(e,t);window.ga(i+"."+e,t)}},E=function(){if(!p){if(tp.gaClientId&&(e=tp.gaClientId),t.__protected__.hasLocalStorage()){var n=t.__protected__.getLocalStorageItem(a),r=t.__protected__.getLocalStorageItem(s),o=t.__protected__.getLocalStorageItem(c);l.isGAEnabled=!!n&&n!==u,l.isMetricsEnabled=!!r&&r!==u,l.gaAccount=n,l.metricsGAAccount=r,l.trackOnlyAids=o||[]}p=!0}};var P=function(e){l.isGAEnabled=!!e,l.gaAccount=e||u,t.__protected__.setLocalStorageItem("vx",a,l.gaAccount,1)},x=function(e){l.isMetricsEnabled=JSON.parse(e.is_enabled),l.metricsGAAccount=l.isMetricsEnabled?e.ga_account:u,l.trackOnlyAids=l.isMetricsEnabled?JSON.parse(e.track_only_aids):[],t.__protected__.setLocalStorageItem("vx",c,l.trackOnlyAids,1),t.__protected__.setLocalStorageItem("vx",s,l.metricsGAAccount,1)};function T(){return new Promise((function(t,n){l.isGAEnabled?O().then((function(){if(l.isGAAppended)if(l.isTrackerAppended)t(null);else try{var r=document.createElement("script");r.innerHTML=function(){var t=new RegExp("^UA-[0-9a-zA-Z]*-[0-9a-zA-Z]*$").test(l.gaAccount),n=new RegExp("([{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?)|([0-9]*\\.[0-9]*)").test(e||"");if(!t)return"";var r="ga(function() {\n        ga('create', '".concat(l.gaAccount,"', 'auto', '").concat(o,"'");return r+=e&&n?", { clientId: '".concat(e,"' });"):");\n        tp.gaService.setClientId(ga.getByName('".concat(o,"').get('clientId'));"),r+"tp.gaService.trackerAppended(); });"}(),document.head.appendChild(r),l.isTrackerAppended=!0,t(null)}catch(e){n()}else n()})).catch((function(e){})):n()}))}function A(){return new Promise((function(e,t){l.isMetricsEnabled?O().then((function(){if(l.isGAAppended)if(l.isMetricsTrackerAppended)e(null);else try{var n=!l.trackOnlyAids.length||l.trackOnlyAids.contains(tp.aid),r=document.createElement("script");if(!new RegExp("^UA-[0-9a-zA-Z]*-[0-9a-zA-Z]*$").test(l.metricsGAAccount))return void t();r.innerHTML="\n                  ga(function() {\n                    if (".concat(n,") {\n                      ga('create', '").concat(l.metricsGAAccount,"', 'auto', '").concat(i,"', { storage: 'none' });\n                      tp.gaService.metricsTrackerAppended();\n                    }\n                  });\n                  "),document.head.appendChild(r),l.isMetricsTrackerAppended=!0,e(null)}catch(e){t()}else t()})):e("isMetricsEnabled !== true")}))}function O(){return new Promise((function(e,t){if(l.isGAAppended)e(null);else try{var n=document.createElement("script");n.innerHTML="\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n          ",document.head.appendChild(n),l.isGAAppended=!0,e(null)}catch(e){t()}}))}return{name:"gaService",getClientId:function(){return e},getGAAccount:function(){return l.gaAccount},metricsTrackerAppended:function(){l.isMetricsTrackerAppended=!0,g=!1,C()},recreateWithClientId:function(t){e=t,y()},setClientId:function(t){e=t},setTrackerName:function(e){l.trackerName=e},trackerAppended:function(){l.isTrackerAppended=!0,r.broadcast("gaAppended",{clientId:e,gaAccount:l.gaAccount}),m=!1,_()},__protected__:{handleEvent:function(e,t){switch(e){case xt.EMIT_GA_EVENT:return void function(e){if(e.hitType="event",!l.isTrackerAppended)return b("send",e),void y();if(l.isGAEnabled){if(!window.ga||!l.isTrackerAppended)return void b("send",e);d.length&&_(),I("send",e)}}(t);case xt.EMIT_METRICS_EVENT:return void h(t)}}}}}();pn.container.register("gaService",{useValue:At}),pn.gaService=pn.container.resolve("gaService");var Ot=function(){var e,t={measurementId:""},n=[],r=function(){var n;e||!t.measurementId||((n=document.createElement("script")).async=!0,n.src="https://www.googletagmanager.com/gtag/js?id=".concat(t.measurementId),document.head.appendChild(n),document.head.appendChild(function(e){var t=document.createElement("script");return t.innerHTML="window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n"+"  if ('".concat(e,"') { gtag('config', '").concat(e,"'); }\n")+"  tp.ga4Service.setTagLoaded();",t}(t.measurementId)))},o=function(e){window.gtag("event",e.name,C({send_to:e.sendTo},e.params))};return{name:"ga4Service",getMeasurementId:function(){return t.measurementId},appendGoogleTag:r,sendCustomEvent:o,setGa4Config:function(e){t=e,r()},setTagLoaded:function(){e=!0},__protected__:{handleEvent:function(e,r){if(e===xt.EMIT_GA_EVENT){var i=function(e,n){return{name:n.eventCategory,sendTo:t.measurementId||xt.EMIT_GA_EVENT,params:n}}(0,r);if(window.gtag&&i.sendTo)return o(i),n.forEach((function(e){e.sendTo===xt.EMIT_GA_EVENT&&(e.sendTo=t.measurementId),o(e)})),void(n=[]);!function(e){n.push(e)}(i)}}}}}();pn.container.register("ga4Service",{useValue:Ot}),pn.ga4Service=pn.container.resolve("ga4Service");pn.container.register("analytics",{useValue:function(e){void 0===e&&(e=pn.container);var t,n,r=e.resolve("gaService"),o=e.resolve("ga4Service"),i=e.resolve("fbpixel"),a=e.resolve("log"),s=function(e){return e||function(){}},c=function(e){return{initialize:s(e.__protected__.init),event:function(t){var n=t.eventType,r=t.payload;return e.__protected__.handleEvent(n,r)}}};return{name:"analytics",ga:(t=r,n=o,{initialize:function(){},event:function(e){var r=e.eventType,o=e.payload;t.__protected__.handleEvent(r,o),n.__protected__.handleEvent(r,o)}}),fbpixel:c(i),log:c(a)}}()}),pn.analytics=pn.container.resolve("analytics");var Mt=function(){var e=pn.container.resolve("api"),t=pn.container.resolve("analytics"),n={completeInit:0,expExec:0,idShow:0,myAccountShow:0,offerShow:0,templateShow:0,tpAccShow:0,track:0};setTimeout((function(){r()}),1e4);var r=function(r){if(Math.floor(500*Math.random())+1===255){var o=r||(pn.fullTPVersion?"ts_c":"ts_s"),i={completeInit:n.completeInit,track:n.track,expExec:n.expExec,idShow:n.idShow,myAccountShow:n.myAccountShow,offerShow:n.offerShow,templateShow:n.templateShow,tpAccShow:n.tpAccShow,aid:pn.aid,type:o};t.log.event({eventType:St.LOG_BEACON_REQUEST,payload:{url:e.getEndpoint()+"/internal/anon/telemetry/ux/init/time/log",params:i}})}};return{name:"logging",setTime:function(e){0===n[e]&&(n[e]=Math.round(performance.now()-window.pnInitPerformance))}}}();pn.container.register("logging",{useValue:Mt}),pn.logging=pn.container.resolve("logging");var Nt,Rt="/execution/credit",Lt="".concat(Rt,"/redeem"),Ut="".concat(Rt,"/check");!function(e){e.AUTO="A",e.MANUAL="M"}(Nt||(Nt={}));var jt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("ajax"),n=pn.container.resolve("jqUtils"),r=pn.container.resolve("eventUtils"),o=function(e){return Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return(r||0===r)&&(e[n]=r),e}),{})},i=r.createEventManager([]),a=function(){return e.__protected__.getCookie("xbc")||void 0},s=function(r,i,s){return new Promise((function(c,u){var l=s?"?"+n.param(s):"",d=function(){var e=pn.getExperienceEndpoint(!1);return"".concat(e,"/").concat(pn.aid)}()+r+l,p=o({xbc:a(),tbc:e.getTbcCookie()||void 0}),f=o(C(C({},p),i));if(!(f.cid&&f.itemId&&f.xbc)){var m="credit: Error: Required params are absent";e.debug(m),u({code:0,message:m})}t.request({type:"post",url:d,data:C(C({},p),i),xhrFields:{withCredentials:!0},error:function(t){var n="credit: Error: Received error:".concat(t.status," ").concat(t.responseText);e.debug(n),u({code:t.status,message:t.responseText})},success:function(e){c(e)}})}))},c=function(e,t,n,r){var o=function(e){return function(t){return i.fire(void 0,e,!0,t),t}},a=o("string"==typeof e?e:e.success),c=o("string"==typeof e?e:e.failure);return s(t,n,r).then(a).catch(c)};return{redeem:function(t){return c("manualCreditRedeemed",Lt,t).then((function(t){var n=t.xbc;n&&n!==a()&&e.setXbcCookieFromResponse({xbc:n})}))},check:function(e){return c("creditChecked",Ut,e)},registerCallback:function(e,t){i.addEvent(e),i.registerCallback(e,t)}}}();pn.container.register("credit",{useValue:jt}),pn.credit=pn.container.resolve("credit");var Dt=function(){var e,t=pn.container.resolve("postmessage"),n=pn.container.resolve("containerUtils"),r=pn.container.resolve("util"),o=pn.container.resolve("eventUtils"),i=pn.container.resolve("logging"),a=o.createEventManager(["resize","loginSuccess","logout"]),s=function(){return pn.getEndpointRoot(!0)+"/checkout/user/loginShow"};function c(o){r.debug("Login event received",o.event,o.params,o);var i=!n.getIframe(o.sender).config.parent;switch(o.event){case"loaded":e=!1,!0;break;case"close":n.closeModalContainer(),a.fireCallbacks(o.event,o.params,o.sender,i);break;case"cancel":case"error":case"customEvent":a.fireCallbacks(o.event,o.params,o.sender,i);break;case"loginSuccess":!function(e,t,o,i){var s=n.getIframe(o);r.setAccessTokenListCookie({value:t.token_list,cookie_domain:t.cookie_domain},t.user_token),s.config.userToken=t.user_token,s&&s.config&&s.config.loginSuccess&&s.config.loginSuccess(t.event,t.params,t.sender),a.fireCallbacks(e,t,o,i),s&&s.config&&s.config.closeAfterSuccess&&n.closeModalContainer(o);var c={reloadAfterLogin:!0,userToken:t.user_token,user:t.user};u(c)}(o.event,o.params,o.sender,i);break;case"logoutSuccess":!function(e,t,n,o){a.fireCallbacks("logout",null,void 0,!0),r.setAccessTokenListCookie({value:t.token_list,cookie_domain:t.cookie_domain},t.user_token,!0)}(o.event,o.params,o.sender);break;case"readyToSubmitStats":var s={pageViewId:pn.main.fetchPageViewId(),tbc:r.getTbcCookie()};t.send("submitStats",s,o.sender);break;default:return void r.debug("Received invalid event type: "+o.event)}}var u=function(e){t.broadcast("reloadOffer",e)};var l;function d(e){l&&n.closeModalContainer(l);var t={};Object.assign(t,{closeAfterSuccess:!0},e),t.displayMode="popup",t.width=360,t.height=660,t.state=t.state?t.state:"login";var o=function(e){var t={};return["displayMode","aid","width","height","state"].forEach((function(n){e[n]&&(t[n]=e[n])})),t}(t);o.iframeId=r.randomString(16),o.url=window.location.href,o.host_url=window.location.href,l=o.iframeId,function(e){["aid","gaClientId","tags","contentSection","contentAuthor"].forEach((function(t){pn[t]&&(e[t]=pn[t])})),pn.contentCreated&&(e.contentCreated=pn.contentCreated)}(o),o.user_provider="tinypass_accounts",e.userToken&&(o.user_token=e.userToken),r.getCampaigns(o);var i,u={url:s(),config:t,postMessageUrl:s(),receive:c,iframeParams:o};return t.iframeId?(u.iframeParams.iframeId=t.iframeId,i=n.redirectContainer(t.iframeId,u)):i=n.createContainer(u),a.registerCallback(t,o.iframeId),i}return{name:"tinypassLogin",show:function(t){if(e)return!1;e=!0,setTimeout((function(){e=!1}),1e4),d(t)||r.error("Could not initialize login; check configuration"),i.setTime("tpAccShow")},close:function(){n.closeModalContainer()},showBackdrop:function(){n.showBackdrop()},hideBackdrop:function(){n.hideBackdrop()},centerBackdrop:function(e){n.centerBackdrop(e)},registerCallback:function(e,t){a.registerCallback(e,t)},listenLogin:function(e){!function(e){a.registerCallback(e,e.iframeId);var n={iframeId:e.iframeId,config:e,iframeParams:e};t.init({postMessageUrl:s(),receive:c,iframe:n,iframeParams:{}})}(e)}}}();pn.container.register("tinypassLogin",{useValue:Dt}),pn.tinypassLogin=pn.container.resolve("tinypassLogin");var Bt=function(){var e=pn.container.resolve("ajax"),t=pn.container.resolve("jqUtils"),n=pn.container.resolve("util"),r=pn.container.resolve("tinypassLogin"),o=pn.container.resolve("eventUtils").createEventManager(["logout"]),i=function(){return n.getUserTokenCookie()||null};return{name:"tinypassAccounts",isv:!1,isUserValid:function(){return!!n.getUserTokenCookie()},getToken:i,getName:function(){return"tinypass_accounts"},onLoginSuccess:function(e){n.setAccessTokenListCookie({value:e.token_list,cookie_domain:e.cookie_domain},e.user_token)},isConfigured:function(){return!0===pn.useTinypassAccounts||"string"==typeof pn.useTinypassAccounts&&"true"===pn.useTinypassAccounts},login:function(e){return(e=e||{}).userToken=i(),r.show(e)},logout:function(r){var i={aid:pn.aid,url:document.location.href},a=pn.getEndpointRoot(!0)+"/checkout/user/logout?"+t.param(i);n.setAccessTokenListCookie({value:null},void 0,!0),e.request({url:a,dataType:"jsonp",success:function(e){n.setAccessTokenListCookie({value:"",cookie_domain:e.models.cookie_domain},e.models.user_token,!0),o.fireCallbacks("logout",null,void 0,!0),r&&r(e)},error:function(e){n.setAccessTokenListCookie(null,void 0,!0),o.fireCallbacks("logout",null,void 0,!0),r&&r(e)}})},registerCallback:function(e,t){o.addEvent(e),o.registerCallback(e,t)}}}();pn.container.register("tinypassAccounts",{useValue:Bt}),pn.tinypassAccounts=pn.container.resolve("tinypassAccounts");var Ft=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("cookie"),n=pn.container.resolve("util"),r=pn.container.resolve("eventUtils").createEventManager(["logout"]);return{isv:!1,name:"condeUserProvider",getName:function(){return"conde"},isUserValid:function(){return!!n.getUserTokenCookie()},getToken:function(){var e=n.findCookieByName("amg_user_partner");return void 0!==e&&e&&e.length>=0?e:null},onLoginSuccess:function(r){n.setAccessTokenListCookie({value:r.token_list,cookie_domain:r.cookie_domain},r.user_token);var o={path:"/",expires:730};r.cookie_domain&&"localhost"!==r.cookie_domain&&e.inArray(r.cookie_domain,n.getPossibleCookieDomains())>=0&&(o.domain=r.cookie_domain),t.raw=!0,n.__protected__.setCookie(r.params.cookieName,r.params.cookieValue,o),n.__protected__.setCookie("amg_user_partner",r.params.externalId,o),n.__protected__.setCookie("amg_user_info",r.params.userName,o),n.__protected__.setCookie("amg_user_ext",r.params.siteUserId,o),r.params.updateToken&&n.__protected__.setCookie("amg_user_update",r.params.updateToken,o),t.raw=!1},logout:function(e){n.setAccessTokenListCookie({value:null},void 0,!0);var t=n.getPossibleCookieDomains();for(var o in t)n.deleteCookie("amg_user",t[o]),n.deleteCookie("amg_user_partner",t[o]),n.deleteCookie("amg_user_info",t[o]),n.deleteCookie("amg_user_ext",t[o]),n.deleteCookie("amg_user_update",t[o]);n.deleteCookie("amg_user"),n.deleteCookie("amg_user_partner"),n.deleteCookie("amg_user_info"),n.deleteCookie("amg_user_ext"),n.deleteCookie("amg_user_update"),r.fireCallbacks("logout",null,void 0,!0),e&&e()},isConfigured:function(){return!0===pn.useCondeUserProvider||"string"==typeof pn.useCondeUserProvider&&"true"===pn.useCondeUserProvider},registerCallback:function(e,t){r.addEvent(e),r.registerCallback(e,t)}}}();pn.container.register("condeUserProvider",{useValue:Ft}),pn.condeUserProvider=pn.container.resolve("condeUserProvider");var Vt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("api"),n=pn.container.resolve("eventUtils"),r=pn.container.resolve("jqUtils"),o=!1;var i=n.createEventManager(["userChanged","onHide","logout"]),a={apiKey:null,screenSet:"Default-RegistrationLogin",startScreen:null,enabledProviders:null,lang:null};function s(){var t=e.getUserTokenCookie();if(t&&e.findCookieByName("glt_"+a.apiKey)===e.findCookieByName("__utg_"+a.apiKey))return t;return null}function c(){var e=s();return!!(void 0!==e&&e&&e.length>=0)}var u=[];function l(n,s){if(!o)throw"Gigya is not configured";p();var l=e.findCookieByName("glt_"+a.apiKey),d=e.findCookieByName("__utg_"+a.apiKey);(l!==d||l&&l===d&&!c()||n)&&(u.push(s),1===u.length&&window.gigya.accounts.getAccountInfo({callback:function(n){if(0===n.errorCode){var o={uid:n.UID,signature:n.UIDSignature,signature_timestamp:n.signatureTimestamp,url:e.prepareUrlParameter(window.location.href)};e.startCall("refreshUserToken"),t.callApi("/anon/gigya/verifyAccountInfo",o,(function(t){if(t&&t.result){e.setAccessTokenListCookie(t.result.access_token,t.result.user_token);var n={path:"/",expires:730};if(t.result.access_token){var o=t.result.access_token.cookie_domain;o&&"localhost"!==o&&r.inArray(o,e.getPossibleCookieDomains())>=0&&(n.domain=o)}var s=e.findCookieByName("glt_"+a.apiKey);e.__protected__.setCookieConsent("vx","__utg_"+a.apiKey,s,n);for(var c=0;c<u.length;c++){var l=u[c];l&&l(t.result)}t.result.user&&(t.result.user={uid:t.result.user.uid,email:t.result.user.email,firstName:t.result.user.first_name,lastName:t.result.user.last_name,valid:t.result.user.valid}),i.fireCallbacks("userChanged",t.result,void 0,!0)}else e.log("Can't verify gigya user: may be the configuration of gigya user provider is invalid"),e.setAccessTokenListCookie();u=[],e.doneCall("refreshUserToken")}))}else e.setAccessTokenListCookie(),u=[]}}))}var d=!1;function p(){if(!window.gigya||!window.gigya.__initialized)throw"Gigya is not initialized"}return{isv:!1,name:"gigya",init:function(t){if(!o){for(var n in t)void 0!==t[n]&&(a[n]=t[n]);if(!a.screenSet)throw"Gigya is not configured: screenSet parameter required";if(!a.apiKey)throw"Gigya is not configured: apiKey parameter required";p(),window.gigya.accounts.addEventHandlers({onLogin:function(){d=!0,l()},onLogout:function(){e.setAccessTokenListCookie({value:null},void 0,!0),i.fireCallbacks("logout",null,void 0,!0)}}),o=!0,l()}},isUserValid:c,getToken:s,getName:function(){return"gigya"},onLoginSuccess:function(t){e.setAccessTokenListCookie({value:t.token_list,cookie_domain:t.cookie_domain},t.user_token)},login:function(e){if(!o)throw"Gigya is not configured";p(),e&&window.gigya.accounts.addEventHandlers({onLogin:function(){l(!0,e)}});var t={screenSet:a.screenSet,onHide:function(){i.fireCallbacks("onHide",{afterLogin:d},void 0,!0)}},n=["apiKey","screenSet"];for(var r in a){r in n||(t[r]=a[r])}d=!1,window.gigya.accounts.showScreenSet(t)},logout:function(t){if(!o)throw"Gigya is not configured";p(),window.gigya.accounts.logout({callback:function(){i.fireCallbacks("logout",null,void 0,!0),t&&t(),e.setAccessTokenListCookie({value:null},void 0,!0)}}),e.setAccessTokenListCookie({value:null},void 0,!0)},isConfigured:function(){return!0===pn.useGigyaUserProvider||"string"==typeof pn.useGigyaUserProvider&&"true"===pn.useGigyaUserProvider},registerCallback:function(e,t){i.addEvent(e),i.registerCallback(e,(function(e){return t(e)}))},loginByPasswordless:function(t){if(!t)throw"Session info is empty";var n=t.accessTokenName,r=t.accessToken;e.__protected__.setCookie(n,r);var o="glt_"+a.apiKey;e.__protected__.setCookieConsent("vx",o,r),l(!0)}}}();pn.container.register("gigya",{useValue:Vt}),pn.gigya=pn.container.resolve("gigya");var qt=function(){var e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.construct=function(e){this.message=e,this.name="InvalidCharacterError"},t}(Error);function t(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,s="";o=n.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s}try{var n=window.atob&&window.atob.bind(window)||t}catch(e){n=t}var r=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(n(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return n(t)}};return function(e,t){if("string"!=typeof e)throw new Error("Invalid token specified");var n=!0===(t=t||{}).header?0:1;return JSON.parse(r(e.split(".")[n]))}}();pn.jwtDecode=qt,pn.container.register("jwtDecode",{useValue:qt});pn.container.register("pianoId",{useValue:function(e){void 0===e&&(e=pn.container);var t,n,r,o,i,a,s=e.resolve("cookie"),c=e.resolve("jqUtils"),u=e.resolve("ajax"),l=e.resolve("jwtDecode"),d=e.resolve("util"),p=e.resolve("containerUtils"),f=e.resolve("postmessage"),m=e.resolve("observer"),g=e.resolve("gaService"),v=e.resolve("api"),h=e.resolve("logging"),y=e.resolve("localStorage"),w=e.resolve("consent"),b=e.resolve("analytics"),_="gm_sso_redirect",k="token",I="term_id",S="offer_id",x="form_name",T="remember",A="reset_token",O="verification_code",M="piano_social_token",N=d.getAidSpecifiedName("__utp"),R="__pil",L="__pid",U="__idr",j="__eea",D="PIANOID",B="show_form",F="registration",V="checkout",q=3e3,z="pnid-tc-string",G=["he_IL","ar_EG"],H={},W=[],J={},Q={loggedIn:[],loggedOut:[],loginSuccess:[],registrationSuccess:[],profileUpdate:[],langChange:[],fire_loginSuccess:[],loginDisplayed:[],registerDisplayed:[],loginFailed:[],registrationFailed:[],onShow:[],layoutReady:[]},X={},Y={},$=[],K=!1,Z={};c.on(window,"resize",(function(){return ee()}));var ee=function(e){W.filter((function(e){return"inline"===e.config.displayMode})).filter((function(t){return!e||e.some((function(e){return t.container===e}))})).forEach((function(e){var t=c.getWidth(e.container);p.resizeIframe(e,{width:t}),f.send("resize",{width:t},e.iframeId)}))},te=function(e,t){var n=l(e);n.rememberMe=!!t,He({user:n,token:e})},ne=function(e){if(r&&!e)return r;var t;H=Object.assign(H,e),Se(e),Object.keys(Q).forEach((function(e){!!H[e]&&delete H[e]})),r=new Promise((function(e){t=e})),_t()||pn.setUsePianoIdUserProvider(!0);var n=d.getQueryParamByName(A);if(void 0===H.resetPasswordToken&&n&&(H.resetPasswordToken=n),d.getQueryParamByName(_)){var o=d.getQueryParamByName(I),i=d.getQueryParamByName(S),a=d.getQueryParamByName(x);o&&i&&(Z.termId=o,Z.offerId=i),a&&(Z.formName=a),function(){var e=d.getQueryParamByName(k),t=!!d.getQueryParamByName(T);d.removeQueryParamByName([_,k,T,I,S,x]),te(e,t)}(),function(){var e=$e(),t=l(e);e&&t.email_confirmation_required&&(Z.emailConfirmationRequired=t.email_confirmation_required)}()}var s=d.getQueryParamByName("passwordless_token");void 0===H.passwordlessToken&&s&&(H.passwordlessToken=s);var c=d.getQueryParamByName(O);void 0===H.verification_code&&c&&(H.verification_code=c);var u=d.getQueryParamByName(M);return u&&(d.removeQueryParamByName(M),Ze()||(pn.inappBrowserReturn=!0,te(u,!0))),setTimeout((function(){return t()}),50),r},re=function(e,t){if(n&&!e)return n;var r;n=new Promise((function(e){r=e}));var o=function(){d.doneCall("refreshUserToken"),n=null,r()};return e&&e.preview?(setTimeout((function(){return r()}),10),n):(d.startCall("refreshUserToken"),ne(e).then((function(){return H.passwordlessToken?ue():t?Promise.resolve():ot()})).then(o,o),n)},oe=function(e){var n=!Ze(),r=It();re().then((function(){var o,i=Object.assign({},H,e,{isRegistration:!0,isSensitiveDataProtectionDisabled:!0});if(r&&(i.sss=Tt()),K)vt(i)?ht(i):tt(i);else if(It()&&"redirect"===(null===(o=i.sss)||void 0===o?void 0:o.sss_mode))yt(i);else{var s=!(null==a||!a.access_token)||Ze();if(s)ye(i,{emitGlobalLoginSuccessEvent:n&&s});else t?d.log("Modal login window already shown"):(Ee(i),qe(i));h.setTime("idShow")}}))},ie=function(){var e="email_is_not_confirmed",t=Ye();if(t){var n=d.getQueryParamByName(e);if(n)d.removeQueryParamByName(e),se({screen:"registration"===n?"email_is_not_confirmed":"email_confirmation_required",email:null==t?void 0:t.email})}},ae=function(e){t?d.log("Modal window already shown"):re().then((function(){var t=Object.assign({screen:"email_confirmation_required"},H,e);Ee(t),qe(t)}))},se=function(e){if(t)d.log("Modal window already shown");else{e||(e={});var n=Object.assign({},e,H);e.customEvents&&"object"==_typeof(e.customEvents)&&(X=e.customEvents),Ee(n),qe(n)}},ce=function(e){re().then((function(){var n=Object.assign({},H,e,{isRegistration:!1});if(!n.formName)throw new Error('Form name should be specified, like\ntp.pianosId.showForm({formName: "..."});');var r=function(){if(t)d.log("Modal login window already shown");else{if(Ee(n),!n.preview&&o)return void d.log("Skip show form, register new user");if(!n.hideIfComplete)return Object.assign(n,{readyCallback:function(e){f.send("setToken",$e(),e.iframeId)}}),qe(n);gt(n).then((function(e){if(e&&e.has_all_custom_field_values_filled&&n.hideIfComplete)d.log("Skip show form, all fields are completed");else{var t=Object.assign({},n,{readyCallback:function(t){f.send("userData",e,t.iframeId)}});qe(t)}}))}};if(e.preview||Ze())r();else{var i=Object.assign({},e,{closedCallback:function(){Ze()&&r()}});oe(i)}}))},ue=function(){return new Promise((function(e,t){var n={aid:H.aid||pn.aid,passwordless_token:H.passwordlessToken,lang:pt()};u.request({url:"".concat(De(),"/passwordless/authorization/code?").concat(c.param(n)),type:"POST",success:function(t){le(t),e(null)},error:function(e){var n=e.response,r=JSON.parse(n).error_code_list;de(r),t()}})}))},le=function(e){return E(void 0,void 0,void 0,(function(){var t,n,r,o,i,a,s;return P(this,(function(c){switch(c.label){case 0:return t=e.access_token,n=e.error,r=e.token_type,o=e.direction_url,i=e.code,a=e.extend_expired_access_enabled,!n&&"code"===r&&o&&i?((s=new URL(o)).searchParams.append("code",i),window.open(s,window.name),[3,3]):[3,1];case 1:return!n&&t?(pe(e),It()&&pn.setSssAccessToken(t),[4,Ke({source:D,token:t,user:l(t),extendExpiredAccessEnabled:a})]):[3,3];case 2:c.sent(),It()&&Pt(t),delete H.passwordlessToken,d.removeQueryParamByName("passwordless_token"),c.label=3;case 3:return d.doneCall("refreshUserToken"),[2]}}))}))},de=function(e){se({screen:"passwordless_confirmation",jsonpError:{error_description:e.map((function(e){return e.message})).join("\n")}}),delete H.passwordlessToken,d.removeQueryParamByName("passwordless_token")},pe=function(e){var t={aid:H.aid||pn.aid,login_token_id:e.login_token_id,user_token:e.access_token},n={passwordlessToken:e.passwordless_token,redirectUri:e.direction_url};fe(t,n)},fe=function(e,t){p.showWaitPanel(),v.callApi("/anon/passwordless/complete",e,(function(e){if(e.result&&e.result.polling_enabled)return me(e).then((function(e){ve(e,t)}));ve(e,t)}))},me=function(e){return new Promise((function(t){var n={aid:pn.aid,oid:e.result.oid,process_id:e.result.process_id,user_token:pn.user.getProvider().getToken()};ge(n,0,e.result.polling_timeouts,t)}))},ge=function e(t,n,r,o){v.callApi("/anon/passwordless/check",t,(function(i){n++,i&&i.result&&"waiting"!==i.result.poll_status?o(i):!i.result&&i.message?(d.error("Passwordless purchase failed",i.message),o()):n<=r.length?setTimeout((function(){e(t,n,r,o)}),r[n-1]):o()}))},ve=function(e,t){try{var n=e.result.resource||{},r=JSON.parse(e.result.show_offer_params),o=he(t);if(!Object.keys(n).length&&!Object.keys(r).length)return se(o);o=n.name?he(t,{customParams:{resourceName:n.name}}):he(t,{customEvents:{checkoutContinue:function(){ze(),p.closeModalContainer(),pn.offer.show(r)}}}),se(o)}catch(e){se(he(t))}finally{p.hideWaitPanel()}},he=function(e,t){var n={screen:"passwordless_confirmation"};return e&&(n.passwordlessToken=e.passwordlessToken,n.redirectUri=e.redirectUri),t?Object.assign(n,t):Object.assign(n,{passwordlessSuccess:!0})},ye=function(e,t){t=t||{};var n=Ye();if(n){var r={token:Je(),user:n,source:t.source,stage:t.stage},i={event:"loginSuccess",source:t.source,params:r.user,user_token:r.token,registration:o,stage:t.stage};e?(e.loggedIn&&e.loggedIn(r),t.emitGlobalLoginSuccessEvent&&Ce("loginSuccess",i)):(be("loggedIn",r),be("loginSuccess",r),t.source===D&&(be("fire_loginSuccess",i),Ce("loginSuccess",i)))}},we=function(e,t){Ie({login:"loginDisplayed",register:"registerDisplayed"}[e],{},t)},be=function(e,t){var n;_e(e,t),null===(n=Q[e])||void 0===n||n.forEach((function(e){return e(t)}))},_e=function(e,t){W.filter((function(e){return!e.closed})).map((function(t){return ke(t.config,e)})).filter((function(e){return!!e})).forEach((function(e){return e(t)}))},ke=function(e,t){return"function"==typeof(null==e?void 0:e[t])?e[t]:void 0},Ce=function(e,t){Y[e]&&Y[e].forEach((function(e){e(t)}))},Ie=function(e,t,n){!n&&be(e,t),Ce(e,t)},Se=function(e){!e||Object.keys(Q).forEach((function(t){var n;e[t]&&(null===(n=Q[t])||void 0===n||n.push(e[t]))}))},Ee=function(e){e.aid||(e.aid=pn.aid),e.displayMode||(e.displayMode="modal"),"popup"===e.displayMode?(e.width=parseInt(e.width)||xe(),e.height=parseInt(e.height)||460):"modal"===e.displayMode&&(e.width=parseInt(e.width)||xe()),e.accessToken=Je()},Pe=function(e){q=e},xe=function(){var e=window.innerWidth||document.documentElement.clientWidth||window.screen.width;return Math.min(e,400)},Te=function(e,t,n){return E(void 0,void 0,void 0,(function(){return P(this,(function(r){switch(r.label){case 0:return o=!1,[4,st()];case 1:return r.sent(),Xe(),It()&&pn.sssAccessToken&&pn.setSssAccessToken(void 0),y.remove(z),d.setAccessTokenListCookie({value:null},void 0,!0),n||function(e){var t={source:e};be("loggedOut",t),Ce("logout",t)}(t),e&&e(),[2]}}))}))};function Ae(e){return function(t){var n,r,o,i=e.config,a=i.trackingId,s=i.formName;switch(t.event){case"updateToken":Ke(t.params);break;case"loaded":"modal"===i.displayMode&&p.checkBackdropAndContainer(e,!0),null===(n=i.loadedCallback)||void 0===n||n.call(i,e);break;case"stateReady":null===(r=i.readyCallback)||void 0===r||r.call(i,e);break;case"resize":p.resizeIframe(e,t.params);break;case"restoreSize":"inline"===e.config.displayMode&&p.resizeIframe(e,{width:c.getWidth(e.container)});break;case"loginSuccess":Le(t,(function(){var e;null===(e=i.callback)||void 0===e||e.call(i),pn.user.refreshAccessToken(!0),f.broadcast("pianoIdLoginSuccess",t.params)}));break;case"loginFailed":Ie("loginFailed",t.params);break;case"registrationSuccess":Le(t,(function(){Ie("registrationSuccess",t.params),f.broadcast("pianoIdLoginSuccess",t.params)}));break;case"registrationFailed":Ie("registrationFailed",t.params);break;case"lang":dt(t.params.lang,!0),bt(t.params.lang,e);break;case"customEvent":!function(e,t){var n;null===(n=null==e?void 0:e.customEvent)||void 0===n||n.call(e,t),Ce("customEvent",t)}(e.config,t.params);break;case"closed":ut(e,!0),null===(o=i.closedCallback)||void 0===o||o.call(i,e);break;case"cfFormSubmission":b.log.event({eventType:St.LOG_CUSTOM_FORM_SUBMISSION,payload:{trackingId:a,formName:s,source:B}});break;case"formSend":case"formSkip":ut(e);break;case"cfAppImpression":b.log.event({eventType:St.LOG_CUSTOM_FORM_IMPRESSION,payload:{trackingId:a,formName:s,source:F}});break;case"cfAppSubmission":b.log.event({eventType:St.LOG_CUSTOM_FORM_SUBMISSION,payload:{trackingId:a,formName:s,source:F}});break;case"cfFormImpression":b.log.event({eventType:St.LOG_CUSTOM_FORM_IMPRESSION,payload:{trackingId:a,formName:s,source:B}});break;case"changeScreen":we(t.params.screen);break;case"screenReady":Ie("onShow");break;case"layoutReady":Ie("layoutReady",t.params);break;case"confirmationEmailSent":"inline"!==e.config.displayMode&&!t.params.isDOI&&!t.params.isPasswordlessDigitalCode&&ut(e);break;case"verificationCodeStartCheckout":var u={};try{u=JSON.parse(t.params.startCheckoutParams)}catch(e){d.log("error parse start checkout params"),u={}}ot(!0,!0).then((function(){ut(e,!0)})),d.waitCall("refreshUserToken",(function(){pn.offer.show(u)}));break;case"removeParamFromGlobalConfig":Me(t);break;case"verifyCode":Ne(t,e);break;case"openPasswordlessLoginWithCreatingUser":Oe();break;case"fireCustomEvent":!function(e){X&&"function"==typeof X[e]&&X[e]()}(t.params.name);break;case"passwordRestored":d.removeQueryParamByName(A),H.resetPasswordToken=void 0;break;case xt.EMIT_GA_EVENT:b.ga.event({payload:t.params,eventType:xt.EMIT_GA_EVENT});break;case"redirect":document.location.href=t.params.url;break;case"designVersion":p.addClassToContainer(e,"piano-id-modal-ver-".concat(t.params.version));break;case"profileUpdated":be("profileUpdate",t.params);break;case"logout":Ze()&&Te();break;default:d.debug("Received invalid event type: "+t.event)}}}var Oe=function(){oe({createPasswordlessUser:!0})},Me=function(e){var t=e.params.name,n=d.fromUnderscoreToCamelCase(t);delete H[n],e.params.removeFromUrl&&d.removeQueryParamByName(t)},Ne=function(e,t){var n=e.params.verificationCode,r=e.params.locale,o=H.aid||pn.aid,i=$e(),a=document.location.href;u.request({url:"".concat(De(),"/verification/code"),dataType:"jsonp",data:{client_id:o,access_token:i,site:a,verification_code:n,lang:r},success:function(e){e.error||Re(e,t)},xhrFields:{withCredentials:!0},crossDomain:!0})},Re=function(e,t){!e.error&&e.access_token&&He({token:e.access_token,user:l(e.access_token),cookie_domain:e.site_cookie_domain}),f.send("verificationCodeComplete",e,t.iframeId)},Le=function(e,t){return E(void 0,void 0,void 0,(function(){var n,r;return P(this,(function(i){switch(i.label){case 0:return e&&e.params&&!e.params.areCookiesSet?(e.params.source=D,o=!!e.params.registration,[4,Ke(e.params)]):[3,2];case 1:return n=i.sent(),t(n),Be(null===(r=e.params)||void 0===r?void 0:r.user),[3,3];case 2:"function"==typeof t&&t(),i.label=3;case 3:return Ct(),[2]}}))}))},Ue=function(){var e=pn.sandbox||pn.isNonProdEndpoint(),t=H.iframeUrl||pn.pianoIdUrl||!e&&"https://id.tinypass.com"||"/";return"/"===t&&(t=pn.getEndpointRoot(!0)),t.replace(/\/$/,"")},je=function(){return"".concat(Ue(),"/id/")},De=function(){return"".concat(je(),"api/v1/identity")},Be=function(e){var t=null==e?void 0:e.email_confirmation_required,n=H.verification_code;t||n?p.hideCloseButton():lt()},Fe=function(e,t,n,r){var o={client_id:t.aid,sender:null==n?void 0:n.iframeId,origin:r||window.location.origin||window.location.href,site:window.location.href,display_mode:t.displayMode,pageViewId:pn.main.fetchPageViewId(),tbc:d.getTbcCookie()},i=pt();if(i&&(o.lang=i),g.getClientId()&&(o.ga_client_id=g.getClientId()),g.getGAAccount()&&(o.ga=g.getGAAccount()),t.disableSignUp&&(o.disable_sign_up=!0),t.screen&&(o.screen=t.screen),t.resetPasswordToken&&(o.reset=t.resetPasswordToken),t.verification_code&&(o.verification_code=t.verification_code),t.stage&&(o.stage=t.stage),t.resetPasswordLandingUrl&&(o.reset_uri=t.resetPasswordLandingUrl),t.width&&"modal"===t.displayMode&&(o.width=t.width),t.formName&&(o.form_name=t.formName),t.preview)switch(t.template){case"custom_form":e+="form";break;case"profile":e+="profile";break;case"newsletters":e+="newsletters";break;case"layout_gm_sso":case"sso_confirm":case"sso_confirm_before":e+="gm-sso"}else Ve(t,e)&&(e+="form"),t.isGmSsoEnabled&&(e+="gm-sso");if(t.gmSsoConfirmScreen&&(o.gm_sso_confirm_screen=t.gmSsoConfirmScreen),t.gmSsoPianoIdDomain&&(o.gm_sso_piano_id_domain=t.gmSsoPianoIdDomain),t.hideIfComplete&&(o.hide_if_complete=t.hideIfComplete),t.preview&&(o.preview=t.preview),t.templateVersion&&(o.templateVersion=t.templateVersion),t.template&&(o.template=t.template),t.accessToken&&(o.access_token=t.accessToken),t.email&&(o.email=t.email),t.singleStep&&(o.single_step=!0),t.createPasswordlessUser&&(o.create_passwordless_user=!0),t.customParams&&(o.custom_params=JSON.stringify(t.customParams)),t.customEvents){var a=Object.keys(t.customEvents);a.length&&(o.custom_events=JSON.stringify(a))}return t.jsonpError&&(o.jsonp_error=JSON.stringify(t.jsonpError)),t.passwordlessSuccess&&(o.passwordless_success=!0),t.passwordlessToken&&(o.passwordless_token=t.passwordlessToken),t.redirectUri&&(o.redirect_uri=t.redirectUri),null!=n&&n.iframeUrl&&(o.url=n.iframeUrl),t.returnBack&&(o.return_back=t.returnBack),null!=n&&n.pos&&(o.width=n.pos.width,o.height=n.pos.height,o.top=n.pos.top,o.left=n.pos.left),t.templateId&&(o.template_id=t.templateId),t.variantId&&(o.variant_id=t.variantId),t.sss&&(o.sss_mode=t.sss.sss_mode,o.sss_callback_url=t.sss.sss_callback_url,o.sss_origin_url=t.sss.sss_origin_url),t.trackingId&&(o.tracking_id=t.trackingId),[e,c.param(o)].join("?")},Ve=function(e,t){var n=!e.isRegistration,r=!/\.html$/.test(t);return e.formName&&r&&n},qe=function(e){var n=e.containerSelector?c.queryEl(e.containerSelector):null,r="piano-id-".concat(e.isRegistration?"":"form-").concat(d.randomString());e.singleContainer=n;var o,i,a,s={iframeId:r,containerSelector:e.containerSelector,width:e.width,height:e.height},u=Fe(je(),e,s),l=je(),g=!0;if(e.iframeParams=s,"inline"===e.displayMode){var v=p.initInlineContainer(e);if(!(o=v.container))return;i=p.generateIframe(e,s,u),g=!!v.containerReady,e.observeContainer&&(a=m.create(o,ee))}else if("modal"===e.displayMode)o=p.getModalContainer(e,(function(){return ut(t)})),i=p.generateIframe(e,s,u);else if("popup"===e.displayMode)if(d.isIE()){o=p.generateIframeWrapper(),u=Fe(je(),e,s,je()+"proxy.html"),s.iframeUrl=u,s.pos=p.getPopupPosition(s);var h=Fe(je()+"proxy.html",e,s);e.displayMode="inlinePopup",i=p.generateIframe({},s,h)}else{o=p.generatePopup(s,u);try{try{i=o.document}catch(e){i=o}}catch(e){i=window.document}}var y={iframeId:s.iframeId,config:e,element:i,container:o,iframeParams:s,containerReady:g},w={center:d.centerScreen(),originUrl:document.location.href};if(f.init({postMessageUrl:l,receive:Ae(y),iframe:y,iframeParams:s},w),"inline"===e.displayMode){var b=document.createElement("div");c.addClass("piano-id-container",b),c.append(b,i),c.append(o,b)}else"modal"===e.displayMode?c.append(o,i):"inlinePopup"===e.displayMode&&(c.append(o,i),c.append(document.body,o));if(d.debug("creating iframe: ",e),W.push(y),"modal"===e.displayMode){(t=y).observer=a,(d.isIphone()||d.isSafariOrIOsUiWebView()||d.isAndroid())&&p.__private__.mobileModalFix.modalOpened();var _=pt();bt(_,y)}return y},ze=function(e){if(t){var n=p.__private__.mobileModalFix;p.closeModal(t),c.remove(t.element),t.observer&&t.observer.disconnect(),n.isIphoneCaretFixed&&n.modalClosed(),t=void 0}},Ge=function(){var e={path:"/",secure:d.__protected__.isHttpsProtocol()},t=d.__protected__.getCookie(L),n=d.extractCookieDomain(t);return n&&(e.domain=n),(pn.cookieDomain||pn.cookiePath)&&(e.domain=pn.cookieDomain?pn.cookieDomain:e.domain,e.path=pn.cookiePath?pn.cookiePath:e.path),e},He=function(e){if(e&&e.user&&e.token){Xe(null,!0,!0),e.cookie_domain&&Qe(e.cookie_domain),e.extendExpiredAccessEnabled&&(wt("setExtendExpiredAccess",!0,"broadcast"),We(j,"true"));var t={};if(("r"in e.user?e.user.r:e.user.rememberMe||mt())&&(t.expires=new Date(1e3*e.user.exp),We(U,1,t)),!It()){var n=d.getPossibleCookieDomains();for(var r in n)d.deleteCookie(N,n[r]);We(N,e.token,t)}}},We=function(e,t,n){d.__protected__.setCookieConsent("id",e,t,C(C({},Ge()),n))},Je=function(){return It()&&pn.sssAccessToken?pn.sssAccessToken:d.findCookieByName(N)||null},Qe=function(e){We(L,e,{domain:e,expires:30})},Xe=function(e,t,n){var r=Ge(),o=d.getPossibleCookieDomains(r.domain);e&&d.__protected__.logRemoveTokens(e),o.forEach((function(e){var o=C(C({},r),{domain:e});s.remove(N,o),n||s.remove(j,o),t||ft(o)}))},Ye=function(){var e=null,t=Je();if(t)try{if(e=l(t)){e.firstName=e.given_name,e.lastName=e.family_name,e.valid=!0,e.uid=e.sub,e.confirmed=!e.email_confirmation_required;var n=new Date;new Date(1e3*e.exp)<n&&(d.log("Removing expired tokens"),Xe(t),e=null)}}catch(e){}return e},$e=function(){return pn.externalJWT&&_t()?pn.externalJWT:Je()},Ke=function(e,t){return E(void 0,void 0,void 0,(function(){return P(this,(function(n){switch(n.label){case 0:return He(e),[4,ct(e.token,e.rememberMe)];case 1:return n.sent(),!t&&ye(null,{stage:e.stage,source:e.source}),[2]}}))}))},Ze=function(){return _t()?!!pn.externalJWT:!!Ye()},et=function(e,t,n){return E(void 0,void 0,void 0,(function(){var r,o;return P(this,(function(i){switch(i.label){case 0:return r=l(e.access_token),[4,Ke({token:e.access_token,user:r,cookie_domain:e.site_cookie_domain,extendExpiredAccessEnabled:e.extend_expired_access_enabled},t)];case 1:return o=i.sent(),n&&Be(r),d.doneCall("refreshUserToken"),[2,o]}}))}))},tt=function(e){var n=C(C({},e),{gmSsoConfirmScreen:"popup"===(null==e?void 0:e.displayMode)?nt(e.confirmation):rt(),gmSsoPianoIdDomain:Ue(),isGmSsoEnabled:K});Ee(n);var r=(null==a?void 0:a.access_token)&&!$e();if("sso_confirm"===n.gmSsoConfirmScreen&&r&&(n.accessToken=null==a?void 0:a.access_token),t)d.log("Modal login window already shown");else{var o=function(e){return E(void 0,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return"sso_confirm"===e&&(null==a?void 0:a.access_token)&&!$e()?[4,et(a)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},i=!kt()&&$e()&&!["redirect","popup"].includes(null==e?void 0:e.displayMode);if(Ct(),i)return Ct(),qe(n),void o(n.gmSsoConfirmScreen);$e()||(qe(n),o(n.gmSsoConfirmScreen))}},nt=function(e){return"before"===e?"sso_confirm_before":"sso_confirm"},rt=function(){var e;if(null!==(e=!(null==a||!a.access_token))&&void 0!==e?e:$e())return"sso_confirm"},ot=function(e,t){return new Promise((function(e,t){d.startCall("refreshUserToken");var n=function(n){var r=(void 0===n?{}:n).isSuccessful;r?e(null):t(),d.doneCall("refreshUserToken"),r&&K&&(null!=Z&&Z.emailConfirmationRequired?ae({displayMode:"modal"}):((null==Z?void 0:Z.offerId)&&(null==Z?void 0:Z.termId)&&(pn.offer.show({offerId:Z.offerId,termId:Z.termId}),Z.offerId=void 0,Z.termId=void 0),null!=Z&&Z.formName&&(ce({formName:null==Z?void 0:Z.formName}),Z.formName=void 0),vt()||oe({screen:"sso_confirm",displayMode:"modal"})))},r=function(e){return E(void 0,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return K=e.authorized_by_sso,!e.error&&e.access_token?(a=e,K&&kt()&&!$e()?[2]:[4,et(e,!1,!0)]):[3,2];case 1:return t.sent(),n({isSuccessful:!0}),[3,3];case 2:e.site_cookie_domain&&Qe(e.site_cookie_domain),a=void 0,Xe($e()),n({isSuccessful:!1}),t.label=3;case 3:return[2]}}))}))},o=$e()||void 0,i={client_id:H.aid||pn.aid,site:document.location.origin||document.location.href},s=it();s&&(i.tcf=s),o?u.request({url:"".concat(De(),"/token/validation"),data:i,headers:{Authorization:o},success:function(e){r(e),e.access_token&&at(s)},error:n}):u.request({url:"".concat(De(),"/token/verify"),data:i,success:function(e){r(e),e.access_token&&(at(s),It()&&(pn.setSssAccessToken(e.access_token),Pt(e.access_token)))},error:n,dataType:"jsonp",xhrFields:{withCredentials:!0},crossDomain:!0}),setTimeout(n,q)}))},it=function(){var e,t=window;return function(e){if(!e)return!1;var t=e;if(!t||!t.tcString||!t.date)return!1;var n=new Date,r=new Date(t.date),o=Math.abs(r.getTime()-n.getTime());return Math.ceil(o/864e5)<=1}(y.get(z))?null:(e=null,t.__tcfapi&&t.__tcfapi("getTCData",2,(function(t,n){n&&t.tcString&&(e=t.tcString)}),[412]),e)},at=function(e){if(e){var t={date:(new Date).toString(),tcString:e};Et(z,JSON.stringify(t))}},st=function(){return new Promise((function(e){var t=$e(),n={client_id:H.aid||pn.aid};t&&Object.assign(n,{token:t}),u.request({url:"".concat(De(),"/logout"),data:n,dataType:"jsonp",complete:e,xhrFields:{withCredentials:!0},crossDomain:!0})}))},ct=function(e,t){return new Promise((function(n){var r=!(t||mt());u.request({url:"".concat(De(),"/vxauth/cookie"),data:{client_id:H.aid||pn.aid,session_cookie:r},headers:{Authorization:e||void 0},complete:n})}))},ut=function e(t,n){!t||(n?t.closed||(t.closed=!0,"inline"===t.config.displayMode?c.empty(t.container):"popup"===t.config.displayMode?t.container.close():"modal"===t.config.displayMode&&(ze(t),c.remove(t.container.parentElement)),K&&Ct()):(f.send("close",{},t.iframeId),W=W.filter((function(e){return e.iframeId!==t.iframeId})),setTimeout((function(){e(t,!0)}),600)))},lt=function(){W.forEach((function(e){ut(e)})),W=[]},dt=function(e,t){var n=d.__protected__.getCookie(R),r=d.__protected__.getCookie(L);n===e||!r||(We(R,e,{expires:30}),t||W.forEach((function(t){f.send("lang",{lang:e},t.iframeId)})),Object.keys(J).forEach((function(t){var n=J[t];f.__protected__.isIframeManaged(t)&&n?n(e):delete J[t]})),Ie("langChange",e))},pt=function(){return pn.locale||d.__protected__.getCookie(R)||""},ft=function(e){e&&s.remove(U,e)},mt=function(){return!!d.__protected__.getCookie(U)},gt=function(e){return new Promise((function(t){var n=Object.assign({},H,e);u.request({url:"".concat(De(),"/userinfo"),data:{client_id:H.aid||pn.aid,form_name:n.formName},headers:{Authorization:$e()||void 0},success:t,complete:function(){return t(null)}}),setTimeout(t,q)}))},vt=function(e){var t="redirect"===(null==e?void 0:e.displayMode)||!(null!=e&&e.displayMode)&&"redirect"===(null==H?void 0:H.displayMode),n=d.isSafariOrUiWebView()&&!(null!=e&&e.displayMode)&&!(null!=H&&H.displayMode);return t||n},ht=function(e){var t,n,r,o;$e()||(Ee(e),r=C(C({},e),{screen:null!==(t=e.screen)&&void 0!==t?t:H.screen,gmSsoConfirmScreen:nt(e.confirmation),redirectUri:null!==(n=e.redirectUri)&&void 0!==n?n:window.location.href}),o=window.open(function(e,t){var n,r={client_id:t.aid,gm_sso_piano_id_domain:Ue(),site:document.location.href,display_mode:"redirect",gm_sso_redirect_container_width:null!==(n=t.width)&&void 0!==n?n:xe()},o=pt();return o&&(r.lang=o),t.screen&&(r.screen=t.screen),t.resetPasswordToken&&(r.reset=t.resetPasswordToken),t.redirectUri&&(r.redirect_uri=t.redirectUri),t.offerId&&(r.gm_sso_offer_id=t.offerId),t.termId&&(r.gm_sso_term_id=t.termId),t.gmSsoConfirmScreen&&(r.gm_sso_confirm_screen=t.gmSsoConfirmScreen),t.formName&&(r.form_name=t.formName),t.sss&&(r.sss_mode=t.sss.sss_mode,r.sss_callback_url=t.sss.sss_callback_url,r.sss_origin_url=t.sss.sss_origin_url),[e+="gm-sso",c.param(r)].join("?")}(je(),r),window.name),o&&Ct())},yt=function(e){Ee(e),$e()||window.open(Fe(je(),e),window.name)},wt=function(e,t,n){$.push({type:n,name:e,data:t})},bt=function(e,t){G.includes(e)?p.turnOnRTL(t):p.turnOffRTL(t)},_t=function(){return!0===pn.usePianoIdLiteUserProvider||"string"==typeof pn.usePianoIdLiteUserProvider&&"true"===pn.usePianoIdLiteUserProvider},kt=function(){return!!d.__protected__.getCookie("piano-id-initial-gm-sso-shown-"+(H.aid||pn.aid))},Ct=function(){We("piano-id-initial-gm-sso-shown-".concat(H.aid||pn.aid),!0,{expires:30})},It=function(){return!!Tt().sss_mode&&!!Tt().sss_callback_url},Et=function(e,t){w.id?w.id.localStorage.set(e,t):y.set(e,t)},Pt=function(e){var t="";t+="callback_url="+Tt().sss_callback_url,t+="&origin_url="+Tt().sss_origin_url,t+="&aid="+pn.aid,t+="&lang="+pt(),t+="&token="+e,window.location.href=Ue()+"/id/api/v1/sss?"+t},Tt=function(){var e=(pn.sssOriginUrl||window.location.href||window.location.origin).replace(/passwordless_token=.*/,"");return{sss_mode:pn.sssMode,sss_callback_url:pn.sssCallbackUrl,sss_origin_url:e}};return{name:"pianoId",isv:!1,init:re,prepare:function(){return ne()},show:oe,showForm:ce,checkAndShowEmailIsNotConfirmed:ie,showEmailConfirmationRequired:ae,submitLoginForm:function(){f.send("submitLoginForm",null,null==t?void 0:t.iframeId)},loginByToken:function(e){return E(void 0,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return t=l(e),[4,Ke({user:t,token:e})];case 1:return n.sent(),Be(t),[2]}}))}))},logout:Te,getToken:$e,getUser:Ye,loadExtendedUser:function(e){var t=Object.assign({},H,e);gt(t).then((function(e){var n=Object.assign({},e);e&&Array.isArray(e.custom_field_values)&&(e.custom_field_values=e.custom_field_values.map((function(e){var t;try{t=JSON.parse(e.value)}catch(n){t=e.value}return{field_name:e.field_name,value:t,created:e.created}}))),"function"==typeof t.extendedUserLoaded&&t.extendedUserLoaded(n),Ce("extendedUserLoaded",n)}))},getName:function(){return"piano_id"},isConfigured:function(){return!0===pn.usePianoIdUserProvider||"string"==typeof pn.usePianoIdUserProvider&&"true"===pn.usePianoIdUserProvider},onLoginSuccess:function(e){return E(void 0,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return i?[2]:(i=!0,t={source:e.source,token:e.user_token,user:e.params||e.user,cookie_domain:e.cookie_domain,stage:e.stage},d.setAccessTokenListCookie({value:e.token_list,cookie_domain:e.cookie_domain},e.user_token),[4,Ke(t)]);case 1:return n.sent(),Be(t.user),i=!1,[2]}}))}))},onProfileUpdate:function(e,t){return E(void 0,void 0,void 0,(function(){var n;return P(this,(function(r){switch(r.label){case 0:return n={token:e.token,user:e.user,cookie_domain:e.cookie_domain},[4,Ke(n,!0)];case 1:return r.sent(),t(),function(e){be("profileUpdate",e)}(n),[2]}}))}))},onExtendedUserLoginRequired:function(){se()},isUserValid:Ze,setCallbacks:Se,getIframeUrl:function(){return je()},updateLang:dt,onLangChange:function(e,t){return J[t]=e,function(){delete J[t]}},getLang:pt,isAot:function(){W.forEach((function(e){f.send("isAOT",{},e.iframeId)}))},registerCallback:function(e,t){Y[e]=Y[e]||[],Y[e].push(t)},setRequestTimeout:Pe,__protected__:{offerMessageReceiver:function(e){switch(e.params.event){case"cfAppImpression":case"cfFormImpression":b.log.event({eventType:St.LOG_CUSTOM_FORM_IMPRESSION,payload:{trackingId:e.params.trackingId,formName:e.params.trackingId,source:V}});break;case"cfFormSubmission":b.log.event({eventType:St.LOG_CUSTOM_FORM_SUBMISSION,payload:{trackingId:e.params.trackingId,formName:e.params.trackingId,source:V}});break;case"updateToken":Ke(e.params.params);break;case"changeScreen":we(e.params.params.screen,!0);break;case"loginFailed":case"registrationFailed":case"successDOI":case"registrationSuccess":case"customEvent":Ie(e.params.event,e.params.params,!0);break;case xt.EMIT_GA_EVENT:b.ga.event({payload:e.params.params,eventType:xt.EMIT_GA_EVENT});break;case"redirect":document.location.href=e.params.params.url;break;default:return void d.debug("Received invalid event type: "+e.params.event)}},showEmailConfirmation:function(e){t?d.log("Modal window already shown"):re().then((function(){var t=Object.assign({screen:"email_confirmation"},H,e);vt(t)&&(t.displayMode="modal"),d.getQueryParamByName(O)&&d.removeQueryParamByName(O),Ee(t),qe(t)}))},checkAndShowEmailIsNotConfirmed:ie,closeModalContainer:ze,executePostMessagesBatch:function(){for(;$.length;){var e=$.pop();"broadcast"===e.type?f.broadcast(e.name,e.data):f.send(e.name,e.data)}},isGmSso:function(){return K},isGmSsoRedirectEnabled:vt,authByGmSsoRedirect:ht,getGmSsoCachedTokenResponse:function(){return a},extendUserToken:function(){var e=Je();if(e){var t=(new Date).getTime(),n=d.__protected__.getCookie(j),r=t-1e3*l(e).iat>864e5;n&&r&&ot(!1,!0)}},getSssParams:Tt,isSssEnabled:It},__private__:{prepareConfig:Ee,setRequestTimeout:Pe,createIframe:qe}}}()}),pn.pianoId=pn.container.resolve("pianoId");var zt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("pianoId"),n=pn.container.resolve("eventUtils").createEventManager(["userChanged","onHide","logout"]),r=e.getAidSpecifiedName("__utp"),o=function(){return pn.externalJWT||i()},i=function(){return e.findCookieByName(r)||null};return{name:"pianoIdLite",isv:!1,isConfigured:function(){return!0===pn.usePianoIdLiteUserProvider||"string"==typeof pn.usePianoIdLiteUserProvider&&"true"===pn.usePianoIdLiteUserProvider},isUserValid:function(){return!!o()},getToken:o,getName:function(){return"piano_id_lite"},onLoginSuccess:function(t){e.setAccessTokenListCookie({value:t.token_list,cookie_domain:t.cookie_domain},t.user_token)},registerCallback:function(e,t){n.addEvent(e),n.registerCallback(e,t)},loginByToken:function(e){t.loginByToken(e)},logout:function(t){e.waitCall("refreshUserToken",(function(){"function"==typeof t&&t()})),n.fireCallbacks("logout",null,void 0,!0)}}}();pn.container.register("pianoIdLite",{useValue:zt}),pn.pianoIdLite=pn.container.resolve("pianoIdLite");var Gt=s(c());pn.container.register("user",{useValue:function(e){void 0===e&&(e=pn.container);var t,n,r=e.resolve("api"),o=e.resolve("util"),i=e.resolve("janrain"),a=e.resolve("tinypassAccounts"),s=e.resolve("condeUserProvider"),c=e.resolve("gigya"),u=e.resolve("pianoId"),l=e.resolve("pianoIdLite"),d=e.resolve("eventUtils").createEventManager([]);t="logout",n=function(){o.__protected__.setVxUsersToDataLayer(null),Gt.dataLayer.set("userStatus","anon")},[i,a,s,c,u,l].forEach((function(e){e.registerCallback(t,n)}));var p={isv:!1,getName:function(){return"publisher_user_ref"},getToken:function(){return pn.userRef?pn.userRef.constructor==="".constructor?pn.userRef:pn.userRef.constructor==={}.constructor?"{jox}"+JSON.stringify(pn.userRef):pn.userRef:null},isUserValid:function(){return!!(void 0!==pn.userRef&&pn.userRef&&pn.userRef.length>0)},onLoginSuccess:function(e){o.setAccessTokenListCookie({value:e.token_list,cookie_domain:e.cookie_domain},e.user_token)},logout:function(e){o.setAccessTokenListCookie(),e&&e()}},f=function(){var e=[i,a,s,c,u,l].find((function(e){return e.isConfigured()&&!e.isv}));return e||p};return{name:"user",getProvider:f,providerInit:function(e){(void 0===e||!e)&&(e=function(){});var t=f();"function"==typeof t.prepare?"prepare"in t&&t.prepare().then(e,e):e()},refreshAccessToken:function(e,t){(void 0===t||!t)&&(t=function(){});var n=f().isUserValid(),i=!1;if(void 0!==e&&e)i=!0;else if(n){var a=o.__protected__.getCookie("__tae");if(void 0!==a&&a){var s=new Date(parseInt(a));(new Date).getTime()-s.getTime()>864e5&&(i=!0)}else i=!0}i||!n?o.waitCall("refreshUserToken",(function(){o.waitCall("offerCreate",(function(){o.waitCall("experienceExecute",(function(){if(!f().isUserValid())return o.__protected__.getCookie("__tac")&&o.setAccessTokenListCookie(null,"",!0),void(t&&t(""));o.startCall("refreshAccessTokenList");var e={url:o.prepareUrlParameter(window.location.href)};r.callApi("/access/token/list",e,(function(e){o.doneCall("refreshAccessTokenList"),void 0!==e.access_token_list?(o.setAccessTokenListCookie(e.access_token_list),t&&t(e.access_token_list.value)):t&&t(null)}),void 0,void 0,!0)}))}))})):t(null)},showLogin:function(e){var t=f().getName();if("tinypass_accounts"===t)a.login(e);else if("piano_id"===t){var n=e||{};u.show(n)}else"publisher_user_ref"===t&&d.fireCallbacks("loginRequired",{},void 0,!0)},isUserValid:function(){return f().isUserValid()},logout:function(e,t){f().logout(e,t)},registerCallback:function(e,t){d.addEvent(e),d.registerCallback(e,t)},getUserInfoParams:function(e){var t=e.userToken;if(!t){var n=f().getToken();t=n&&n.length>0?n:""}return{user_token:t,user_lang:o.__protected__.getCookie("LANG")||"",is_preview:e.preview,is_non_logged_user:e.previewNonLoggedUser}}}}()}),pn.user=pn.container.resolve("user");var Ht=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("util"),n="viewport-exit-activated",r="viewport-exit-prepared",o=!1,i=!1,a=0,s=0,c=["top","right","bottom","left"],u=!0,l=!1,d=!1,p=[],f={top:{visited:!1,value:1},right:{visited:!1,value:2},bottom:{visited:!1,value:4},left:{visited:!1,value:8}},m=0,g=function(){if(!l){l=!0,m=0;var t=/(?:Firefox|Safari)[\/\s](\d+\.\d+)/.test(navigator.userAgent)?document.body:document;e.on(t,"mouseleave",(function(e){return v(e)})),e.on(document,"mousemove",(function(e){return h(e)}))}};var v=function(n){var r;r=function(e){return e.clientX===e.clientY&&e.clientX<0&&e.clientX>=-1}(n)?"":function(t,n){var r=e.winSize(),o=r.width,i=r.height,a="";return t>=o&&(a="right"),n>=i&&(a="bottom"),t<=0&&(a="left"),n<=0&&(a="top"),a}(n.clientX,n.clientY),r||(r=function(){if(!i)return"";var t=e.winSize(),n=t.width,r=t.height;return c[function(e){if(0===e.length)return-1;for(var t=e[0],n=0,r=1;r<e.length;r++)e[r]<t&&(n=r,t=e[r]);return n}([s,n-a,r-s,a])]}(),r||t.debug("viewportExit: the detect of the exit side failed")),r&&function(e){-1!==c.indexOf(e)?f[e].visited||(f[e].visited=!0,m+=f[e].value):t.debug("viewportExit: the detect of the exit side failed")}(r),y("all"),"top"===r&&y("top")},h=function(e){i=!0,s=e.clientY,a=e.clientX},y=function(e){if(u){for(var n,r=[],o=[],i=0;i<p.length;i++)((n=p[i]).detectExitMode===e||"back"===e&&n.detectBackButtonForMobile)&&n.consumeEventFn()?r.push(n):o.push(n);r.length&&t.debug("viewportExit: listeners was run fire with type: ",e),p=o;for(i=0;i<r.length;i++)(n=r[i]).callback()}};return{name:"viewportExit",initialize:g,isInitialized:function(){return l},addListener:function(e,t,i){("mobile"===t.clientDevice||"tablet"===t.clientDevice)&&!!t.detectBackButtonForMobile&&function(){if(!d){d=!0,window.addEventListener("popstate",(function(e){o&&e.state&&e.state.pianoViewportExitState===n&&(o=!1,y("back"))}));var e=window.history.state||{};e&&e.pianoViewportExitState!==r&&(e.pianoViewportExitState!==n&&(e.pianoViewportExitState=n,window.history.replaceState(e,document.title)),window.history.pushState({pianoViewportExitState:r},document.title)),o=!0}}(),g(),"function"!=typeof i&&(i=function(){return!0}),p.push({callback:e,detectExitMode:t.detectExitMode,detectBackButtonForMobile:t.detectBackButtonForMobile,consumeEventFn:i})},resetSumOfCodesDirectionToDefault:function(){m=0},getSumOfCodesDirection:function(){return m},removeListeners:function(){p=[]},enable:function(){u=!0},disable:function(){u=!1}}}();pn.container.register("viewportExit",{useValue:Ht}),pn.viewportExit=pn.container.resolve("viewportExit");var Wt=function(){var e=pn.container.resolve("postmessage"),t=pn.container.resolve("containerUtils"),n=pn.container.resolve("user"),r=pn.container.resolve("api");pn.container.resolve("util");function o(e){return a(e,"/checkout/template/show")}function i(e){return e.initContextLoadPromise=function(e,t){e.contextLoadingPromise=s(e,t)},a(e,"/checkout/template/cacheableShow")}var a=function(e,t){var n=pn.getEndpointRoot(!0)+t;return e.iframeUrl=n,e.postMessageUrl=n,e.widget="template",pn.offer.createOfferIframe(e)},s=function(e,t){var o=n.getUserInfoParams(e);return o.tracking_id=e.trackingId,o.templateId=e.templateId,o.templateVariantId=e.templateVariantId,o.aid=pn.aid,o.preload=e.isPreload,e.affiliateState&&(o.affiliateState=JSON.stringify(e.affiliateState)),Object.keys(t).forEach((function(e){o[e]=t[e]})),new Promise((function(e,t){r.callApi("/anon/template/loadTemplateContext",o,(function(n){var r=n.code,o=n.templateContext,i=n.message;0===r?e(o):t(i)}),void 0,void 0,!0)}))},c=function(e,t){var n={};return["aid","templateId","templateVariantId","previewTemplateVersion","preload","preview","previewUncached","deploymentItemId","gaClientId","zuoraSelectedRatePlanIds","newscycleSelectedIds","addNewsletterAssets","offerId","experienceId","iframeId","displayMode","debug","pianoIdUrl","widget","url"].forEach((function(t){e[t]&&(n[t]=e[t])})),t.param(n)};function u(e){pn.getCacheableShowTemplate()?(function(e){e.deferredContextLoading=!0,e.buildQueryStringFn=c}(e),e.createIframeFn=i):e.createIframeFn=o}return{name:"template",show:function(e){return e.offerId=t.fakeOfferId,e.trackStatsOnShow=!0,u(e),pn.offer.show(e)},deferredShow:function(e){return e.offerId=t.fakeOfferId,u(e),pn.offer.deferredShow(e)},close:function(){t.closeModalContainer()},closeInline:function(e){t.__protected__.closeInlineContainers(e)},createTemplateIframe:o,showBackdrop:function(){t.showBackdrop()},hideBackdrop:function(){t.hideBackdrop()},centerBackdrop:function(e){t.centerBackdrop(e)},registerCallback:function(e,t){},refreshUser:function(t){n.refreshAccessToken(!0,(function(){e.send("externalLoginSuccess",{user_token:n.getProvider().getToken()},t)}))}}}();pn.container.register("template",{useValue:Wt}),pn.template=pn.container.resolve("template");pn.container.register("offer",{useValue:function(e){void 0===e&&(e=pn.container);var t,n,r=e.resolve("jqUtils"),o=e.resolve("util"),i=e.resolve("postmessage"),a=e.resolve("user"),s=e.resolve("containerUtils"),c=e.resolve("eventUtils"),u=e.resolve("viewportExit"),l=e.resolve("gaService"),d=e.resolve("sha1"),p=e.resolve("logging"),f=e.resolve("template"),m=e.resolve("analytics"),g=e.resolve("ajax"),v=[],h={},y=0,w="close",b="OFFER",_=!1,k=!1,I=!1,S={},E=new Map,P={},x=["he_IL","ar_EG"],T="",A=c.createEventManager(["complete","cancel","close","error","loginRequired","loginSuccess","loaded","customEvent","startCheckout","resize","onMeterExpired","onMeterActive","onAccessGranted","onShowOffer","pianoIdEvent","parentSize","redeemCredit","onStartCreditRedemption","showAuthForm","callLinkTermSelectedCallback"]);s.setIframesPopstateHandlers();var O=function(){return pn.offerBaseUrl?pn.offerBaseUrl:pn.getEndpointRoot()+"/checkout/offer/show"};function M(e,t){var c=s.getIframe(e.sender),l=!0;switch(c&&c.config&&(l=!c.config.parent),e.event){case"initContext":if(e.params&&e.params.resultCallbackId){var d={resultCallbackId:e.params.resultCallbackId,affiliateState:c.config.affiliateState};i.send("resultCallback",d,e.sender)}break;case"storeCustomVariables":tp.saveCustomVariablesToLocalStorage(300);break;case"fullRedirectThreeDS":window.location.href=e.params.bankSecureUrl;break;case"resize":if(e.params.iframeId===e.sender){var p=void 0===e.params.width?C(C({},e.params),{width:r.getWidth(c.container)}):e.params;s.resizeIframe(c,p),"modal"===c.config.displayMode&&("boilerplate"===e.params.closeButtonType&&s.hideCloseButton(c.container),s.centerIt(c.container)),i.send("afterResize",{},c.iframeId)}A.fireCallbacks(e.event,e.params,e.sender,l);break;case"startCheckout":if(e.params.width=null,"inline"===e.displayMode){e.params.closeOnLogout=!0;var f=J(e.params,c.statParams);f.browserId=c.browserId,f.isOpenedFromInlineCheckout=!0,re(f,e.sender)}e.params.iframeId===e.sender&&A.fireCallbacks(e.event,e.params,e.sender,l);break;case"showAuthForm":var v=e.params,h=void 0===v?{}:v;pn.pianoId.show(C({closedCallback:function(){i.send("authFormClosed",{},e.sender)}},h));break;case"callLinkTermSelectedCallback":var y="",b=e.params;if(!b||"function"!=typeof tp.linkTermSelected)return;(function(){var e=pn.getApiEndpoint()+"/linkTerm/session/create",t={tracking_id:T||"",tbc:o.getTbcCookie()||"",pcid:o.getPcidCookie()||""};return new Promise((function(n,r){try{g.request({url:e,type:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:n,error:r})}catch(e){r(e)}}))})().then((function(e){var t=e.data;return y=t||""})).catch(console.log).finally((function(){return tp.linkTermSelected(y,b)}));break;case"loaded":if(e.params.iframeId===e.sender){if(i.send("setupCustomVariables",S[e.params.iframeId],e.params.iframeId),i.send("setupEVTFields",c.config.externalVerificationFields,e.params.iframeId),c.config.deferredContextLoading&&R(c,e),c.waitFinishProcesses)return void s.__protected__.closeAndRemoveIframe(c);"pianoId"===a.getProvider().name&&pn.pianoId.__protected__.executePostMessagesBatch(),"modal"===c.config.displayMode&&(s.resizeIframe(c,e.params),c.config.isPreload||s.checkBackdropAndContainer(c,!0)),"popup"===c.config.displayMode&&s.resizeIframe(c,e.params),!c.config.isPreload&&!c.config.trackStatsOnShow&&H(c),W(c),A.fireCallbacks(e.event,e.params,e.sender,l),"inline"===c.config.displayMode&&(c.containerReady?s.resizeIframe(c,e.params):s.operationWithContainer(c.iframeParams.containerSelector,(function(t){var n=r.queryEl("#temp-inline-"+c.iframeId);n&&(t.innerHTML=n.innerHTML,r.remove(n)),c.element=r.queryEl("iframe",t),c.containerReady=!0,s.resizeIframe(c,e.params)}))),D(c.config),o.doneCall("offerCreate")}break;case"downForMaintenance":s.resizeIframe(c,{width:300,height:200}),"modal"===c.config.displayMode&&(c.config.isPreload||s.checkBackdropAndContainer(c));break;case"removeQueryParamByName":e&&e.params&&Array.isArray(e.params.paramsToRemove)&&e.params.paramsToRemove.forEach((function(e){o.removeQueryParamByName(e)}));break;case"purge":t||(e&&e.params&&e.params.alreadyPurchased&&(w="alreadyHasAccess"),e&&e.params&&e.params.completePayment&&(w="checkoutCompleted"),s.purgeIframe(e.sender,c.config.parent),D(c.config));break;case"close":t||(e&&e.params&&e.params.alreadyPurchased&&(w="alreadyHasAccess"),e&&e.params&&e.params.completePayment&&(w="checkoutCompleted"),o.hasQueryParamByName("voucher_code")&&(w="voucherRedemptionCompleted"),s.closeContainer(e.sender,c.config.parent),D(c.config));break;case"closeAndRefresh":var k=e.params;k?window.location.assign(k):window.location.reload();break;case"selectTerm":w=e&&e.params&&e.params.alreadyPurchased?"alreadyHasAccess":"close";break;case"submitPayment":A.fireCallbacks(e.event,J(e.params,{offerId:c.iframeParams.offerId}),e.sender,l);break;case"complete":if(void 0!==e.params.token_list){var I=a.getProvider().getToken();o.setAccessTokenListCookie({value:e.params.token_list,cookie_domain:e.params.cookie_domain},I)}var E=J(e.params,{offerId:c.iframeParams.offerId});A.fireCallbacks(e.event,E,e.sender,l),w="checkoutCompleted";break;case"checkoutSelectTerm":A.fireCallbacks(e.event,J(e.params,{offerId:c.iframeParams.offerId}),e.sender,l);break;case"checkoutStateChange":case"checkoutPaymentError":case"alreadyPurchased":case"startThreeDBankSecure":case"cancel":case"error":case"customEvent":case"completeUpgradePurchase":A.fireCallbacks(e.event,e.params,e.sender,l);break;case"loginRequired":_=!0,A.fireCallbacks(e.event,ae(c,e.params),e.sender,l);break;case"logout":L(e.event,e.params,e.sender,c.config.parent,l);break;case"loginSuccess":U(e.event,e.params,e.sender,l);break;case"inputFocus":var P=r.queryEl(".tp-modal");P&&(P.style.zIndex=pn.zIndexes.modal+1+"",P.style.zIndex=pn.zIndexes.modal+"");break;case"inputBlur":var O=r.queryEl(".tp-modal");O&&(O.style.zIndex=pn.zIndexes.modal+1+"",O.style.zIndex=pn.zIndexes.modal+"");break;case"getLocation":e.params&&e.params.resultCallbackId&&(e.params.result=window.location.href,i.send("resultCallback",e.params,e.sender));break;case"setLocationHash":e.params&&e.params.hash&&(window.location.hash=e.params.hash);break;case"langChangedWithinOffer":pn.pianoId.isConfigured()&&pn.pianoId.updateLang(e.params.lang),x.indexOf(e.params.lang)>=0?s.turnOnRTL(c):s.turnOffRTL(c);break;case"loginStart":u.disable();break;case"loginEnd":u.enable();break;case"pianoIdEvent":e.params.iframeId===e.sender&&("closed"===e.params.event&&s.closeContainer(e.sender),pn.pianoId.__protected__.offerMessageReceiver(e)),N(e.params,e.sender);break;case"swgCheckoutStart":break;case"sharedAccountsSuccessfullyAdded":i.broadcast("refreshMyAccount",{userToken:a.getProvider().getToken()});break;case"newsletterSignupImpression":case"newsletterSignupSubmission":pn.pianoEsp.__protected__.offerMessageReceiver(e),A.fireCallbacks(e.event,e.params,e.sender,l);break;case"parentSize":var M=r.winSize(),j={width:M.width,height:M.height};i.send("parentSize",j,e.sender);break;case"gigyaPasswordlessLogin":e.params.iframeId===e.sender&&(n=e.params.iframeId,pn.gigya.loginByPasswordless(e.params));break;case xt.EMIT_GA_EVENT:return void(!t&&m.ga.event({eventType:xt.EMIT_GA_EVENT,payload:e.params}));case xt.EMIT_METRICS_EVENT:!t&&m.ga.event({eventType:xt.EMIT_METRICS_EVENT,payload:e.params});break;case"bannerInit":c.config.singleContainer.classList.add("tp-banner");break;case"bannerDestroy":c.config.singleContainer.classList.remove("tp-banner");break;case"redeemCredit":var B=A.fireCallbacks("onStartCreditRedemption",e.params,e.sender,l);B&&B.then&&B.then((function(t){i.send("successfullyCreditRedeem",t,e.sender)}),(function(t){i.send("creditRedeemFailed",t,e.sender)}));break;default:return void o.debug("Received invalid event type: "+e.event)}}var N=function(e,t){"successDOI"===e.event&&(e.iframeId!==t&&s.closeContainer(e.iframeId),i.send("afterSuccessDOI",e.params,t))},R=function(e,t){e.config.contextLoadingPromise.then((function(n){var r={iframeParams:e.iframeParams,userContext:n};r.iframeParams.url=o.prepareUrlParameter(window.location.href),i.send("userDataContextLoaded",r,t.params.iframeId)}))},L=function(e,t,n,r,o){a.logout((function(){var e={};e.userProvider=a.getProvider().getName(),e.userToken=a.getProvider().getToken()&&a.getProvider().getToken().length>0?a.getProvider().getToken():"",e.noNeedStartCheckout=!0,ie(e)}),b),t.closeOnLogout&&s.closeModalContainer(n,r)},U=function(e,t,n,r){if(t.source=b,a.getProvider().onLoginSuccess(t),A.fireCallbacks("loginSuccess",t,n,r),!I){var o={userToken:t.user_token,user:t.user,reloadAfterLogin:!0};ie(o,n)}},j=function(e){var t=e.displayMode||"modal";return[e.offerId,t,e.containerSelector].join("|")},D=function(e){var t=j(e);delete h[t]},B=function(e){if(w="close",Z(e),void 0===e.displayMode)e.displayMode="modal";else if("modal"!==e.displayMode&&"inline"!==e.displayMode&&"popup"!==e.displayMode)return o.log("Invalid offer displayMode; must be one of: modal, inline, popup"),void D(e);if("modal"===e.displayMode&&!e.isPreload&&s.hasModalIframe())return o.log("Modal offer is already shown; must be one modal offer per time"),void D(e);if("modal"!==e.displayMode){var t,n=r.qa(e.containerSelector);if(!e.isPreload)if(n.forEach((function(n){var r=J({},e);r.singleContainer=n,t=F(r)})),t)return t;var i=n[n.length-1];i&&(e.singleContainer=i)}return F(e)};function F(e,c){var u=function(e){var t={};e.termIds&&(e.termIds instanceof Array||(e.termIds=[e.termIds]));var n=e.additionalParamNames?e.additionalParamNames:[];["displayMode","containerSelector","templateId","templateVariantId","offerId","termId","termIds","rid","aid","isCheckout","isOpenedFromInlineCheckout","pw_id","paywallId","width","preview","previewUncached","previewTemplateType","previewTemplateVersion","tokenType","janrainCaptureToken","closeOnLogout","voucherCode","isRedemption","allowReturnToStartState","startFromInlineCheckout","formNameByTermId","hideCompletedFields","startFromInlineCheckout","reloadAfterLogin","preventReloadAfterLogin","isAuth","authStartScreen","showCloseButton","closeButtonType","checkoutFlowId","offerState","oid","promoCode","promoCodeId","promoCodeTermId","rurl_3ds","thirdPartyParams","termId3ds","providerId","deploymentItemId","sharedAccountCode","targetedTermId","widget","linkTermCheckoutState","purchasedLinkTermData"].concat(["trackingId","experienceId","activeMeters"],n).forEach((function(n){e[n]&&(t[n]=e[n]),"showCloseButton"===n&&(void 0===e[n]?t[n]=!0:t[n]=e[n])}));var r=decodeURIComponent(o.getQueryParamByName("_ptid"));return r&&(t.trackingId=r),e.preview&&(t.activeMeters=JSON.stringify([{meterName:"preview-meter",views:10,viewsLeft:5,maxViews:20,totalViews:20}])),t}(e);u.widget||(u.widget="offer");var d=o.getTbcCookie();d&&d.length>0&&(u.tbc=d),e.deferredContextLoading?(u.iframeId=V(e),u.url=window.location.origin):(u.iframeId="offer-"+y+++"-"+o.randomString(),u.url=o.prepareUrlParameter(window.location.href));var f=r.winSize();u.parentDualScreenLeft=void 0!==window.screenLeft?window.screenLeft:screen.left,u.parentDualScreenTop=void 0!==window.screenTop?window.screenTop:screen.top,u.parentWidth=f.width?f.width:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,u.parentHeight=f.height?f.height:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u.parentOuterHeight=window.outerHeight,e.previewNonLoggedUser&&(u.previewNonLoggedUser=e.previewNonLoggedUser),e.isPreload&&(u.preload=1),pn.locale&&(u.lang=pn.locale),l.getClientId()&&(u.gaClientId=l.getClientId()),l.getGAAccount()&&(u.gaAccount=l.getGAAccount()),function(e){["debug","aid","gaClientId","tags","contentSection","contentAuthor","debug","zone"].forEach((function(t){pn[t]&&(e[t]=pn[t])})),pn.customVariables&&(S[e.iframeId]=JSON.stringify(pn.customVariables));var t=pn.contentCreated;t&&(e.contentCreated=t),pn&&pn.main&&(e.pageViewId=pn.main.fetchPageViewId(),e.visitId=pn.main.fetchVisitId())}(u);var m=A.hasCallback("loginRequired");if(!pn.janrain.isConfigured()||void 0!==e.loginRequired&&e.loginRequired)if(!pn.gigya.isConfigured()||void 0!==e.loginRequired&&e.loginRequired)if(pn.pianoId.isConfigured()){(void 0===e.loginRequired||!e.loginRequired)&&(e.loginRequired=function(e){if(!e.preventExternalLogin)return t=e.termId,n=u.iframeId,pn.pianoId.show({screen:e.startScreen}),!1}),Y(),u.pianoIdUrl=pn.pianoId.getIframeUrl();var g=pn.pianoId.__protected__.getGmSsoCachedTokenResponse();e.isGmSso&&(null==g?void 0:g.access_token)&&(u.isGmSso=e.isGmSso,u.gmSsoCachedUserToken=g.access_token,u.gmSsoCachedUserTokenType=(null==g?void 0:g.token_type)||"");var h=pn.pianoId.getLang();h&&(u.lang=h),pn.pianoId.onLangChange((function(e){i.send("langChanged",{lang:e},u.iframeId)}),u.iframeId)}else pn.pianoIdLite.isConfigured()&&(u.pianoIdUrl=pn.pianoId.getIframeUrl());else{b=[];pn.gigya.registerCallback("onHide",(function(e){e&&e.afterLogin?s.activateContainers(b):pn.offer.close(),i.send("gigyaHide",e,n)})),Q(),e.loginRequired=function(e){return k=e.allowReturnToStartState,_=!1,b=s.hideModalContainer(),t=e.termId,n=u.iframeId,o.waitCall("refreshUserToken",(function(){pn.gigya.login()})),!1}}else{var b=[];pn.janrain.addEventHandler("onModalClose",(function(){s.activateContainers(b)})),X(),e.loginRequired=function(e){return b=s.hideModalContainer(),k=e.allowReturnToStartState,_=!1,t=e.termId,n=u.iframeId,o.waitCall("refreshUserToken",(function(){pn.janrain.login(void 0,e)})),!1}}u.userProvider=a.getProvider().getName(),e.userToken?u.userToken=e.userToken:u.userToken=a.getProvider().getToken()&&a.getProvider().getToken().length>0?a.getProvider().getToken():"",o.getCampaigns(u),u.customCookies=JSON.stringify(o.getCustomCookies()),A.registerCallback(e,u.iframeId),u.hasLoginRequiredCallback=A.hasIframeCallback("loginRequired",u.iframeId)||m,u.initMode="context",q(u);var C=e.iframeUrl?e.iframeUrl:u.isCheckout?pn.getEndpointRoot(!0)+"/checkout/offer/show":O(),I=e.postMessageUrl?e.postMessageUrl:O();e.deferredContextLoading&&e.initContextLoadPromise(e,z(u));var E=G(u,e);if(pn.pianoId.__protected__.isSssEnabled()){var x=pn.pianoId.__protected__.getSssParams();u.sss_mode=x.sss_mode,u.sss_callback_url=x.sss_callback_url,u.sss_origin_url=x.sss_origin_url}var T=s.createContainer({url:C,config:e,parent:e.parent,postMessageUrl:I,receive:M,iframeParams:u,singleContainer:e.singleContainer,close:function(){A.fireCallbacks("close",{state:w},u.iframeId,!0)}}),N=C.indexOf("/offer/")?"offerShow":"templateShow";return p.setTime(N),P=C.indexOf("/template/")&&u.offerId===s.fakeOfferId?u:P,T.statParams=E,T.browserId=e.browserId,v.push(T),T}var V=function(e){var t=0,n="offer_"+d.hash(e.iframeUrl+"?"+e.buildQueryStringFn(e,r),20);return E.has(n)&&(t=E.get(n)+1),E.set(n,t),n+"-"+t},q=function(e){var t=o.getQueryParamByName("termId"),n=o.getQueryParamByName("paySource");t&&(e.termId=t),n&&(e.paySource=n)},z=function(e){var t={};return["tbc","trackingId","pageViewId","visitId","tags","contentCreated","contentSection","contentAuthor"].forEach((function(n){e[n]&&(t[n]=e[n])})),Object.keys(e).forEach((function(n){0===n.indexOf("tpcc_")&&(t[n]=e[n])})),t},G=function(e,t){var n={};return t.trackStatsOnShow||t.deferredContextLoading||(n=z(e),Object.keys(n).forEach((function(t){delete e[t]}))),n},H=function(e){var t=J(e.iframeParams,e.statParams);e.config.affiliateState&&(t.affiliateState=e.config.affiliateState),t.pageTitle=window.document.title,t.referrerUrl=window.document.referrer,i.send("trackStat",t,e.iframeId)},W=function(e){var t={browserId:e.browserId};i.send("passBrowserId",t,e.iframeId)},J=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n},Q=function(){I||(pn.gigya.registerCallback("userChanged",(function(e){if(e&&e.user_token){var r={token_list:e.access_token.value,user_token:e.user_token,userToken:e.user_token,cookie_domain:e.access_token.cookie_domain,user:e.user,allowReturnToStartState:k,termId:t};if(n)s.getIframe(n)?(i.send("externalLoginSuccess",r,n),delete r.termId,ie(r,n)):ie(r);else ie(r)}})),pn.gigya.registerCallback("logout",(function(){var e,r={};r.userProvider=a.getProvider().getName(),r.userToken=a.getProvider().getToken()&&a.getProvider().getToken().length>0?a.getProvider().getToken():"",r.noNeedStartCheckout=!0,n&&(e=s.getIframe(n)),e&&"inline"===e.config.displayMode&&s.closeModalContainer(),t="",n="",k=!1,ie(r)})),I=!0)},X=function(){I||(pn.janrain.registerCallback("userChanged",(function(e){if(e&&e.user_token){var r={token_list:e.access_token.value,user_token:e.user_token,userToken:e.user_token,cookie_domain:e.access_token.cookie_domain,user:e.user,allowReturnToStartState:k,termId:t};if(n)s.getIframe(n)?(i.send("externalLoginSuccess",r,n),delete r.termId,ie(r,n)):ie(r);else ie(r)}})),pn.janrain.addEventHandler("onCaptureSessionEnded",(function(){var e,r={};r.userProvider=a.getProvider().getName(),r.userToken=a.getProvider().getToken()&&a.getProvider().getToken().length>0?a.getProvider().getToken():"",r.noNeedStartCheckout=!0,n&&(e=s.getIframe(n)),e&&"inline"===e.config.displayMode&&s.closeModalContainer(),t="",n="",k=!1,ie(r)})),I=!0)},Y=function(){I||(pn.pianoId.setCallbacks({loggedIn:function(e){o.log("offer.js - piano id user logged in");var r={user_token:e.token,userToken:e.token,user:e.user,reloadAfterLogin:!0,termId:t};n?s.getIframe(n)?(i.send("externalLoginSuccess",r,n),oe(n,r),delete r.termId,ie(r,n)):ie(r):ie(r)},loggedOut:function(e){if(e.source!==b){var r={};r.userProvider=a.getProvider().getName(),r.userToken=a.getProvider().getToken()&&a.getProvider().getToken().length>0?a.getProvider().getToken():"",r.noNeedStartCheckout=!0,ie(r)}t="",n=""}}),I=!0)};function $(e){return s.showPreloadedContainer(e)}var K=function(e){var t=e.offerId===s.fakeOfferId?"showTemplate":"showOffer";A.hasCallback(t)&&A.fireCallbacks(t,e,void 0,!0)},Z=function(e){[{queryParam:"promo_code",configParam:"promoCode"}].forEach((function(t){var n=o.getQueryParamByName(t.queryParam);n.length&&(e[t.configParam]=n)}))},ee=function(e){if(e.offerId||!0===e.preview)return!function(e){var t=j(e);return!!h[t]}(e)&&(T=e.trackingId,e.preview||function(e){var t=j(e);h[t]=!0}(e),setTimeout((function(){D(e)}),1e4),void o.waitCall("refreshUserToken",(function(){o.waitCall("refreshAccessTokenList",(function(){o.waitCall("myAccountLogin",(function(){var t;if(o.startCall("offerCreate"),e.createIframeFn?(Z(e),t=e.createIframeFn(e)):t=B(e),!t)return o.doneCall("offerCreate"),void o.error("Could not initialize offer; check configuration");te(e)&&ne(t.iframeId),K(e)}))}))})));o.error("Must specify offerId")};var te=function(e){return!!e.directCheckout&&"inline"!==e.displayMode},ne=function(e){o.waitCall("offerCreate",(function(){i.send("startDirectCheckout",{},e)}))},re=function(e,t){if(!function(e){return!e.offerId&&!e.isRedemption&&!e.preview}(e)){var n=A.hasCallback("loginRequired");if(e.isSiteLicensing&&n&&(se()||ce()))return void f.refreshUser(P.iframeId);s.hasModalIframe()&&s.closeModalContainer(),o.debug("creating checkout: ",e),e.displayMode="popup"===e.displayMode?"popup":"modal",e.isCheckout=!0,e.parent=t,o.waitCall("refreshUserToken",(function(){o.waitCall("refreshAccessTokenList",(function(){var n;if(o.startCall("offerCreate"),pn.pianoId.__protected__.isGmSso()){if(pn.pianoId.__protected__.isGmSsoRedirectEnabled()&&!pn.pianoId.getToken())return void pn.pianoId.__protected__.authByGmSsoRedirect(e);e=function(e){return Object.assign({},e,{isGmSso:!0})}(e)}n=e.createIframeFn?e.createIframeFn(e):B(e),s.__protected__.addChildToInlineIframe(n,t),n?_&&o.waitCall("offerCreate",(function(){_=!1;var e={};e.userProvider=a.getProvider().getName(),a.getProvider().getToken()&&a.getProvider().getToken().length>0?e.userToken=a.getProvider().getToken():e.userToken="",e.noNeedStartCheckout=!0,e.noNeedStartCheckoutAfterLogin=!0,ie(e,n.iframeId)})):(o.doneCall("offerCreate"),o.error("Could not start checkout; check configuration"))}))}))}},oe=function(e,t){i.send("reloadOffer",t,e)},ie=function(e,t){i.broadcast("reloadOffer",e,t)},ae=function(e,t){var n={reloadAfterLogin:!0};return Object.assign(n,e.config),n.singleContainer&&delete n.singleContainer,t.termId&&(n.termId=t.termId),t.term&&(n.term={},n.term=J(n.term,t.term)),t.startScreen&&(n.startScreen=t.startScreen),t.isRedemption&&(n.isRedemption=t.isRedemption,n.voucherCode=t.redemption&&t.redemption.form&&t.redemption.form.redeemCode,n.termId=null),t&&t.currentState&&"modal"===e.config.displayMode&&(n.allowReturnToStartState=!0),t.preventExternalLogin&&(n.preventExternalLogin=t.preventExternalLogin),t.sharedAccountCode&&(n.sharedAccountCode=t.sharedAccountCode),t.isSiteLicensing&&(n.isSiteLicensing=t.isSiteLicensing),t.campaignCode&&(n.campaignCode=t.campaignCode),t.campaignGroupId&&(n.campaignGroupId=t.campaignGroupId),n.displayMode="modal",n},se=function(){return"publisher_user_ref"===a.getProvider().getName()},ce=function(){return"piano_id_lite"===a.getProvider().getName()};return{name:"offer",show:function(e){"inline"===e.displayMode?s.operationWithContainer(e.containerSelector,(function(){ee(e)})):ee(e)},deferredShow:function(e){return function(e){var t,n,r,i=new Promise((function(e,r){t=e,n=r})),a=new Promise((function(e,t){r=e}));return"popup"!==e.displayMode&&e.offerId?o.waitCall("refreshAccessTokenList",(function(){var i;e.isPreload=!0,o.startCall("offerCreate"),e.createIframeFn?(Z(e),i=e.createIframeFn(e)):i=B(e),i?(i.element.onload=function(){r(i)},t(i)):(o.doneCall("offerCreate"),o.error("Could not initialize offer; check configuration"),n())})):n(),{promise:i,show:function(){i.then($).then((function(){return a})).then((function(t){H(t),te(e)&&ne(t.iframeId),K(e)}),(function(){ee(e),delete e.isPreload}))}}}(e)},close:function(){s.closeModalContainer()},closeInline:function(e){s.__protected__.closeInlineContainers(e)},startCheckout:re,startRedeemVoucher:function(e,t){s.closeModalContainer(),e||(e={}),e.isRedemption=!0,o.debug("starting redeem voucher: ",e),e.displayMode="popup"===e.displayMode?"popup":"modal",e.isCheckout=!1,e.parent=t,o.waitCall("refreshAccessTokenList",(function(){o.startCall("offerCreate"),(e.createIframeFn?e.createIframeFn(e):B(e))||(o.doneCall("offerCreate"),o.error("Could not start redeem; check configuration"))}))},createOfferIframe:B,showBackdrop:function(){s.showBackdrop()},hideBackdrop:function(){s.hideBackdrop()},centerBackdrop:function(e){s.centerBackdrop(e)},registerCallback:function(e,t){A.addEvent(e),A.registerCallback(e,t)},reload:oe,reloadAll:function(e,t){var n=e||{};o.waitCall("refreshUserToken",(function(){ie(Object.assign(n,{userToken:pn.user.getProvider().getToken()}),t)}))},resetUserAndReloadAll:function(e,t){var n=e||{};ie(Object.assign(n,{userToken:""}),t)},checkThreeDSRedirect:function(){var e="pn_rurl_3ds",t=o.getQueryParamByName(e);if(t){s.closeModalContainer();var n={offerId:"pn_offer_id",oid:"pn_oid",termId3ds:"pn_term_id",providerId:"pn_provider_id",thirdPartyParams:"third_party_params"},r=[e],i=Object.keys(n).reduce((function(e,t){var i=Object.assign({},e);return i[t]=o.getQueryParamByName(n[t]),r.push(n[t]),i}),{});o.removeQueryParamByName(r),ee(Object.assign({displayMode:"modal",rurl_3ds:t},i))}}}}()}),pn.offer=pn.container.resolve("offer");var Jt=function(){var e,t=pn.container.resolve("jqUtils"),n=pn.container.resolve("util"),r=pn.container.resolve("postmessage"),o=pn.container.resolve("offer"),i=pn.container.resolve("user"),a=pn.container.resolve("containerUtils"),s=pn.container.resolve("pianoId"),c=pn.container.resolve("logging"),u={},l=!1,d={loginRequired:[],loginSuccess:[]},p=function(){return pn.getEndpointRoot()+"/checkout/myaccount/show"},f=function(e,t){e.element.style.height=(e.config.maxHeight?Math.min(t.height,e.config.maxHeight):t.height)+"px",e.container.style.height=(e.config.maxHeight?Math.min(t.height,e.config.maxHeight):t.height)+"px",e.element.style.width=t.width+"px","modal"===e.config.displayMode&&(e.container.style.width=t.width+"px"),r.send("resized",{height:e.config.maxHeight?Math.min(t.height,e.config.maxHeight):t.height,width:t.width},e.iframeId)},m=function(n,r,i){return function(){e&&(t.removeClass("tp-active",e),o.hideBackdrop(),window.setTimeout((function(){t.remove(e)}),250),r.result=i,n(r))}},g=function(e){var n=t.winSize();e.offsetHeight>n.height?(!1===l&&(e.style.position="absolute",l=!0),e.style.marginTop=window.scrollY-.5*n.height+""):(!0===l&&(e.style.position="fixed",l=!1),e.style.marginTop=0-.5*e.offsetHeight+""),o.centerBackdrop(e),e.style.marginLeft=0-.5*e.offsetWidth+""},v=function(n,i){!function(n,r){var i=document.createElement("div");t.addClass("tp-modal",i);var a=document.createElement("div");t.addClass("tp-close",a);var s=document.createElement("div");t.addClass("tp-message",s),i.style.width=(n.width?n.width:400)+"px",s.innerHTML=n.message;var c=document.createElement("div");t.addClass("tp-btn-container",c);var u=document.createElement("button");t.addClass("tp-btn",u),t.addClass("tp-ok-btn",u),u.innerHTML=n.ok?n.ok:"Ok";var l=document.createElement("button");t.addClass("tp-btn",l),t.addClass("tp-cancel-btn",l),l.innerHTML=n.cancel?n.cancel:"Cancel",t.on(a,"click",m(r,n,"cancel")),t.on(l,"click",m(r,n,"cancel")),t.on(u,"click",m(r,n,"ok")),t.append(i,a),t.append(i,s),t.append(c,u),t.append(c,l),t.append(i,c),t.append(document.body,i),o.showBackdrop(),t.addClass("tp-active",i),g(i),e=i}(i.params,(function(e){r.send("closeDialog",e,u[i.sender].iframeId)}))},h=function(e,t){d[e]=d[e]||[],d[e].push(t)},y=function(e,t,o){if(n.debug("received event: "+e,t),void 0!==d[e]){for(var i=0;i<d[e].length;++i){n.debug("firing callback for event: "+e);var a=d[e][i](t);t&&t.resultCallbackId&&(t.result=a,t.event=e,r.send("resultCallback",t,o))}!d[e].length&&t&&t.resultCallbackId&&(t.callbackNotFound=!0,t.event=e,r.send("resultCallback",t,o))}},w=function(e){switch(n.log("*** My account event received",e.event,e.params),e.event){case"resize":n.debug("*** Resize event",e.params.width,e.params.height),f(u[e.sender],e.params),"modal"===u[e.sender].config.displayMode&&g(u[e.sender].container);break;case"loaded":r.send("initMaxHeight",{height:u[e.sender].config.maxHeight},u[e.sender].iframeId),f(u[e.sender],e.params),"pianoId"===i.getProvider().name&&s.__protected__.executePostMessagesBatch(),"modal"===u[e.sender].config.displayMode&&window.setTimeout((function(){t.addClass("tp-active",u[e.sender].container),g(u[e.sender].container)}),25);break;case"cancel":case"complete":case"error":case"loginRequired":case"customEvent":y(e.event,e.params,e.sender);break;case"openDialog":v(e.event,e);break;case"pianoIdProfileUpdated":s.onProfileUpdate(e.params,(function(){var t=e.params;t&&t.resultCallbackId&&r.send("resultCallback",t,e.sender);var n={userToken:e.params.token,user:e.params.user};b(n)}));break;case"extendedUserLoginRequired":s.onExtendedUserLoginRequired();break;case"loginSuccess":i.getProvider().onLoginSuccess(e.params);var o={reloadAfterLogin:!0,userToken:e.params.user_token,user:e.params.user};b(o),y(e.event,e.params,e.sender);break;case"logout":i.logout((function(){var e={};e.userProvider=i.getProvider().getName(),e.userToken=i.getProvider().getToken()&&i.getProvider().getToken().length>0?i.getProvider().getToken():"",b(e)})),y(e.event,e.params,e.sender);break;case"userProfileUpdateSuccess":var a=e,c=a.event,l=a.params,d=a.sender;i.getProvider().onLoginSuccess(l);var p={userProvider:l.user_provider,userToken:l.user_token};for(var m in b(p),y(c,l,d),u)if(u.hasOwnProperty(m)){var h=u[m].config;h.hasOwnProperty("userToken")&&delete h.userToken,C(h)}break;case"langChangedWithinMyAccount":s.isConfigured()&&s.updateLang(e.params.lang);break;case"requestScrollData":_(e.sender);break;case"downForMaintenance":f(u[e.sender],{width:300,height:200});break;case"removeQueryParamByName":Array.isArray(e.params.paramsToRemove)&&e.params.paramsToRemove.forEach((function(e){n.removeQueryParamByName(e)}));break;case"getTrackingData":r.send("getTrackingDataResponseEvent",{pageViewId:pn.main.fetchPageViewId(),tbc:n.getTbcCookie()},e.sender);break;case"redirect":document.location.href=e.params.url;break;default:return void n.log("Received invalid event type: "+e.event)}},b=function(e){r.broadcast("reloadOffer",e)},_=function(e){var t=u[e].element.getBoundingClientRect(),n={iframeRect:{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}};r.send("returnScrollData",n,e)};function k(e){var o={widget:"myaccount"};if(e.templateId&&(o.templateId=e.templateId),void 0===e.displayMode)e.displayMode="inline";else if("modal"!==e.displayMode&&"inline"!==e.displayMode)return void n.log("Invalid offer displayMode; must be one of: modal, inline");if(o.displayMode=e.displayMode,o.iframeId=n.randomString(16),o.url=window.location.href,o.initialWidth=e.width,o.initialHeight=e.height,o.maxHeight=e.maxHeight,i.getProvider().getName()===s.getName()&&s.__protected__.isSssEnabled()){var l=s.__protected__.getSssParams();o.piano_id_sss_mode=l.sss_mode,o.piano_id_sss_callback_url=l.sss_callback_url,o.piano_id_sss_origin_url=l.sss_origin_url}if(pn.locale&&(o.lang=pn.locale),!pn.janrain.isConfigured()||void 0!==e.loginRequired&&e.loginRequired)if(!pn.gigya.isConfigured()||void 0!==e.loginRequired&&e.loginRequired)if(pn.pianoId.isConfigured()){_=e;if(pn.pianoId.setCallbacks({loggedIn:function(t){var n;o.userToken!==t.token&&(e.loginSuccess&&(n=e.loginSuccess(t)),(void 0===n||n)&&(_.userToken=t.token,C(_)))},loggedOut:function(){var e={};e.userProvider=i.getProvider().getName(),e.userToken=i.getProvider().getToken()&&i.getProvider().getToken().length>0?i.getProvider().getToken():"",b(e)}}),void 0===e.loginRequired||!e.loginRequired){var m=0;e.loginRequired=function(){if(++m>10)n.log("Too many attemps to login for myAccount");else{var e=n.getQueryParamByName("verification_code"),t=pn.pianoId.__protected__,r=t.isGmSso,o=t.isGmSsoRedirectEnabled;!(r()&&o())&&pn.pianoId.show({verificationCode:e})}}}o.pianoIdUrl=pn.pianoId.getIframeUrl();var v=pn.pianoId.getLang();v&&(o.lang=v),pn.pianoId.onLangChange((function(e){r.send("langChanged",{lang:e},o.iframeId)}),o.iframeId)}else pn.pianoIdLite.isConfigured()&&(o.pianoIdUrl=pn.pianoId.getIframeUrl());else{y=[];pn.gigya.registerCallback("onHide",(function(){a.activateContainers(y),n.doneCall("myAccountLogin")})),e.loginRequired=function(){var t=e;n.waitCall("refreshAccessTokenList",(function(){n.waitCall("offerCreate",(function(){n.startCall("myAccountLogin"),y=a.hideModalContainer(),pn.gigya.login((function(n){var r;e.loginSuccess&&(r=e.loginSuccess(n)),(void 0===r||r)&&(t.userToken=n.user_token,C(t))}))}))}))}}else{var y=[],_=e;pn.janrain.addEventHandler("onModalClose",(function(){a.activateContainers(y),n.doneCall("myAccountLogin")})),pn.janrain.registerCallback("userChanged",(function(t){var n;t&&t.user_token&&(e.loginSuccess&&(n=e.loginSuccess(t)),(void 0===n||n)&&(_.userToken=t.user_token,C(_)))})),pn.janrain.addEventHandler("onCaptureSessionEnded",(function(t){var n;e.loginSuccess&&(n=e.loginSuccess(t)),(void 0===n||n)&&(_.userToken=null,C(_))})),e.loginRequired=function(){return n.waitCall("refreshAccessTokenList",(function(){n.waitCall("offerCreate",(function(){n.startCall("myAccountLogin"),y=a.hideModalContainer(),pn.janrain.login()}))})),!1}}return new Promise((function(s){n.waitCall("refreshUserToken",(function(){var l,m={};if("inline"===e.displayMode){if(!e.containerSelector)return void n.log("My account must have a valid containerSelector");if(!(l=t.queryEl(e.containerSelector)))return void n.log("My account must have a valid containerSelector");o.width=t.getWidth(l)}else l=function(){var e=document.createElement("div");t.addClass("tp-modal",e);var n=document.createElement("div");return t.addClass("tp-close",n),t.append(e,n),t.append(document.body,e),e}();for(var v in o.pageViewId=pn.main.fetchPageViewId(),o.tbc=n.getTbcCookie(),o.userProvider=i.getProvider().getName(),e.userToken?o.userToken=e.userToken:o.userToken=i.getProvider().getToken(),d)"function"==typeof e[v]&&(n.debug("Registering "+v+" callback for iframe "+o.iframeId),h(v,e[v]));o.aid=pn.aid,pn.isSensitiveDataProtectionEnabled&&(m={userToken:o.userToken,iframeId:o.iframeId},delete o.userToken);var y=p()+"?"+t.param(o),b=document.createElement("iframe"),_={scrolling:"no",allowtransparency:"true",name:o.iframeId,id:o.iframeId,allow:"payment"};pn.isSensitiveDataProtectionEnabled||(_.src=y),Object.keys(_).forEach((function(e){t.setAttr(e,_[e],b)}));var k={overflow:"hidden",border:"0",height:"0"};if("inline"===e.displayMode?k.width=o.width+"px":k.width=0,Object.keys(k).forEach((function(e){b.style[e]=k[e]})),u[o.iframeId]={iframeId:o.iframeId,config:e,element:b,container:l,containerWidth:t.getWidth(l),containerHeight:t.getHeight(l)},r.init({postMessageUrl:p(),receive:w,iframe:u[o.iframeId]}),t.on(window,"keyup",(function(e){})),"modal"===e.displayMode&&t.on(window,"resize",(function(){g(l)})),"modal"===e.displayMode?g(l):t.empty(l),pn.isSensitiveDataProtectionEnabled){m.iframeSrc=y;var C=a.getForm(m);t.append(l,b),t.append(l,C),C.submit()}else t.append(l,b);if(t.on(window,"resize",(function(){!function(){for(var e in u){var n=u[e],o=!1,i=t.getWidth(n.container);i!==n.containerWidth&&(n.element.style.width=i+"",n.containerWidth=i,o=!0);var a=t.getHeight(n.container);a!==n.containerHeight&&(n.element.style.height=a+"",n.containerHeight=a,o=!0),o&&r.send("resize",{width:i,height:a},e)}}()})),"inline"===e.displayMode&&window.ResizeObserver){var I=new ResizeObserver((function(e){var n=t.getWidth(l);n>0&&f(u[o.iframeId],{width:n})}));I.observe(l),u[o.iframeId].resizeObserver=I}pn.offer&&pn.offer.registerCallback("complete",(function(){r.send("refreshNow",{},o.iframeId)})),s(u[o.iframeId]),c.setTime("myAccountShow")}))}))}var C=function(e){n.waitCall("offerCreate",(function(){n.waitCall("refreshAccessTokenList",(function(){var t;null===(t=k(e))||void 0===t||t.then((function(e){e||n.log("Could not initialize my account; check configuration")}))}))}))};return{name:"myaccount",show:C,registerCallback:h}}();pn.container.register("myaccount",{useValue:Jt}),pn.myaccount=pn.container.resolve("myaccount");var Qt=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("util"),n=pn.container.resolve("api"),r=pn.container.resolve("offer"),o=pn.container.resolve("eventUtils").createEventManager(["onCheckoutSuccess","onMeterExpired","onMeterError","onAccessGranted","onMeterActive","onMeterInactive","meterSelector"]),i={state:"ok",views_left:null,offer_id:"",curtain_template_id:"",reminder_template_id:"",cookie_name:"",cookie_value:"",cookie_expires:"",show_reminder:!1,show_close_button:!1},a=function(e,n){return o.fire(void 0,e,!0,n),!l[e]||"function"!=typeof l[e]||(t.debug("_customCaller called with "+e),l[e](n))},s=function(t){(t=t||{}).offerId||(t.offerId=i.offer_id),t.templateId||(t.templateId=i.curtain_template_id),t.displayMode||(t.displayMode=l.displayMode),t.containerSelector||(t.containerSelector=l.containerSelector),t.showCloseButton||(t.showCloseButton=i.show_close_button),"function"===e.type(l.close)&&(t.close=l.close),"function"===e.type(l.loginRequired)&&(t.loginRequired=l.loginRequired),"function"===e.type(l.customEvent)&&(t.customEvent=l.customEvent),"function"===e.type(l.onCheckoutSuccess)&&(t.complete=l.onCheckoutSuccess),r.createOfferIframe(t)},c=function(e){if(a("___onProcessMeter",e),!e.user_meter)return t.log("Could not load meter",e),void function(e){a("onMeterError",e)}(e);if((i=e.user_meter)&&i.cookie_name&&i.cookie_value&&i.cookie_expires){var n={path:"/",expires:i.cookie_expires};i.cookie_domain&&(n.domain=i.cookie_domain),t.__protected__.setCookie(i.cookie_name,i.cookie_value,n)}"ok"===i.state?function(e){t.debug("_handleMeterActive",e),e.show_reminder&&e.reminder_template_id&&e.track_page_view&&a("onShowOffer",e)&&s({templateId:e.reminder_template_id}),a("onMeterActive",e)}(i):"ap"===i.state?function(e){t.debug("_handleAccessGranted",e),a("onAccessGranted",e)}(i):"ia"===i.state?function(e){t.debug("_handleMeterInactive",e),a("onMeterInactive",e)}(i):function(e){t.debug("_handleExpired",e),a("onMeterExpired",e),e.track_page_view&&a("onShowOffer",e)&&s()}(i)},u=function(e,r,o){if(null!==l.paywallId&&""!==l.paywallId){var i=document.URL;e&&"function"==typeof e.getAttribute&&e.getAttribute("href")?i=e.getAttribute("href"):e&&"function"==typeof e.attr&&e.attr("href")&&(i=e.attr("href"));var a=l.trackPageview;a&&delete l.trackPageview;var s=l.meterSelector();s||(s="");var u={paywall_id:l.paywallId,url:encodeURI(i),referer:encodeURI(l.referer),track_page_view:a,meter_name:s,pageview_id:pn.main.fetchPageViewId()};r&&(u.transaction_id=r),l.referer="";var d=t.__protected__.getCookie("umc");if(d)u.umc=d;else{var p=t.__protected__.getCookie("umc_"+l.paywallId);p&&(u.umc=p)}n.callApi("/anon/meter/load",u,(function(e){c(e),"function"==typeof o&&o()}))}else t.debug("You must specify a paywallId in your configuration")},l={paywallId:null,trackPageview:!0,trackExternalReferrer:!0,referer:document.referrer,offerURL:"",displayMode:"modal",containerSelector:"",onCheckoutSuccess:function(){},onMeterExpired:function(){},onMeterError:function(){},onAccessGranted:function(){},onMeterActive:function(){},onMeterInactive:function(){},meterSelector:function(){}};return{name:"meter",init:function(e){if(void 0!==e)if(void 0!==e.paywallID||void 0!==e.paywallId){for(var n in void 0===e.paywallId&&(e.paywallId=e.paywallID),e)l[n]=e[n];l.referer=document.referrer,t.debug("Initializing paywall: "+l.paywallId),u()}else t.error("Must specify paywallId to load Piano paywall");else t.error("Must specify paywall configuration to load Piano paywall")},isExpired:function(){return i.state&&"ex"===i.state},isExpiredNextClick:function(){return void 0!==i.views_left&&0===i.views_left},checkMeter:function(e){l.trackPageview=!0,u(e)},showCurtain:s,last:function(){return i},registerCallback:function(e,t){o.addEvent(e),o.registerCallback(e,t)}}}();pn.container.register("meter",{useValue:Qt}),pn.meter=pn.container.resolve("meter");var Xt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("sha1"),n="",r=function(){var e="";return["ShockwaveFlash.ShockwaveFlash.6","ShockwaveFlash.ShockwaveFlash.7","SWCt1.SWCt1.9","SWCtl.SWCtl","Adobe.SVGCtl","WMPlayer.OCX","AgControl.AgControl","AcroPDF.PDF","PDF.PdfCtrl","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealPlayer","Skype.Detection","3dmlw.IEPlugin","GoogleTalk.Plugin","GoogleTalk.Plugin.1"].map((function(t){try{new window.ActiveXObject(t),e+=t+"|"}catch(e){}})),e},o=function(){if(n)return n;var o=function(){try{var e;return e=window.navigator.userLanguage||window.navigator.language,(new Date).getTimezoneOffset()+":"+e}catch(e){return""}}();return o+=function(){if(window.ActiveXObject)return r();try{var e="",t=navigator.plugins.length;if(t>0)for(var n=0;n<t;n++)e+=navigator.plugins[n].name+"|";return e}catch(e){return""}}(),o+=function(){try{return screen.height+"x"+screen.width+"+"+screen.colorDepth}catch(e){return""}}(),o+=navigator.userAgent,o+=function(){var e="";try{e+=document.getElementById?1:0,e+=window.getComputedStyle?1:0,e+=screen.globalStorage?1:0,e+=window.localStorage?1:0,e+=window.sessionStorage?1:0,e+=document.getElementsByClassName?1:0,e+=document.querySelector?1:0,e+=document.all?1:0,e+=window.attachEvent?1:0,e+=window.createPopup?1:0,e+=window.XMLHttpRequest?1:0,e+=window.ActiveXObject?1:0,e+=window.XDomainRequest?1:0,e+=window.msPerformance?1:0,e+=document.documentMode?1:0,e+=navigator.cpuClass?1:0,e+=navigator.browserLanguage?1:0,e+=window.opera?1:0,e+=window.chrome?1:0}catch(e){}return e}(),n=t.hash(o),e.debug("Current browser fingerprint is: "+n),n};return o(),{name:"fingerprint",getFingerprint:o}}();pn.container.register("fingerprint",{useValue:Xt}),pn.fingerprint=pn.container.resolve("fingerprint");var Yt=function(){var e,t=pn.container.resolve("jqUtils"),n=0,r=0,o=200,i=0,a=[];t.on(window,"scroll",(function(){c()}));var s=function(){var e=t.scrollTop();e>i&&(i=e)},c=function(){s(),l()},u=function(e){if(e.consumeEventFn()){if("pixels"===e.measureType)return e.position<=i;if("percentage"===e.measureType)return i/(n-t.winSize().height)>=e.position/100}},l=function(){for(var e,t=[],n=[],r=0;r<a.length;r++)e=a[r],u(e)?t.push(e):n.push(e);a=n;for(r=0;r<t.length;r++)t[r].callback()};return{name:"scrollDepth",initialize:function(i){var a=document;i&&i>0&&(o=i||o);!function i(){var s=a.body||{},c=a.documentElement||{},u=Math.max(s.scrollHeight,c.scrollHeight,s.offsetHeight,c.offsetHeight,s.clientHeight,c.clientHeight);u>n&&(n=u);var l=t.scrollTop()+t.winSize().height;l>r&&((r=l)>n&&(n=r)),e&&clearTimeout(e),e=setTimeout(i,o)}()},getMaxScrollDepth:function(){return r},getMaxDocumentHeight:function(){return n},addListener:function(e,t,n){"function"!=typeof n&&(n=function(){return!0}),a.push({callback:e,position:t.scrollDepth,measureType:t.measureType,repeat:"once",consumeEventFn:n}),s(),l()},removeListeners:function(){a=[]},clearMaxScrolledPosition:function(){i=0,r=0,n=0}}}();pn.container.register("scrollDepth",{useValue:Yt}),pn.scrollDepth=pn.container.resolve("scrollDepth");var $t=function(){var e,t=pn.container.resolve("util"),n=pn.container.resolve("jqUtils"),r=!1,o=[];function i(){r||(r=!0,n.on(document,"mousemove",(function(){return s()})),n.on(document,"keypress",(function(){return s()})),n.on(window,"scroll",(function(){return s()})))}function a(){o.length&&function(){for(var e,n,r=[],i=[],a=Date.now(),s=0;s<o.length;s++)n=!1,a-(e=o[s]).startTime>=e.idleTime&&(e.consumeEventFn()?n=!0:e.startTime=a),n?r.push(e):i.push(e);r.length&&t.debug("idle: run fire"),o=i;for(s=0;s<r.length;s++)(e=r[s]).callback()}(),e&&clearTimeout(e),o.length&&(e=setTimeout((function(){return a()}),200))}function s(){for(var t=Date.now(),n=0;n<o.length;n++)o[n].startTime=t;clearTimeout(e),o.length&&(e=setTimeout((function(){return a()}),200))}return{name:"idle",initialize:i,addListener:function(t,n,r){i(),"function"!=typeof r&&(r=function(){return!0}),o.push({callback:t,idleTime:1e3*n,startTime:Date.now(),consumeEventFn:r}),e||(e=setTimeout((function(){return a()}),200))},removeListeners:function(){o=[]}}}();pn.container.register("idle",{useValue:$t}),pn.idle=pn.container.resolve("idle");var Kt=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("jqUtils"),n=[];return{name:"interaction",bind:function(r,o,i){var a=function(e){for(var t={click:"click",doubleClick:"dblclick",rightClick:"contextmenu",mouseOut:"mouseout",mouseIn:"mouseover"},n=[],r=0;r<e.length;r++){var o=e[r];n.push(t[o])}return n};"function"!=typeof i&&(i=function(){return!0}),e.__protected__.documentReady((function(){for(var e=0;e<o.length;e++){var s=o[e],c=a(s.elementActions).join(" "),u=s.elementSelector,l=s.repetitive;c.trim().length&&function(e,o,a){var s=function(){!i()||(a||t.undelegate(document.body,e),r())};t.delegate(document.body,e,o,s),n.push({action:c,selector:u,func:s})}(u,c,l)}}))},unbindAll:function(){n.forEach((function(e){t.undelegate(document.body,e.selector)})),n=[]}}}();pn.container.register("interaction",{useValue:Kt}),pn.interaction=pn.container.resolve("interaction");var Zt=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("util"),n=pn.container.resolve("containerUtils"),r=function(e){return"inline"===e.displayMode},o=function(e){return"modal"===e.displayMode};return{name:"recWidgetService",__protected__:{getInstance:function(){var i,a=[];function s(t){var s=t||{},c=s.widget||{};r(c.config)?e.empty(c.container):o(c.config)&&(function(t){if(i){n.closeModal(i),e.empty(i.container);var r=n.__private__.mobileModalFix;r.isIphoneCaretFixed&&r.modalClosed(),i=null}}(),e.remove(c.container)),!s.skipOnclose&&e.isFunction(c.onclose)&&c.onclose(),a=a.filter((function(e){return e.uuid!==c.uuid}))}function c(e){return a.filter((function(t){return e===t.widgetId}))[0]}return{showRecommendation:function(u){var l=u.widgetConfig||{},d=u.createPlaceholderFn,p=l.widgetId;if(!p)throw new Error("widgetId should be specified");if(c(p))t.log("widget with id "+l.widgetId+" already initialize");else if(o(l)&&i)t.log("modal widget already shown");else{var f=function(n){var r=e.queryEl(n.containerSelector),o="widget-id-"+t.randomString(),i={singleContainer:r||void 0,displayMode:n.displayMode||"modal",showCloseButton:n.showCloseButton,iframeParams:{iframeId:o,containerSelector:n.containerSelector,width:n.width,height:n.height}};return{uuid:o,widgetId:n.widgetId,placeholder:n.placeholder,trackingId:n.trackingId,config:i}}(l),m=f.config,g=d();if(f.container=function(e,t){var i;return r(e)?i=n.initInlineContainer(e).container:o(e)&&(i=n.getModalContainer(e,(function(){t instanceof Function&&t()}))),i}(m,(function(){s({widget:f})})),f.container)return e.append(f.container,g),f.element=g,o(m)&&(i=f),function(t,n){void 0===n&&(n={}),Object.keys(n).forEach((function(r){e.isFunction(n[r])&&(t[r]=n[r](t))}))}(f,u.widgetCallbacks),a.push(f),f;t.log('widget has invalid selector "'.concat(m.iframeParams.containerSelector,'"'))}},fireWidgetCallback:function(t,n,r){a.forEach((function(o){if(o.widgetId===n.toString()){var i=o["on"+t];e.isFunction(i)&&i(r)}}))},findWidget:c,clearWidgets:function(){a=[],i=null},closeWidget:s,fixWidgetModalWidth:function(t,r){if(!t||o(t.config)){var i=t.container,a=r?e.queryEl("iframe",i):e.queryEl(".tp-widget-placeholder",i);n.checkBackdropAndContainer(t,!0,!0),setTimeout((function(){a&&n.__protected__.setElementSizes(i,{width:e.getWidth(a)})}),100)}}}},insertWidgetLib:function(t){var n=document.getElementsByTagName("script")[0],r=document.createElement("script");t.id&&r.setAttribute("id",t.id),e.isFunction(t.onerror)&&(r.onerror=t.onerror),e.isFunction(t.onload)&&(r.onload=t.onload),t.defer&&(r.defer=!0),r.type="text/javascript",r.src=t.src,n&&n.parentNode&&n.parentNode.insertBefore(r,n)}}}}();pn.container.register("recWidgetService",{useValue:Zt}),pn.recWidgetService=pn.container.resolve("recWidgetService");var en=function(){pn.container.resolve("predefinedOptions");return{testPianoOption:""}}();pn.container.register("piano",{useValue:en});var tn,nn=pn.container.resolve("piano");for(tn in nn)pn[tn]=nn[tn];pn.container.register("pianoEsp",{useValue:function(e){void 0===e&&(e=pn.container);var t,n=e.resolve("util"),r=e.resolve("user"),o=(e.resolve("api"),e.resolve("jqUtils")),i=e.resolve("consent"),a=e.resolve("analytics"),s=e.resolve("recWidgetService"),c="__pnml",u={granted:"ALLOWED",default:"UNKNOWN",denied:"FORBIDDEN"},l=s.__protected__.getInstance();function d(){return t||(t=new Promise((function(e,t){var r=window.PianoESPConfig||{};r.id?(Object.assign(r,{onload:function(){return e(null)},widget_init_on_event:{rec:!0,"opt-in":!1},onclick:function(e){l.fireWidgetCallback("click",e.widgetId,e)},onwidgetinit:function(e){l.fireWidgetCallback("init",e.widgetId,e)},onrecsloaded:function(e){l.fireWidgetCallback("recsloaded",e.widgetId,e)}}),window.PianoESPConfig=r,n.debug("pianoESP: loading PianoESP with config:",window.PianoESPConfig),s.__protected__.insertWidgetLib({id:"pnesplucidsdksel",src:p()+"/public/sdk/v04/sdk.js?v="+(localStorage&&localStorage.lucidsdkver||"xxx"),onerror:function(){return t()}})):t()})))}setTimeout((function(){pn.addHandler("logout",(function(){m([])}));var e=r.getProvider();e.registerCallback&&e.registerCallback("logout",(function(){m([])}))}),300);var p=function(){var e="//api-esp.piano.io";return pn.espEndpoint?e=pn.espEndpoint:pn.isSandbox()&&(e="//sandbox-api-esp.piano.io"),e},f=function(e,t){d().then((function(){window.PianoESP.getCurrentPushState().then((function(e){"prompt"===e&&a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t,eventGroupId:"showPrompt"}})})),window.PianoESP.subscribeToPushSquads([e]).then((function(r){var o=r||{};!0===o.result?(n.setPushListsCookie(e),n.debug("pianoESP: Push notification was set:",o),a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t,eventGroupId:"enrollPushCampaign"}})):!1===o.result&&("closed"===o.reason?a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t,eventGroupId:"closePrompt"}}):a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t,eventGroupId:"declineEnrollPushCampaign"}}))})).catch((function(e){n.log("pianoESP: Push notification error:",e)}))}))},m=function(e){try{var t=JSON.stringify(e);i.composer?i.composer.localStorage.set(c,t):localStorage.setItem(c,t)}catch(e){n.debug("can't save mailing lists to storage",e)}},g=function(){var e=[];try{var t=localStorage.getItem(c);if(!t)return[];if(e=JSON.parse(t),!Array.isArray(e))throw new Error("MAINLING_LIST should be array")}catch(e){n.debug("can't load mailing lists from storage",e)}return e||[]};var v=function(e){return function(){var t=document.createElement("pnespwgtplaceholder");return o.setAttr("holdername",e,t),t}};function h(){return{onrecsloaded:function(e){return function(t){0!==t.countOfRecs?(l.fixWidgetModalWidth(e,!0),a.log.event({eventType:St.LOG_ESP_MICRO_CONVERSION,payload:{trackingId:e.trackingId,espWidgetId:e.widgetId,eventGroupId:"init",eventType:It.EXTERNAL_EVENT}}),n.debug("creating recommendation widget: ",e.config)):l.closeWidget({widget:e,skipOnclose:!0})}},onclick:function(e){return function(t){var n={href:t.url};a.log.event({eventType:St.LOG_ESP_MICRO_CONVERSION,payload:{trackingId:e.trackingId,espWidgetId:e.widgetId,eventGroupId:"click",eventType:It.EXTERNAL_LINK,customParams:n}})}},onclose:function(e){return function(){a.log.event({eventType:St.LOG_ESP_MICRO_CONVERSION,payload:{trackingId:e.trackingId,espWidgetId:e.widgetId,eventGroupId:"close",eventType:It.EXTERNAL_EVENT,customParams:{event:"widgetClosed"}}})}}}}return{name:"pianoEsp",__protected__:{init:d,setVisitorId:function(e){window.PianoESPConfig=Object.assign({},window.PianoESPConfig,{visitor:e})},showRecommendation:function(e){var t=h();return l.showRecommendation({widgetConfig:e,widgetCallbacks:t,createPlaceholderFn:v(e.placeholder)}),d().then((function(){window.PianoESP.initWidget(parseInt(e.widgetId))}))},showPushSignup:function(e){var t=e||{};t.templateId?(a.log.event({eventType:St.LOG_CUSTOM_FORM_IMPRESSION,payload:{trackingId:t.trackingId,formName:"pushSignup",source:"show_form"}}),pn.template.show({templateId:t.templateId,templateVariantId:t.templateVariantId,displayMode:t.displayMode,containerSelector:t.containerSelector||null,showCloseButton:t.showCloseButton,customEvent:function(e){switch(e.eventName){case"push-allow":a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t.trackingId,eventGroupId:"allowSoftEnrollPushCampaign"}}),f(t.pushListId,t.trackingId);break;case"push-dont-allow":a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t.trackingId,eventGroupId:"declineSoftEnrollPushCampaign"}});break;case"push-close":a.log.event({eventType:St.LOG_MICRO_CONVERSION,payload:{trackingId:t.trackingId,eventGroupId:"close"}})}}})):f(t.pushListId,t.trackingId)},getNotificationStatus:function(){if(window.Notification)return u[window.Notification.permission]||u.default},showNewsletterSignup:function(e){if(e&&e.mailingListIds){var t=g().indexOf(e.mailingListIds)>-1;e.notShowIfFilled&&t?n.log("Mailing list with ids "+e.mailingListIds+" already shown"):pn.template.show(e)}else n.log("mailingListIds should be specified")},offerMessageReceiver:function(e){if("newsletterSignupSubmission"===e.event){var t=g();-1===t.indexOf(e.params.mailingListIds)&&(t.push(e.params.mailingListIds),m(t))}},loadCompleteMailingLists:g},__private__:{removeWidgetsAndSdk:function(){l.clearWidgets(),t=null,delete window.PianoESP},getWidgetCallbacks:h,onInit:function(e){!t||"function"==typeof e&&t.then(e)}}}}()}),pn.pianoEsp=pn.container.resolve("pianoEsp");var rn=function(){var e,t=pn.container.resolve("postmessage"),n=pn.container.resolve("user"),r=pn.container.resolve("util"),o=pn.container.resolve("eventUtils"),i=pn.container.resolve("containerUtils"),a="externalCheckoutComplete",s="loginPrompt",c="deferredAccountCreation",u="buy",l=o.createEventManager([a]),d=!1,p=!1,f=!1,m=[];window.SWG=window.SWG||[],window.SWG.push((function(t){t.setOnPaymentResponse((function(t){p||(r.debug("swg: onPaymentResponse is triggered"),p=!0,t.then((function(t){r.debug("swg: onPaymentResponse",t),e&&k(t,t.purchaseData,t.userData,e,u)})).catch((function(e){r.log("swg: onPaymentResponse failed",e)})))}))})),t.subscribe("swgCheckoutStart",(function(t){d||r.log("swg: incorrect SwG configuration. Please make sure that Experience user segment is configured properly. Details at https://docs.piano.io/subscribe-with-google/#SwGscript");var n=t.params.sku;e=t.params.termId,window.SWG.push((function(e){e.subscribe(n)}))}));var g=function(e){if(l.hasCallback(a)){var t={type:"swg",flow:e};l.fireCallbacks(a,t,void 0,!0)}},v=function(e){for(var t=!1,n=m.reduce((function(e,t){return e.concat(t.products)}),[]),r=0;r<e.length;r++)if(-1===n.indexOf(e[r])){t=!0;break}return t},h=function(e){if(d&&!f){var t=e||n.getProvider().getToken();!t||(f=!0,function(e){var t="/swg/sync";return"piano_id_lite"===n.getProvider().getName()&&(t+="/external"),new Promise((function(n,r){pn.api.callApi(t,{aid:pn.aid,access_token:e},(function(e){var t;0!==e.code&&r(),n(null!==(t=e.SwgResponse)&&void 0!==t?t:{products:[]})}))}))}(t).then((function(e){return e.products&&v(e.products)})).then((function(e){e&&function(e){window.SWG.push((function(t){t.saveSubscription((function(){return{token:e}})).then((function(e){!e&&r.log("swg: save subscription process was stopped")}))}))}(t),f=!1})).catch((function(e){r.log("swg: save subscription flow failed with error - ",e),f=!1})))}},y=function e(){h(),t.unsubscribe("purge",e)},w=function(){t.subscribe("loginSuccess",(function(e){if(i.hasModalIframe())t.subscribe("purge",y);else{var n=e.params.token||e.params.user_token;h(n)}})),t.subscribe("purge",(function(e){e.params.completePayment&&h()}))},b=function(e){return new Promise((function(t,n){pn.api.callApi("/swg/check",{entitlement:JSON.stringify(e)},(function(e){0!==e.code&&(r.log("swg: check subscription response - "+e.message),n()),t(e.CheckSubscriptionResponse)}))}))},_=function(e){return new Promise((function(t,n){pn.api.callApi("/swg/check/external",{entitlements:JSON.stringify(e)},(function(e){0!==e.code&&(r.log("swg: check external entitlement response - "+e.message),n());var o=e.data;o||(r.log("swg: check external entitlement empty response"),n()),t(o)}))}))},k=function(e,n,o,i,a){pn.api.callApi("/swg/subscribe",{term_id:i,purchase_data:JSON.stringify(n),user_data:JSON.stringify(o)},(function(n){if(0===n.code){var o=n.data;C(o),t.broadcast("swgCheckoutComplete"),e.complete().then((function(){g(a)})).catch((function(e){r.log("swg: complete failed:",e)}))}else r.log("swg: subscribe response - "+n.message)}))},C=function(e){e&&n.getProvider().loginByToken&&n.getProvider().loginByToken(e)},I=!1,S=!1;return{name:"swg",__protected__:{injectMarkup:function(e){var t;if(!I&&e){r.debug("swg: rendering swg markup with config:",e);var n='{\n   "@context": "http://schema.org",\n   "@type": "CreativeWork",\n   "isAccessibleForFree": '+e.isAccessibleForFree;!1===e.isAccessibleForFree&&e.productId&&(n=n+',\n   "isPartOf": {\n       "@type": ["CreativeWork", "Product"],\n       "name" : "'+e.resourceName+'",\n       "productID": "'+e.productId+'"\n   }'),n+="\n}";var o=document.createElement("script");o.type="application/ld+json",o.innerHTML=n,null===(t=document.getElementsByTagName("script")[0].parentNode)||void 0===t||t.appendChild(o),I=!0}},addLibrary:function(){var e;if(!S){r.debug("swg: adding swg.js library");var t=document.createElement("script");t.type="text/javascript",t.setAttribute("subscriptions-control","manual"),t.async=!0,t.src="https://news.google.com/swg/js/v1/swg.js",null===(e=document.getElementsByTagName("script")[0].parentNode)||void 0===e||e.appendChild(t),S=!0}},initSwgFlow:function(){window.SWG.push((function(e){e.getEntitlements().then((function(t){if(d=!0,r.debug("swg: getEntitlements",t),t.enablesThis()){var o=t.getEntitlementForSource("google");if(m=t.entitlements,!o)return void(m&&_(m).then((function(){r.debug("swg: checkExternalEntitlement"),t.ack()}),(function(){r.log("swg: checkExternalEntitlement failed")})));b(o).then((function(o){if(p)r.debug("swg: onPaymentResponse is already triggered. Skipping entitlements flow.");else if(o)switch(o.type){case"USER_FOUND":if(n.isUserValid())return void r.error("swg: user found, but not valid");r.debug("swg: user found, initiate login prompt");var i=o.user_token;e.showLoginPrompt().then((function(){C(i),g(s)})).catch((function(e){r.log("swg: showLoginPrompt failed",e)}));break;case"TERM_FOUND":r.debug("swg: term found, initiate deferred account creation");var a=o.term_id;e.completeDeferredAccountCreation({entitlements:t,consent:!0}).then((function(e){r.debug("swg: completeDeferredAccountCreation",e),k(e,e.purchaseData,e.userData,a,c)})).catch((function(e){r.log("swg: completeDeferredAccountCreation failed",e)}));break;default:r.debug("swg: check subscription response type "+o.type+". Nothing to do")}}),(function(){r.log("swg: checkSubscription failed")})),t.ack()}})).catch((function(e){r.log("swg: get entitlements failed",e)}))})),w()}},registerCallback:function(e,t){l.addEvent(e),l.registerCallback(e,t)}}}();pn.container.register("swg",{useValue:rn}),pn.swg=pn.container.resolve("swg");var on=function(){var e=pn.container.resolve("util"),t=pn.container.resolve("analytics"),n=pn.container.resolve("offer"),r=pn.container.resolve("user"),o=pn.container.resolve("api"),i=!1,a="",s={},c={};function u(t){return new Promise((function(n){var i={aid:pn.aid,rid:"",account_linking_token:e.getQueryParamByName("account_linking_token"),user_token:r.getProvider().getToken(),user_provider:r.getProvider().getName()};t&&(i.rid=t),o.callApi("/fbia/subscriptionPayload/generate",i,(function(e){e&&e.data&&(a=e.data),n(null)}))}))}var l=function(){u().then((function(){a&&p()}))},d=function(t){if(t){var n=new Promise((function(e){setTimeout((function(){e(null)}),1e3*pn.redirectToFbTimeout)})),r=u(t);e.__protected__.waitAllPromises([n,r]).then((function(){p()}))}else e.error("fbsubscriptions: 'rid' could not be empty on generating subscription payload")},p=function(){var t=e.getQueryParamByName("account_linking_token"),n=e.getQueryParamByName("redirect_uri")+"?account_linking_token="+encodeURIComponent(t);a&&(n+="&subscription_payload="+encodeURIComponent(a)),window.location.href=n},f=function(e,n){s[e]||(s[e]=!0,t.fbpixel.event({eventType:Pt.TRACK_EVENT,payload:{eventName:e,eventParams:n}}))},m=function(e,n){c[e]||(c[e]=!0,t.fbpixel.event({eventType:Pt.TRACK_CUSTOM_EVENT,payload:{eventName:e,eventParams:n}}))},g=function(){return i};return{name:"fbsubscriptions",checkUserAccessAndRedirectToFb:function(){u().then((function(){p()}))},isInitialized:g,__private__:{isInitialized:g},__protected__:{init:function(){if(!i){t.fbpixel.initialize(),n.registerCallback("loaded",(function(){var t=e.getQueryParamByName("surface");("meter_limit_reached"===t||"locked_article"===t)&&!pn.inappBrowserReturn&&m("ViewPaywall",{surface:"IA"})}));pn.addHandler("loginSuccess",(function(e){u().then((function(){e.registration?m("CreateAccount"):m("LogIntoAccount",{is_subscriber:!!a}),a&&setTimeout((function(){p()}),200)}))})),pn.addHandler("experienceExecute",(function(){r.isUserValid()&&l()})),n.registerCallback("alreadyPurchased",(function(e){d(e.rid)})),n.registerCallback("startCheckout",(function(e){f("InitiateCheckout",{offer_code:e.offerId,campaign_code:e.termId})})),n.registerCallback("complete",(function(e){e.hasOwnProperty("chargeCurrency")&&e.hasOwnProperty("chargeAmount")&&f("Purchase",{currency:e.chargeCurrency,value:e.chargeAmount,offer_code:e.offerId,campaign_code:e.termId}),d(e.rid)})),n.registerCallback("close",(function(){p()})),i=!0}}}}}();pn.container.register("fbsubscriptions",{useValue:on}),pn.fbsubscriptions=pn.container.resolve("fbsubscriptions");var an=s(c());pn.container.register("cxense",{useValue:function(e){void 0===e&&(e=pn.container);var t=e.resolve("jqUtils"),n=e.resolve("util"),r=e.resolve("analytics"),o=e.resolve("recWidgetService").__protected__.getInstance(),i=[],a=function(){return void 0!==pn.cxCdnUrl&&""!==pn.cxCdnUrl?pn.cxCdnUrl:"https://cdn.cxense.com"},s=function(){return void 0!==pn.cxenseSiteId&&""!==pn.cxenseSiteId},c=function(e){return void 0!==window.cX&&void 0!==window.cX.library&&(e||void 0!==window.cX.CCE&&void 0!==window.cX.CCE.library)},u=function(e){return void 0!==e.cxenseCustomerPrefix&&""!==e.cxenseCustomerPrefix},l=function(e,t){var r,o,i,a="anon",s=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t&&n.debug.apply(n,e)};e.uid&&"anon"!==e.uid&&""!==e.uid&&(a=!(null===(i=null===(o=e.eventExecutionContext)||void 0===o?void 0:o.accessList)||void 0===i||!i.length)?"hasActiveAccess":"registered",s("c1x: adding externalId",{uid:e.uid,prefix:e.cxenseCustomerPrefix}));if(s("c1x: adding CustomParameters userState",{userState:a}),s("c1x: sending pageview event"),"anon"!==a?n.__protected__.setVxUsersToDataLayer(((r={})[e.uid]={prefix:e.cxenseCustomerPrefix||"",type:"VX"},r)):n.__protected__.setVxUsersToDataLayer(null),an.dataLayer.set("userStatus",a),t){an.dataLayer.set("siteId",pn.cxenseSiteId);var c=window.cX=window.cX||{};c.callQueue=c.callQueue||[],c.callQueue.push(["sendPageViewEvent"])}},d=function(e){var t=null,n=[];function r(){t&&clearTimeout(t),t=null,e(n),n=[]}return function(e){t||(t=setTimeout(r,10)),n.push(e)}}((function(e){if(s()){for(var t=[],a=function(){var n=e[c]||{};o.showRecommendation({widgetConfig:n,createPlaceholderFn:p(n.widgetId,n.displayMode)})&&t.push({widgetParams:{widgetId:n.widgetId,targetElementId:"cxense-"+n.widgetId,experienceId:n.experienceId,trackingId:n.trackingId},widgetCallback:function(e){var t=e&&e.response;if(t&&!e.response.error){"modal"===n.displayMode&&o.fixWidgetModalWidth(o.findWidget(n.widgetId));for(var a=0;a<t.items.length;a++){var s=t.items[a].id;-1===i.indexOf(s)&&i.push(s)}f((function(){window.cX.CCE.run({widgetId:n.widgetId},void 0,(function(e){r.log.event({eventType:St.LOG_AUTO_MICRO_CONVERSION,payload:{trackId:n.trackingId,eventGroupId:"init",eventType:It.EXTERNAL_EVENT,customParams:{source:"CX"}}})}))}))}}})},c=0;c<e.length;c++)a();f((function(){(function(){var e=pn.cxenseSiteId;n.debug("c1x: setting siteId: ",e),window.cX.setSiteId(e)})(),window.cX.CCE.runMulti(t,["id"],i)}))}else n.debug("c1x: can not show recommendation because siteId is not configured using `setCxenseSiteId`")})),p=function(e,n){return function(){var r=document.createElement("div");t.addClass("tp-cxense-placeholder-".concat(n),r),t.addClass("tp-widget-placeholder",r);var o=document.createElement("div");return o.id="cxense-".concat(e),r.appendChild(o),r}},f=function(e){window.cX=window.cX||{},window.cX.CCE=window.cX.CCE||{},window.cX.CCE.callQueue=window.cX.CCE.callQueue||[],window.cX.CCE.callQueue.push(["invoke",e])},m=function(e){return c(e)};return{name:"cxense",__protected__:{showRecommendation:d,clearWidgets:function(){o.clearWidgets()},sendPageViewEvent:function(e){var t=!0;!s()&&!u(e)&&(t=!1),!s()&&u(e)&&(n.debug("cxense: can not send pageview because siteId is not configured using `setCxenseSiteId`"),t=!1),s()&&!u(e)&&(n.debug("cxense: can not send pageview because customer prefix is not configured in app settings"),t=!1),l(e,t)},isActivated:s,isCustomerPrefixConfigured:u,isConfiguredPollingAsync:function(e,t,n){t=t||0,n=n||0;var r=0;return new Promise((function(o,i){m(e)?o(!0):setTimeout((function a(){m(e)?o(!0):r>=n?i(e?"c1x: cX object is not found after "+n+" retries with "+t+"ms interval":"c1x: cX and cX.CCE objects are not found after "+n+" retries with "+t+"ms interval"):(r++,setTimeout(a,t))}),t)}))},invokeCxenseFn:f,getC1XIntegrationVersion:function(){return void 0!==pn.c1XIntegrationVersion&&""!==pn.cxenseSiteId?pn.c1XIntegrationVersion:"N/A"},loadCxLibIfNeeded:function(){var e;if(!s()||!c(!0)){var t=document.getElementsByTagName("script")[0],r=document.createElement("script");r.onerror=function(e){n.debug("c1x: error during load of cx.js. ",e)},r.onload=function(){n.debug("c1x: cx.js has been successfully loaded")},r.async=!0,r.type="text/javascript",pn.c1XLoadCce?r.src=a()+"/cx.cce.js":r.src=a()+"/cx.js",n.debug("c1x: start loading cx.js on the page..."),null===(e=t.parentNode)||void 0===e||e.insertBefore(r,t)}}}}}()}),pn.cxense=pn.container.resolve("cxense");var sn=s(c());pn.container.register("experience",{useValue:function(e){void 0===e&&(e=pn.container);var t,n,r,o=e.resolve("jqUtils"),i=e.resolve("util"),a=e.resolve("consent"),s=e.resolve("api"),c=e.resolve("eventUtils"),u=e.resolve("scrollDepth"),l=e.resolve("ajax"),d=e.resolve("viewportExit"),p=e.resolve("idle"),f=e.resolve("interaction"),m=e.resolve("pianoEsp"),g=e.resolve("swg"),v=e.resolve("fbsubscriptions"),h=e.resolve("user"),y=e.resolve("cxense"),w=e.resolve("logging"),b=e.resolve("composerControlPolicy"),_=e.resolve("analytics"),k=[],C={},I="",S=!1,E="reader_id",P=!1,x={},T=(t={applyCss:{fn:function(e){e.eventParams.ruleList.forEach((function(e){var t,n=e.classes,r=e.elements;n&&(n=n.replace(/[,.]/g," ").split(" ").filter((function(e){return""!==e})),"add"===e.type&&(t=o.qa(r))&&t.length&&t.forEach((function(e){n.forEach((function(t){o.addClass(t,e)}))})),"remove"===e.type&&(t=o.qa(r))&&t.length&&t.forEach((function(e){n.forEach((function(t){o.removeClass(t,e)}))})));i.debug("exp: css applied with rule:",e)}))},isAction:!0,shouldFireCallback:!0},runJs:{fn:function(e){if(e.eventParams&&e.eventParams.snippet){var t=e.eventParams.snippet;i.debug("exp: run js with snippet:",t);var n=e.eventExecutionContext;i.debug("exp: set publisher's context and custom:",n),me("var context = "+JSON.stringify(n)+";\nvar custom = "+JSON.stringify(pn.customVariables)+";\n"+t)}},isAction:!0,shouldFireCallback:!0},setCookie:{fn:function(e){var t=e.eventParams;if(t&&void 0!==t.cookieName&&void 0!==t.cookieValue){i.debug("exp: set cookie with parameters:",t);var n=(t.isReadableCookie?"_pc_":"")+t.cookieName,r={domain:t.cookieDomain,path:t.cookiePath};if(!t.isSessionCookie){var o=new Date;switch(t.expirationUnit){case"seconds":o.setSeconds(o.getSeconds()+t.expirationValue);break;case"minutes":o.setMinutes(o.getMinutes()+t.expirationValue);break;case"hours":o.setHours(o.getHours()+t.expirationValue);break;case"days":o.setDate(o.getDate()+t.expirationValue);break;case"months":o.setMonth(o.getMonth()+t.expirationValue);break;case"years":o.setFullYear(o.getFullYear()+t.expirationValue);break;default:i.log("Wrong eventParams.expirationUnit : ",t.expirationUnit)}r.expires=o}i.__protected__.setCookieConsent("composer",n,t.cookieValue,r)}},isAction:!0,shouldFireCallback:!0},nonSite:{fn:function(e){i.debug("exp: non-site action:",e)},isAction:!0,shouldFireCallback:!0},showForm:{fn:function(e){var t=e.eventParams;if(t&&t.formName){var n={formName:t.formName,hideIfComplete:t.hideCompletedFields,trackingId:e.eventExecutionContext.trackingId,displayMode:t.displayMode,containerSelector:t.containerSelector,showCloseButton:t.showCloseButton,templateId:t.templateId,variantId:t.templateVariantId,accessToken:h.getProvider().getToken()};t.formWidth&&t.formWidth.enabled&&(n=o.deepExtend({},{width:t.formWidth.width},n)),i.debug("exp: show form with params:",t),pn.pianoId.showForm(n)}},isAction:!0,shouldFireCallback:!0},showRecommendations:{fn:function(e){return ge(e,function(e){return{ESP:m.__protected__.showRecommendation.bind(m),CXENSE:y.__protected__.showRecommendation.bind(y)}[e]||function(){}}(e.eventParams.type))},isAction:!0,shouldFireCallback:!0},showOffer:{fn:function(e){return ge(e,(function(e){return pn.offer.show(e)}))},isAction:!0,shouldFireCallback:!1},showTemplate:{fn:ve,isAction:!0,shouldFireCallback:!1},showZuoraOffer:{fn:ve,isAction:!0,shouldFireCallback:!1},showNewscycleOffer:{fn:ve,isAction:!0,shouldFireCallback:!1},showNewsletterSignup:{fn:function(e){return ge(e,(function(e){return m.__protected__.showNewsletterSignup(e)}))},isAction:!0,shouldFireCallback:!1},showPushSignUp:{fn:function(e){return ge(e,(function(e){return m.__protected__.showPushSignup(e)}))},isAction:!0,shouldFireCallback:!1},showLogin:{fn:function(e){h.showLogin({trackingId:e.eventExecutionContext.trackingId})},isAction:!0,shouldFireCallback:!0},continueExecution:{fn:function(e,t,n,r){i.debug("exp: continue execution action:",e,"with requestParameters",t);var o=t||{};o.experience_id=e.eventExecutionContext.experienceId,o.experience_version=e.eventExecutionContext.experienceVersion,o.context_data=e.eventParams.contextData,Q("auto",o,!0,r)},shouldFireCallback:!0},continueExecutionCompleted:{fn:_e,shouldFireCallback:!0},meterActive:{fn:_e,shouldFireCallback:!0},meterExpired:{fn:_e,shouldFireCallback:!0},userSegmentTrue:{fn:fe,shouldFireCallback:!0},userSegmentFalse:{fn:fe,shouldFireCallback:!0},experienceExecutionFailed:{fn:_e,shouldFireCallback:!0},log:{fn:function(e){te(e.eventModuleParams.moduleId,e)},shouldFireCallback:!1},experienceExecute:{fn:function(e,t,n){e.eventParams.result=n},shouldFireCallback:!0},setResponseVariable:{fn:function(e){return e.eventParams},isAction:!0,shouldFireCallback:!0},creditRedeemed:{fn:function(e){i.debug("exp: credit redeemed action:",e)},isAction:!0,shouldFireCallback:!0}},n={},r=function(e,t){return function(n,r,o,a){if(e.isAction){var s=function(e){var t=e.eventParams,n=e.eventModuleParams,r=e.eventExecutionContext;return i.debug("exp: fire event 'beforeComposerAction' with eventParams:",t,", moduleParams:",n,", context:",r),q.fireCallbacksAndStopOnFirstFalse("beforeComposerAction",t,n,r)}(n);if(!s)return;var c=oe(n),u=re(n);(c||u)&&te(n.eventModuleParams.moduleId,n)}var l=n.eventModuleParams.moduleId;!x[l]&&"N/A"!==l&&(x[l]={experienceId:n.eventExecutionContext.experienceId,moduleName:n.eventModuleParams.moduleName});var d=(null==a?void 0:a.handlers)||{},p="on".concat(t[0].toUpperCase()).concat(t.slice(1));"function"==typeof(null==d?void 0:d[p])&&d[p](n,r);var f=Object.assign({},n);f.eventParams&&(f.eventParams=Object.assign({},n.eventParams)),e.fn(f,r,o,a),e.shouldFireCallback&&function(e){return function(t){var n=t.eventParams.callback,r=t.eventParams,o=t.eventModuleParams,a=t.eventExecutionContext;i.debug("exp: fire event ",e," with eventParams:",r,", moduleParams:",o,", context:",a),q.fire("experience",e,!0,r,o,a),n&&e!==n&&(i.debug("exp: execute event ",e," with callback: ",n),me(n))}}(t)(f)}},Object.keys(t).forEach((function(e){if("function"!=typeof t[e].fn)throw new Error("Unsupported config for "+e+" handler");n[e]=r(t[e],e)})),n),A={showOffer:function(e){return he(e,(function(e){return pn.offer.deferredShow(e)}))},showTemplate:ye,showZuoraOffer:ye,showNewscycleOffer:ye},O=i.profile((function(e,t){b.__private__.checkLS(),Q("manual",e,!1,{overrides:e,handlers:t})})),M=function(e,t){q.addEvent(e),q.registerCallback(e,t)},N={},R="",L="",U="",j=[],D="handler",B="eventCondition",F="innerEventCondition",V="preload",q=c.createEventManager([]),z=["showOffer","showZuoraOffer","showNewscycleOffer","showTemplate"];var G,H=function(){return pn.getExperienceEndpoint(!1)+"/api/v3"},W=function(){v.__protected__.init()},J=function e(t){var n=k;n.length&&(_.log.event({eventType:St.LOG_BEACON_REQUEST,payload:{url:H()+"/composer/logExecutionStats",params:{aid:pn.aid,items:JSON.stringify(n),execution_stats_context:I,ts:(new Date).getTime(),source:t}}}),k=[]),window.clearTimeout(G),G=window.setTimeout((function(){e("timer"+G)}),2e3)},Q=function(e,t,n,r){Boolean((window.pdl||{}).requireConsent&&!pn.consent.get())&&i.debug("WARNING: The RequireConsent feature is enabled. The Piano services might be working unstable until user consent provided"),void 0===pn.main.appHasApplePay()&&q.fireCallbacks("experienceFlow",null,"experience",!0);var a=new Promise((function(e){setTimeout((function(){e({})}),3e4)}));return Promise.race([pn.main.externalResourcesDelay(),a]).then((function(a){o.isPlainObject(a)||(i.error("exp: error get external resources ",a),a={});var s={new_bid:sn.default.get("browserId")};if(y.__protected__.isActivated()){i.debug("c1x: integration is activated"),y.__protected__.loadCxLibIfNeeded();var c=o.deepExtend({},t,a,s,{c1x_integration_version:"v2"});X(e,c,n,r)}else X(e,o.deepExtend({},t,a,s),n,r)})).catch((function(e){}))},X=function(e,t,n,r){t=t||{};var c=o.deepExtend({},{protocol_version:1},t);Y(c),$(c),K(c),i.hasQueryParamByName(E)&&(c[E]=i.getQueryParamByName(E)),i.waitCall("refreshUserToken",(function(){if(n)c.executed_nodes=JSON.stringify(x);else{pn.main.trackPageUnloadIfNecessary(),Z(c),s.getCallParams(c,h.getProvider()),i.removeAffiliateToken();var t={url:window.location.href,tags:pn.tags,submitType:e};pn.main.buildPageTrackParams(c,t)}a.__protected__.addConsentsToParams(c),i.debug("exp: Experience initialized with params:",c),i.waitCall("refreshAccessTokenList",(function(){i.startCall("experienceExecute");var e,t=function(){var e=null;return i.__protected__.cameFromFbSubscriptions()?b.denyFbia||(e="/xbuilder/experience/executeFbia",W()):b.denyWeb||(e="/xbuilder/experience/execute"),e&&pn.getExperienceEndpoint(!1)+e}();if(!t)return i.doneCall("experienceExecute"),n||we(),void i.debug("execute: is denied");if(-1!==navigator.appVersion.indexOf("MSIE 9"))e={dataType:"jsonp",url:t+"?"+o.param(c)};else{var a="?"+o.param({aid:c.aid});e={type:"post",url:t+a,data:o.deepExtend({},c,(null==r?void 0:r.overrides)||{}),xhrFields:{withCredentials:!0}}}e.success=function(e){i.doneCall("experienceExecute");var t=o.deepExtend({},c);n||(we(),pn.main.registerTrackUnload()),ee(e.errors),pe(e.models,t,r)},e.error=function(e){b.__private__.setPolicyByRequest(e),i.doneCall("experienceExecute"),n||we();var r={code:503,message:"Error: Received error when requesting API response from URL: "+t};i.debug(r.message)},l.request(e)}))}))},Y=function(e){var t=i.__protected__.getCookie("xbc");t&&(e.xbc=t);var n=i.getTbcCookie();n&&n.length>0&&(e.tbc=n),i.getCampaigns(e),e.custom_cookies=JSON.stringify(i.getCustomCookies())},$=function(e){var t=i.getPushListsCookie(),n=m.__protected__.getNotificationStatus();t&&t.length>0&&(e.push_list_subscriptions=JSON.stringify(t)),n&&(e.push_notification_settings=n)},K=function(e){e.mailing_lists=JSON.stringify(m.__protected__.loadCompleteMailingLists())},Z=function(e){return[{property:"debug",parameter:"debug"},{property:"trackPageView",parameter:"increment_pageview_meter"}].forEach((function(t){void 0!==pn[t.property]&&(e[t.parameter]=pn[t.property])})),e},ee=function(e){Array.isArray(e)&&(e.length&&i.debug("exp: composer execution has been failed with errors"),e.forEach((function(e){i.debug("exp: "+e.msg)})))},te=function(e,t){!function(e){k.push(e)}({mId:e,eId:t.eventExecutionContext.experienceId,eV:t.eventExecutionContext.experienceVersion,eeId:t.eventExecutionContext.executionId})};function ne(e,t,n,r,o){return{type:D,eventType:t.eventType,children:[],run:function(){e.bind(this,t,n,r,o)()}}}var re=function(e){var t,n=e.eventParams.delayBy||{};return n.value&&("time"===n.type?t={type:"timer",timer:n.value}:"scroll"===n.type&&(t={type:"scrollDepth",scrollDepth:n.value,measureType:"pixels"})),t},oe=function(e){return e.eventConditions&&Array.isArray(e.eventConditions)?e.eventConditions.length:0},ie=function(e,t){return function(){var n,r=!1;return{type:V,eventType:t.eventType,children:[],run:function(){!1===r&&(n=e(t),r=!0)},getPreloadResult:function(){return n}}}()};function ae(e,t){var n=function(){return q.fireCallbacksAndStopOnFirstFalse("beforeBrowserEvent",e)};switch(e.type){case"viewportExit":d.addListener(t,{detectExitMode:e.detectExitMode,detectBackButtonForMobile:e.detectBackButtonForMobile,clientDevice:e.clientDevice},n);break;case"scrollDepth":u.addListener(t,{scrollDepth:e.scrollDepth,measureType:e.measureType},n);break;case"timer":var r=setTimeout((function(){n()&&t()}),1e3*e.timer);j.push(r);break;case"interaction":f.bind(t,e.interactions,n);break;case"idle":p.addListener(t,e.idleTime,n)}}var se=function(e){return e.type===D&&-1===["continueExecution","meterActive","meterExpired"].indexOf(e.eventType)};function ce(e,t){return function(){var n=!1,r=function(){te(e.moduleId,t);for(var r=C[e.moduleId].children,o=0;o<r.length;o++){var a=r[o],s=C[a];if(!1===n||se(s))try{s.run()}catch(e){i.error("exp: error execute chain event",s,e)}}n=!0,S&&J("chain")};return{type:B,children:[],run:function(){ae(e,r)}}}()}function ue(e,t){return function(){var n=!1,r=function(){for(var e=C[t+F].children,r=0;r<e.length;r++){var o=e[r],a=C[o];if(!1===n||se(a))try{a.run()}catch(e){i.error("exp: error execute chain event",a,e)}}n=!0};return{type:F,children:[t],run:function(){ae(e,r)}}}()}var le=function(e){e.swgMarkupData&&(i.debug("exp: swg markup data :",e.swgMarkupData),function(e){g.__protected__.injectMarkup(e)}(e.swgMarkupData),e.swgMarkupData.isAccessibleForFree||g.__protected__.addLibrary()),e.swgEnabled&&g.__protected__.initSwgFlow()},de=function(e){if(e){for(var t={},n=0;n<e.events.length;n++){var r=e.events[n];try{"experienceExecute"===r.eventType&&((t=o.deepExtend({},r.eventExecutionContext)).result=o.deepExtend({},e))}catch(e){i.error("exp: error on execute event: ",r,e)}}return t}i.debug("exp: no composer execution result")},pe=function(e,t,n){if(e){i.setTbcCookieFromResponse(e),i.setTacCookieFromResponse(e),i.setAppTimezoneOffsetFromResponse(e),i.setCurrentDomainFromResponse(e),function(e){m.__protected__.setVisitorId(e.bid)}(e),function(e){y.__protected__.sendPageViewEvent({browserId:e.bid,uid:e.uid,cxenseCustomerPrefix:e.cxenseCustomerPrefix,pageViewId:pn.main.fetchPageViewId(),eventExecutionContext:de(e.result)})}(e),function(e){R=e.bid}(e),function(e){e.iss&&(L=e.iss)}(e),function(e){U=e.itemId}(e),i.setXbcCookieFromResponse(e);var r=e.result,a={};if(!r)return void i.debug("exp: no composer execution result");le(r),i.debug("exp: processed experiences :",r.experiences),I=e.executionStatsContext,r.debugMessages.forEach((function(e){i.debug("exp: execute :",e)}));for(var s,c=function(e,t,n){for(var r=e.eventConditions,o=0;o<r.length;o++){var a=r[o],s=a.moduleId,c=r[o-1],u=!r[o+1];if(C[s]||(C[s]=ce(a,e)),u)if(C[s].children.push(t),-1!==z.indexOf(e.eventType)&&"viewportExit"===a.type&&!re(e)){var l=A[e.eventType];if(!l){i.error("exp: not found preload handler for event: ",e);continue}var d=t+V;C[d]=ie(l,e),c?C[c.moduleId].children.push(d):n.push(d)}c&&-1===C[c.moduleId].children.indexOf(s)&&C[c.moduleId].children.push(s)}},u=[],l=0,d=0;d<r.events.length;d++){var p=r.events[d];try{var f=p.eventType,g=p.eventModuleParams||{};if(i.debug("exp: process event '"+f+"' ("+g.moduleId+")"),"experienceExecute"===f&&((a=o.deepExtend({},p.eventExecutionContext)).result=o.deepExtend({},r)),!(s=g.moduleId)){i.error("exp: not found moduleId for linked node event: ",p);continue}var v=T[f];if(!v){i.error("exp: not found handler for event: ",p);continue}C[s]=ne(v,p,t,r,n);var h=oe(p),w=re(p);if(h||w){var b=s;if(w){var _=ue(w,s);C[b=s+F]=_}h?-1===u.indexOf(p.eventConditions[0].moduleId)&&u.push(p.eventConditions[0].moduleId):w&&u.push(b),c(p,b,u),l++}else u.push(s)}catch(e){i.error("exp: error on execute event: ",p,e)}}l<=3&&(S=!0);for(var k=0;k<u.length;k++)s=u[k],C[s]&&C[s].run();window.clearTimeout(G),G=window.setTimeout((function(){J("rootTimer"+G)}),2e3),N=a}};function fe(e){oe(e)&&te(e.eventModuleParams.moduleId,e)}function me(e){try{eval.call(window,"(function () {"+e+"\n})();")}catch(e){i.log("Error occurred in RunJS\n",e)}}function ge(e,t){var n=C[e.eventModuleParams.moduleId+V];return n&&n.getPreloadResult?n.getPreloadResult().show():be(e,t)}function ve(e){return ge(e,(function(e){return pn.template.show(e)}))}function he(e,t){return i.debug("exp: run preloading for:",e),be(e,(function(e){return t(e)}))}function ye(e){return he(e,(function(e){return pn.template.deferredShow(e)}))}function we(){J("reset"),j.forEach((function(e){clearTimeout(e)})),j=[],d.removeListeners(),p.removeListeners(),u.removeListeners(),f.unbindAll(),C={},x={}}function be(e,t){var n=o.deepExtend({},e.eventParams),r=e.eventExecutionContext.splitTests,a=e.eventExecutionContext.activeMeters,s=e.eventParams.formNameByTermId,c=e.eventParams.hideCompletedFields,u=function(e){var t;if(!L)return null;var n=e||{};return{issuerId:L,premium:n.user&&n.user.premium||null,redemptionCandidateItemId:U||null,creditStates:n.creditStates||null,userId:(null===(t=n.user)||void 0===t?void 0:t.uid)||null,targetGroups:{l1:"target",l2:null}}}(e.eventExecutionContext);if(n.trackingId=e.eventExecutionContext.trackingId,n.experienceId=e.eventExecutionContext.experienceId,n.experienceExecutionId=e.eventExecutionContext.executionId,n.experienceActionId=e.eventModuleParams.moduleId,n.experienceConditions=e.eventConditions,n.browserId=R,n.onStartCreditRedemption=function(t){var n=o.deepExtend({},t),r="https://www.piano.io"===L,i=e.eventExecutionContext.user&&"anon"!==e.eventExecutionContext.uid;return n.trackingId=e.eventExecutionContext.trackingId||void 0,r&&i&&(n.uid=e.eventExecutionContext.user.uid||void 0),pn.credit.redeem(n)},r&&r.length>0){var l=r.map((function(e){return e.variantId}));n.splitTestIds=JSON.stringify(l)}if(n.additionalParamNames=[],a&&a.length>0&&(n.activeMeters=JSON.stringify(a)),"showZuoraOffer"===e.eventType){var d=e.eventParams.ratePlanIds;d&&d.length>0&&(n.zuoraSelectedRatePlanIds=JSON.stringify(d),n.additionalParamNames.push("zuoraSelectedRatePlanIds"))}if("showNewscycleOffer"===e.eventType){var p=e.eventParams.ids;p&&p.length>0&&(n.newscycleSelectedIds=JSON.stringify(p),n.additionalParamNames.push("newscycleSelectedIds","campaignCode","campaignGroupId"))}if("showNewsletterSignup"===e.eventType){var f=e.eventParams.mailingListIds,m=e.eventParams.siteId;f&&f.length>0&&(n.mailingListIds=JSON.stringify(f),n.siteId=m,n.additionalParamNames.push("mailingListIds","siteId"))}return"showRecommendations"===e.eventType&&(n.widgetId=e.eventParams.widgetId,n.placeholder=e.eventParams.placeholder),s&&(n.formNameByTermId=JSON.stringify(s),n.hideCompletedFields=c),u&&(n.affiliateState=u),i.debug("exp: show with params:",n),t(n)}function _e(){return function(){}}return{name:"experience",init:function(){if(!P&&!i.__protected__.isCxenseBot()){P=!0;var e=!0;if(pn.customPreChecks&&pn.customPreChecks.length)for(var t=null,n=pn.customPreChecks.length;n--;)try{1!==(t=pn.customPreChecks[n]())&&!0!==t&&(e=!1)}catch(e){}e&&Q("auto").then((function(){w.setTime("expExec")}))}},execute:O,_getLastExecutionResult:function(){return N},registerCallback:M,__private__:{handlers:T,executedNodes:k,linkedNodes:C,processResult:pe,processErrors:ee,show:be,getTrackingEndpoint:H,initialized:P,registerCallback:M},__protected__:{sendStatisticsExecutedNodes:J}}}()}),pn.experience=pn.container.resolve("experience");var cn=function(){var e,t,n=0,r=document,o=!1,i="active",a=6e4,s=function(){var e,t,n;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},n={},t="__ceGUID",{add:function(e,r,o){return e[t]=void 0,e[t]||(e[t]="ifvisible.object.event.identifier"),n[e[t]]||(n[e[t]]={}),n[e[t]][r]||(n[e[t]][r]=[]),n[e[t]][r].push(o)},remove:function(e,r,o){var i,a,s,c,u;if(o){if(e[t]&&n[e[t]]&&n[e[t]][r])for(a=s=0,c=(u=n[e[t]][r]).length;s<c;a=++s)if((i=u[a])===o)return n[e[t]][r].splice(a,1),i}else if(e[t]&&n[e[t]]&&n[e[t]][r])return delete n[e[t]][r]},fire:function(e,r,o){var i,a,s,c,u;if(e[t]&&n[e[t]]&&n[e[t]][r]){for(u=[],a=0,s=(c=n[e[t]][r]).length;a<s;a++)i=c[a],u.push(i(o||{}));return u}}}}(),c=function(){var e;return function(t,n,r){return e||(e=t.addEventListener?function(e,t,n){return e.addEventListener(t,n.bind(cn),!1)}:t.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),e(t,n,r)}}(),u=function(){var e,t=r.createElement("div"),n=t.getElementsByTagName("i"),o=3;for(e=function(){return t.innerHTML="\x3c!--[if gt IE "+ ++o+"]><i></i><![endif]--\x3e",n[0]};e(););return o>4?o:void 0}();function l(){var s;return!!o||(e?c(r,t,(function(){return r.hidden?p():d()}),!1):(s="blur",u&&u<9&&(s="focusout"),c(window,s,(function(){return cn.blur()})),c(window,"focus",(function(){return cn.focus()}))),o=!0,function(){var e,t;return(t=function(){return clearTimeout(e),"active"!==i&&m(),n=+new Date,e=setTimeout((function(){if("active"===i)return f()}),a)})(),c(r,"mousemove",t),c(r,"mouseup",t),c(r,"keyup",t),c(r,"touchstart",t),c(window,"scroll",t),c(window,"resize",t),d(t),m(t)}())}void 0!==r.hidden?(e="hidden",t="visibilitychange"):void 0!==r.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==r.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==r.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");function d(e){return"function"==typeof e?g("focus",(function(t){e(t)})):(i="active",s.fire(cn,"focus"),s.fire(cn,"wakeup"),s.fire(cn,"statusChanged",{status:i})),cn}function p(e){return"function"==typeof e?g("blur",(function(t){e(t)})):(i="hidden",s.fire(cn,"blur"),s.fire(cn,"idle"),s.fire(cn,"statusChanged",{status:i})),cn}function f(e){return"function"==typeof e?g("idle",(function(t){e(t)})):(i="idle",s.fire(cn,"idle"),s.fire(cn,"statusChanged",{status:i})),cn}function m(e){return"function"==typeof e?g("wakeup",(function(t){return e(t)})):(i="active",s.fire(cn,"wakeup"),s.fire(cn,"statusChanged",{status:i})),cn}function g(e,t){return l(),s.add(cn,e,t),cn}return{name:"ifvisible",setIdleDuration:function(e){return a=1e3*e},getIdleDuration:function(){return a},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===i?(t.isIdle=!0,t.idleFor=e-n,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-n,t.timeLeft=n+a-e,t.timeLeftPer=(100-100*t.timeLeft/a).toFixed(2)),t},wakeup:m,idle:f,focus:d,blur:p,on:g,off:function(e,t){return l(),s.remove(cn,e,t),cn},onEvery:function(e,t){var n,r=!1;return l(),t&&(n=setInterval((function(){if("active"===i&&!r)return t()}),1e3*e)),{stop:function(){return clearInterval(n)},pause:function(){return r=!0},resume:function(){return r=!1},code:n,callback:t}},now:function(e){return l(),i===(e||"active")}}}();pn.container.register("ifvisible",{useValue:cn}),pn.ifvisible=pn.container.resolve("ifvisible");var un=function(){var e,t=pn.container.resolve("jqUtils"),n=pn.container.resolve("ifvisible"),r=0,o=[],i=60,a=!0,s=function(){m();var e=o[o.length-1];void 0!==e&&void 0===e.stopTime||o.push({startTime:new Date,startMinute:r,stopTime:void 0})},c=function(){if(0!==o.length&&!a){if(d())return void f();var e=o[o.length-1];void 0===e.stopTime&&(e.stopTime=new Date,e.stopMinute=r)}},u=function(e,t,n,r){var o=Math.abs(e.getTime()-t.getTime()),i=n-r;return o>6e4*(i+10)&&(o=6e4*i),o},l=function(e){var t=parseFloat(e);if(isNaN(t))throw{name:"InvalidDurationException",message:"An invalid duration time ("+e+") was provided."};n.setIdleDuration(t),i=t},d=function(){return!!(e=t.filter("video,audio",(function(e){return!e.paused}))).length},p=function(){setTimeout((function(){c()}),15e3)},f=function(){!e||e.forEach((function(e){t.on(e,"pause",p)}))},m=function(){!e||e.forEach((function(e){t.off(e,"pause",p)}))};return{name:"activetimer",setIdleDurationInSeconds:l,getActiveTimeInSeconds:function(){for(var e=0,t=0;t<o.length;t++){var n=o[t].startTime,i=o[t].stopTime,a=o[t].startMinute,s=o[t].stopMinute;void 0===i&&(i=new Date,s=r),e+=u(i,n,s,a)}return Math.floor(e/1e3)},getTotalTimeInSeconds:function(){var e=0,t=o[0];if(void 0!==t){var n=t.startTime,i=t.startMinute,a=new Date;e=u(a,n,r,i)}return Math.floor(e/1e3)},resetRecordedTime:function(){o=[],s()},startTimer:s,stopTimer:c,initialize:function(e){e&&l(e),n.on("blur",(function(){a=!1,c()})),n.on("focus",(function(){a=!0,s()})),n.on("idle",(function(){i>0&&(a=!1,c())})),n.on("wakeup",(function(){i>0&&(a=!0,s())})),s(),setInterval((function(){r++}),6e4)}}}();pn.container.register("activetimer",{useValue:un}),pn.activetimer=pn.container.resolve("activetimer");var ln=function(){var e,t={},n=[],r=!1,o=1,i=2,a=3;function s(e){e&&(l(),r=!1),function(){if(r)return!1;r=!0;try{var e=window.googletag=window.googletag||{};e.cmd=e.cmd||[],e.cmd.push((function(){e.pubads().addEventListener("slotRenderEnded",f),e.pubads().addEventListener("impressionViewable",m),e.companionAds().addEventListener("slotRenderEnded",f),e.companionAds().addEventListener("impressionViewable",m)})),e.apiReady&&e.cmd.push((function(){d(e.pubads().getSlots()),d(e.companionAds().getSlots())}))}catch(e){return v(e),!1}}()}function c(t,n){"function"==typeof e&&e(t,n)}function u(e){return e&&void 0!==t[e]&&null!==t[e]&&t.hasOwnProperty(e)}function l(){t={},n=[]}function d(e){for(var t=0;t<e.length;t++){var n=e[t];f({eventSource:a,slot:n})}}function p(e){var t;try{var n=e.serviceName,r=e.slot;if(!n){var o=e.slot.getServices();o&&o.length&&(n=o[0].getName())}var i=r.getResponseInformation()||{},a=r.getSlotId?r.getSlotId():{},s=r.getSlotElementId?r.getSlotElementId():a.getDomId?a.getDomId():null;t={companion:!!n&&"companion_ads"===n,adUnit:r.getAdUnitPath?r.getAdUnitPath():0,isEmpty:e.isEmpty,elementId:s,advertiserId:e.advertiserId||i.advertiserId,campaignId:e.campaignId||i.campaignId,lineItemId:e.lineItemId||i.lineItemId,creativeId:e.creativeId||i.creativeId,eventSource:e.eventSource||null,size:e.size&&e.size.slice(0,2)||null,viewed:!1,position:null};var c=document.getElementById(s);if(s&&c&&(t.position={top:c.offsetTop,left:c.offsetLeft},void 0===e.isEmpty&&(t.isEmpty=c.offsetWidth<=0&&c.offsetHeight<=0,!t.isEmpty&&!t.size))){var u=r.getSizes();u&&u.length&&(t.size="object"==_typeof(u[0])?[u[0].getWidth(),u[0].getHeight()]:u[0])}}catch(e){v(e)}return t}function f(e){e.eventSource=e.eventSource||o;var r=p(e),i=g(e.slot);!i||(t[i]?r.viewed=t[i].viewed:n.push(i),t[i]=r,c(r,i))}function m(e){var r=g(e.slot);if(r){var o=t[r]||p(e);u(r)||(t[r]=o,n.push(r)),void 0===o.companion&&(o.companion="companion_ads"===e.serviceName),(!o.eventSource||o.eventSource>i)&&(o.eventSource=i),o.viewed=!0,c(o,r)}}function g(e){try{var t=e.getSlotId?e.getSlotId():{},n=e.getSlotElementId?e.getSlotElementId():t.getDomId?t.getDomId():null,r=e.getAdUnitPath?e.getAdUnitPath():0;return[n,t.getId?t.getId():0,r].join(":")}catch(e){v(e)}}function v(e){pn&&pn.util&&pn.util.error&&pn.util.error("DFP module error: ",e)}return s(),{name:"doubleClickForPublisher",initialize:s,setCustomHandler:function(t){e=t},getAds:function(e){var r=[],o=0,i=n.length;e&&function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)&&e>0&&e<i&&(o=i-e);for(var a=o;a<i;a++){var s=n[a];!u(s)||r.push(t[s])}return r},resetAds:l}}();pn.container.register("doubleClickForPublisher",{useValue:ln}),pn.doubleClickForPublisher=pn.container.resolve("doubleClickForPublisher");var dn=function(){var e,t,n,r,o,i,a=pn.container.resolve("postmessage"),s=pn.container.resolve("util"),c="https://js.braintreegateway.com/web/3.79.1/js/client.min.js",u="https://js.braintreegateway.com/web/3.79.1/js/apple-pay.min.js",l="";a.subscribe("loaded",(function(){d()})),a.subscribe("startCheckout",(function(){d()})),a.subscribe("applePayBtClientToken",(function(e){g(e.params.clientToken)})),a.subscribe("applePayBtCheckoutFlowProperties",(function(e){r=e.params.requestEmail,o=e.params.requestPostalAddress})),a.subscribe("applyTaxFailed",(function(t){e.abort()})),a.subscribe("checkApplePayBtInstance",(function(e){t&&a.broadcast("applePayInit",{})})),a.subscribe("applyTaxCompleted",(function(e){m(e.params)})),a.subscribe("applePayBtBeginSession",(function(i){var s={},c=i.params;c.resourceTitle&&(s=c),c.termId&&(l=c.termId||"");var u={currencyCode:c.currencyCode,total:{label:c.resourceTitle,amount:c.chargeAmount}};p(u);try{n=t.createPaymentRequest(u)}catch(e){a.broadcast("payment-error",{errorCode:101})}(e=new window.ApplePaySession(2,n)).onvalidatemerchant=function(n){t.performValidation({validationURL:n.validationURL,displayName:c.resourceTitle||s.resourceTitle},(function(t,n){if(t)return e.abort(),void a.broadcast("payment-error",{errorCode:102});e.completeMerchantValidation(n)}))},e.onpaymentauthorized=function(n){t.tokenize({token:n.payment.token},(function(t,i){if(t)return a.broadcast("payment-error",{errorCode:103}),void e.completePayment(window.ApplePaySession.STATUS_FAILURE);var s={nonce:i.nonce,cardType:i.details.cardType};r||o?f(n,s):m(s)}))},e.begin()}));var d=function(){var e=s.__protected__.isApplePayAllowed();a.broadcast("EVENT_APPLE_PAY_CAN_MAKE_PAYMENTS",{canMakePayments:e})},p=function(e){r&&(e.requiredShippingContactFields=["email"]),o&&(e.requiredBillingContactFields=["postalAddress"])},f=function(e,t){var n=e.payment.billingContact,r={countryCode:n.countryCode?n.countryCode.toUpperCase():n.countryCode,zipCode:n.postalCode,billingZipCode:n.postalCode,nonce:t.nonce,cardType:t.cardType};e.payment.shippingContact&&(r.user={email:e.payment.shippingContact.emailAddress}),a.broadcast("applePayPaymentAuthorized"+l,r)},m=function(t){e.completePayment(window.ApplePaySession.STATUS_SUCCESS),a.broadcast("applePayNonce"+l,t)},g=function(e){i=e,v()},v=function(){w()||y(c,(function(){!0,h()}))},h=function(){b()||y(u,(function(){!0,window.braintree.client.create({authorization:i}).then((function(e){window.braintree.applePay.create({client:e},(function(e,n){e?a.broadcast("payment-error",{errorCode:101}):(t=n,a.broadcast("applePayInit",{}))}))})).catch((function(e){if(e)return a.broadcast("payment-error",{errorCode:100}),void s.error("[TP] Client error: "+e.message)}))}))},y=function(e,t){s.addScript(e,t)},w=function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++)if(e[t].src.indexOf(c)>-1)return!0},b=function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++)if(e[t].src.indexOf(u)>-1)return!0};return{name:"applePay"}}();pn.container.register("applePay",{useValue:dn}),pn.applePay=pn.container.resolve("applePay");var fn=function(){var e=pn.container.resolve("postmessage"),t=pn.container.resolve("util"),n="",r={environment:"",billingRequestFlowId:""},o={customer:"",mandate:"",bank_account_ending:"",bank_account_holder:"",bank_name:"",currency:""},i=!1;e.subscribe("LOAD_GOCARDLESS_DROPIN",(function(t){n=t.sender,i?e.send("GOCARDLESS_DROPIN_LOADED",null,n):s("https://pay.gocardless.com/billing/static/dropin/v2/initialise.js",(function(){i=!0,e.send("GOCARDLESS_DROPIN_LOADED",null,n)}))})),e.subscribe("GOCARDLESS_DROPIN_MANDATE_CREATION_INIT",(function(e){r=e.params,i&&a()}));var a=function(){window.GoCardlessDropin.create({billingRequestFlowID:r.billingRequestFlowId,environment:r.environment,onSuccess:function(t){var r=t.links,i=r.customer,a=r.mandate_request_mandate,s=t.resources.customer_bank_account,c=s.account_number_ending,u=s.account_holder_name,l=s.bank_name,d=t.mandate_request.currency;o={customer:i,mandate:a,bank_account_ending:c,bank_account_holder:u,bank_name:l,currency:d},null,e.send("GOCARDLESS_DROPIN_MANDATE_CREATION_COMPLETE",o,n)},onExit:function(t){null,t?e.send("payment-error",{message:t},n):e.send("GOCARDLESS_DROPIN_ENABLE_PLUGIN",null,n)}}).open()},s=function(e,n){t.addScript(e,n)};return{name:"goCardlessDropin"}}();pn.container.register("goCardlessDropin",{useValue:fn}),pn.goCardlessDropin=pn.container.resolve("goCardlessDropin");var mn=function(){var e,t,n,r=pn.container.resolve("postmessage"),o=pn.container.resolve("util"),i=!1;return{name:"applePayIntegrationService",initialize:function(){var a=function(){i=o.__protected__.isApplePayAllowed(),r.broadcast("EVENT_APPLE_PAY_CAN_MAKE_PAYMENTS",{canMakePayments:i})};r.subscribe("provider-component-initiated",(function(){i&&r.broadcast("apple-pay-init",{})})),r.subscribe("initPwApplePay",(function(){a()})),r.subscribe("startCheckout",(function(){a()})),r.subscribe("pay-session-received",(function(e){try{t.completeMerchantValidation(e.params.applePaySession)}catch(e){r.broadcast("payment-error",{errorCode:111,errors:e})}})),r.subscribe("apple-pay-complete-payment",(function(e){!function(e){return!n||n===e}(e.params.termId)||t.completePayment(e.params.status,e.params.errors)})),r.subscribe("start-purchase",(function(o){n=o.params.termId||"",e=o.params.resourceName,t=new window.ApplePaySession(3,function(e){return{countryCode:e.params.countryCode,currencyCode:e.params.currencyCode,supportedNetworks:["visa","masterCard","amex","discover"],merchantCapabilities:["supports3DS"],requiredShippingContactFields:e.params.requiredShippingContactFields||[],requiredBillingContactFields:e.params.requiredBillingContactFields||[],total:{label:e.params.resourceName,amount:e.params.chargeAmount}}}(o)),t.onvalidatemerchant=function(t){!function(e,t){var o={validationUrl:e,displayedCaption:t,userToken:null,userProvider:null,userRef:null,janrainCaptureToken:null,domainName:window.location.hostname,aid:null,termId:n};r.broadcast("apple-pay-pay-session-request",o)}(t.validationURL,e)},t.onpaymentauthorized=function(e){try{r.broadcast("apple-pay-payment-authorized",{paymentData:e.payment,termId:n})}catch(e){r.broadcast("payment-error",{errorCode:110,error:e})}};try{t.begin()}catch(e){r.broadcast("payment-error",{errorCode:112,error:e,termId:n})}})),r.subscribe("abort-apple-pay-session",(function(){!function(){try{t.abort()}catch(e){o.error(e)}}()}))},__protected__:{applePayCanMakePaymentsWithActiveCard:function(){var e={then:function(e){return e(null)},catch:function(){}};return pn.applePayMerchantId&&o.__protected__.isApplePayAllowed()&&pn.applePayMerchantId?window.ApplePaySession.canMakePaymentsWithActiveCard(pn.applePayMerchantId):e}}}}();pn.container.register("applePayIntegrationService",{useValue:mn}),pn.applePayIntegrationService=pn.container.resolve("applePayIntegrationService");var gn=function(){var e,t,n=pn.container.resolve("postmessage"),r=pn.container.resolve("util"),o=pn.container.resolve("ajax"),i="datatrans-applepay-button",a=!1,s=null,c=null,u=!1,l=function(t){e=t.sender,g().then(v).then(h)},d=function(t){var r=null;t||(r={message:t}),n.send("datatrans-applepay-service-error",r,e)},p=function(e){t=e.params,g().then(v).then(f).catch((function(){d("Apple Pay button init error")}))},f=function(){PaymentButton.init(t.applePayConfig)},m=function(){var e=document.getElementById(i);null!==e&&null!==e.firstElementChild?e.firstElementChild.click():d("Could not process with Apple Pay. Please, try again.")},g=function(){return null!==c||(c=new Promise((function(e){o.request({url:tp.getApiEndpoint()+"/anon/datatrans/applepay/config",data:{aid:tp.aid},dataType:"jsonp",jsonpCallback:"jsonpCallback",success:function(t){var n=t.config;e(n.url)}})}))),c},v=function(e){if(null!==s)return s;var t="datatrans-apple-pay";return document.getElementById(t)?void 0:s=new Promise((function(n){var r=document.createElement("script");r.addEventListener("load",(function(){return n(null)})),r.src=e,r.id=t,document.body.appendChild(r)}))},h=function(){u||(PaymentButton.on("init",y),PaymentButton.on("create",w),PaymentButton.on("token",b),PaymentButton.on("abort",(function(){d(null)})),PaymentButton.on("unsupported",(function(){d("No payment method is supported")})),PaymentButton.on("error",(function(e){e&&(r.error("datatransApplePayIntegrationService. apple pay button error: "+e),d("Could not process with Apple Pay. Please, try again."))})),u=!0)},y=function(){var e=_();PaymentButton.create(e,t.paymentConfig).catch((function(){d("Apple Pay button create error")}))},w=function(){r.log("datatransApplePayIntegrationService paymentButtonOnCreate"),n.send("datatrans-applepay-service-ready",null,e)},b=function(t){r.log("datatransApplePayIntegrationService paymentButtonOnToken"),n.send("datatrans-applepay-service-token",t.token.details.token,e)},_=function(){var e=document.getElementById(i);return null===e&&((e=document.createElement("div")).setAttribute("id",i),e.style.display="none",document.body.appendChild(e)),e.innerHTML="",e};return{name:"datatransApplePayIntegrationService",initialize:function(){!r.__protected__.isApplePayAllowed()&&a||(a=!0,n.subscribe("datatrans-applepay-loaded",l),n.subscribe("datatrans-applepay-checkout-initiate-purchase",p),n.subscribe("datatrans-applepay-make-purchase",m))}}}();pn.container.register("datatransApplePayIntegrationService",{useValue:gn}),pn.datatransApplePayIntegrationService=pn.container.resolve("datatransApplePayIntegrationService");var vn=function(){var e,t=pn.container.resolve("postmessage"),n=pn.container.resolve("util"),r=null,o=null,i=!1,a="";t.subscribe("stripe-applepay-initialized",(function(){s()})),t.subscribe("stripe-applepay-initiate-purchase",(function(e){s().then((function(){var t=e.params.apiKey;null===r&&(r=window.Stripe(t));var n=e.params.paymentRequestPayload;return r.paymentRequest(n)})).then((function(e){return o=e,e.canMakePayment()})).then((function(e){i=e&&e.applePay,t.broadcast("stripe-applepay-initiate-purchase-complete",{canMakePayment:i}),i&&(o.on("cancel",(function(){t.broadcast("stripe-applepay-start-purchase-complete"+a,{status:"fail"})})),o.on("paymentmethod",(function(e){var n=e.paymentMethod.billing_details.address,r={countryCode:n.country,zipCode:n.postal_code,billingZipCode:n.postal_code},o=e.paymentMethod.id;t.broadcast("stripe-applepay-start-purchase-complete"+a,{status:"success",paymentMethodId:o,payerEmail:e.payerEmail,billingAddress:r}),e.complete("success")})))})).catch((function(e){n.error(e),t.broadcast("stripe-applepay-initiate-purchase-complete",{canMakePayment:!1})}))})),t.subscribe("stripe-applepay-start-purchase",(function(e){a=e.params.termId||"";var t=e.params.paymentRequestPayload;o.update(t),o.show()})),t.subscribe("stripe-applepay-abort-request",(function(){o&&o.abort(),t.broadcast("stripe-applepay-reopen-request")}));var s=function(){if(null!=e)return e;if(!document.getElementById("stripe.js")){var t=document.createElement("script");return t.src="https://js.stripe.com/v3/",t.id="stripe.js",document.body.appendChild(t),e=new Promise((function(e){t.onload=function(){e(null)}}))}};return{name:"stripeApplePayIntegrationService"}}();pn.container.register("stripeApplePayIntegrationService",{useValue:vn}),pn.stripeApplePayIntegrationService=pn.container.resolve("stripeApplePayIntegrationService");var hn=function(){var e=pn.container.resolve("postmessage"),t=pn.container.resolve("util");e.subscribe("obi-handle-3ds-challenge",(function(e){var r=e.params;if(window.obick)n(r);else{if(-1===["https://jsl.qat.obi.aol.com/obipmservice/obick.umd.js","https://jsl.prod.obi.aol.com/obipmservice/obick.umd.js"].indexOf(r.obickUrl))return void t.error("Untrusted obickUrl detected: "+r.obickUrl);var o=document.createElement("script");o.src=r.obickUrl,o.id="obick.js",document.body.appendChild(o),o.onload=function(){t.log("".concat(o.id," onload")),n(r)}}}));var n=function(n){if(n.stepUpUrl&&0!==n.stepUpUrl.indexOf("http"))t.error("There is no link in params.stepUpUrl for OBI");else{var r={stepUpUrl:n.stepUpUrl,jwt:n.jwt,transactionId:n.transactionId,zIndex:n.zIndex};window.obick.handle3dsChallenge(r).then((function(n){t.debug(n),e.broadcast("obi-3ds-challenge-complete",{threeDSTransactionId:n.threeDSTransactionId,challengeStatus:n.challengeStatus})})).catch((function(n){t.error(n),e.broadcast("obi-3ds-challenge-complete",{error:"challenge-error",payload:n})}))}};return{name:"obi3DSChallenge"}}();pn.container.register("obi3DSChallenge",{useValue:hn}),pn.obi3DSChallenge=pn.container.resolve("obi3DSChallenge");var yn=function(){var e=pn.container.resolve("jqUtils"),t=pn.container.resolve("util"),n=pn.container.resolve("api"),r=pn.container.resolve("user"),o=pn.container.resolve("pianoId"),i={displayMode:"inline",containerSelector:"body",loginSuccess:d},a="reader_id",s=function(){return"/"+pn.aid+"/execution/amp"},c=function(){window.location.href=t.getQueryParamByName("return")+"#success=true"};var u=function(e){return/^\w+$/i.test(e)},l=function(e){var r={};if(r.reader_id=t.getQueryParamByName(a),r.reader_id){var o=pn.getExperienceEndpoint(!1);n.callApi(s()+"/logout",r,e,o,!1,!0)}else t.log("reader_id cannot be empty")};function d(e,r){var o=e||{};if(o.reader_id||(o.reader_id=t.getQueryParamByName(a)),o.reader_id){var i=pn.getExperienceEndpoint(!1);n.callApi(s()+"/login",o,r,i,!1,!0)}else t.log("reader_id cannot be empty")}return{name:"amp",showLogin:function(n){n=n||{};var a=r.getProvider();if(a.getName()===o.getName()){var s;s=n.loginSuccess&&e.isFunction(n.loginSuccess)?n.loginSuccess:c;var u=function(){d({},s)},l=Object.assign({},i,n);r.isUserValid()?u():(l.loginSuccess=u,o.show(l))}else t.log("Current user provider"+a.name+" is not allowed for amp")},logout:function(t){t=e.isFunction(t)?t:c,r.getProvider().getName()===o.getName()?o.logout((function(){l(t)})):l(t)},login:function(n){var i=r.getProvider().getName();i===o.getName()&&(n=n?e.deepExtend({},n,{userProvider:i}):{userProvider:i});var a={user_transient:!0,user_provider:"publisher_user"};if(n&&n.readerId&&(a.reader_id=n.readerId),n&&n.userToken&&(a.user_token=n.userToken),n&&n.userProvider&&(a.user_provider=n.userProvider,a.user_transient=!1),!function(n){if(n&&n.userState&&e.isPlainObject(n.userState)){var r=Object.keys(n.userState);if(r.filter(u).length!==r.length)return t.error("user_state accept only contain letters, numbers and underscore"),!1}return!0}(n))return!1;n&&n.userState&&(a.user_state=JSON.stringify(n.userState));d(a,(function(t){0===t.code?n.loginSuccess&&e.isFunction(n.loginSuccess)&&n.loginSuccess():n.loginFail&&e.isFunction(n.loginFail)&&n.loginFail()}))}}}();pn.container.register("amp",{useValue:yn}),pn.amp=pn.container.resolve("amp");var wn=function(){var e,t=pn.container.resolve("postmessage"),n=[{resourceRegExp:new RegExp("/checkout/offer/show"),label:"showOffer"},{resourceRegExp:new RegExp("tinypass.min.js$"),label:"tinypassMinJS"},{resourceRegExp:new RegExp("/xbuilder/experience/execute"),label:"experienceExecute"}],r=!1,o=[];function i(e){e.forEach((function(e){!function(e){!function(e){return n.some((function(t){return e.name.match(t.resourceRegExp)}))}(e)||function(e){if(!a())return void o.push(e);o.push(e),s()}(e)}(e)}))}function a(){return r&&e}function s(){!a()||(o.forEach((function(n){t.send("EVENT_TP_PERFORMANCE_DATA",{entry:n},e)})),o=[])}return function(){if(window.performance&&window.PerformanceObserver&&"function"==typeof performance.getEntries){var n=window.PerformanceObserver.prototype.observe;window.PerformanceObserver.prototype.observe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{n.apply(this,e)}catch(e){}},t.subscribe("EVENT_LOGGER_READY",(function(t){e=t.sender,r=!0,s()})),i(performance.getEntries()),new PerformanceObserver((function(e){i(e.getEntries())})).observe({entryTypes:["measure","resource"]})}}(),{name:"performanceMetrics"}}();pn.container.register("performanceMetrics",{useValue:wn}),pn.performanceMetrics=pn.container.resolve("performanceMetrics");var bn=function(){var e=pn.container.resolve("api"),t=pn.container.resolve("pianoId");return{name:"doubleOptIn",check:function(){!pn.user.isUserValid()||new Promise((function(t){e.callApi("/email/confirmation/check",{},(function(e){t(e)}))})).then((function(e){e&&!1===e.data&&t.showEmailConfirmationRequired()}))}}}();pn.container.register("doubleOptIn",{useValue:bn}),pn.doubleOptIn=pn.container.resolve("doubleOptIn");var _n=function(){var e=pn.container.resolve("api"),t=pn.container.resolve("postmessage"),n=pn.container.resolve("util"),r=n.debounce((function(){new Promise((function(t,n){var r={aid:pn.aid};e.callApi(o,r,(function(e){e&&e.data&&t(e.data),n(e.message)}))})).then(i,a)}),1500),o="/externalVerification/synchronizeSubscriptions",i=function(e){t.broadcast("NEWSCYCLE_HAS_BEEN_SYNCHRONIZED_SUCCESS",{data:e})},a=function(e){n.error("newscycle module: sync request failed with error: "+e)};return{name:"newscycle",syncSubscriptions:r}}();pn.container.register("newscycle",{useValue:_n}),pn.newscycle=pn.container.resolve("newscycle");var kn=function(){var e=pn.container.resolve("postmessage"),t={enabled:!1,captcha3SiteKey:"",aid:""};function n(){window.grecaptcha.ready(r)}var r=function(){var e=document.createElement("div");e.id="tp-recaptcha",document.body.appendChild(e),window.grecaptcha.render("tp-recaptcha",{sitekey:t.captcha3SiteKey,size:"invisible","error-callback":function(){e.style.display="none"}})},o=function(){window.onCaptchaV3Load=n;var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?onload=onCaptchaV3Load&render=explicit",e.type="text/javascript",e.async=!0,e.defer=!0,document.head.appendChild(e)},i=function(){e.subscribe("set-captcha-v3-config",(function(e){!function(e){e&&e.enabled&&(t=e,o())}(e.params.config)})),e.subscribe("get-captcha-v3-config",(function(){e.broadcast("get-captcha-v3-config-value",{config:t})}))};e.subscribe("get-captcha-v3-token",(function(e){window.grecaptcha.ready((function(){return a(e.params.action)}))}));var a=function(t){window.grecaptcha.execute({action:t}).then((function(t){e.broadcast("captcha-v3-token",{token:t})})).catch((function(){e.broadcast("captcha-v3-token",{token:""})}))};return{name:"captchaV3",addCaptchaV3:function(){i()}}}();pn.container.register("captchaV3",{useValue:kn}),pn.captchaV3=pn.container.resolve("captchaV3");pn.container.register("tinypassErrorHandler",{useValue:function(e){void 0===e&&(e=pn.container);var t=e.resolve("postmessage"),n=e.resolve("api"),r=e.resolve("util"),o=e.resolve("analytics"),i=e.resolve("versionService"),a="EVENT_TP_ERROR_HANDLER",s="sdk",c=[],u=!0,l=function(e){if(h(e)&&!g(c,e)){e.tags||(e.tags=["unknown"]),e.aid=pn.aid,e.v=i.getTinypassVersion();var t={details:e};c.push(t)}};var d=function(e){var t=e.params;Array.isArray(t)&&t.forEach((function(e){e.tags.push(pn.aid),l(e)}))};function p(e){var t,n;if(e.message.toLowerCase().indexOf("script error")>-1)l({message:"Probably that is Piano error.",url:window.location.href,tags:[s]});else{var r=null==e?void 0:e.error;if(v(null==r?void 0:r.stack))return!1;l({stack:null!==(t=null==r?void 0:r.stack)&&void 0!==t?t:"n/a",message:null!==(n=null==r?void 0:r.message)&&void 0!==n?n:"n/a",userAgent:navigator.userAgent,tags:[s]})}return!1}var f=function(){setInterval((function(){m(),u=!1}),15e3)},m=function(){var e=c.filter((function(e){return!e.send}));if(0!==e.length){var t=e.map((function(e){return e.details})),r={type:"console-error-message",srcType:"ts",log_message:JSON.stringify(t)};o.log.event({eventType:St.LOG_BEACON_REQUEST,payload:{url:n.getEndpoint()+"/anon/error/log",params:r}}),e.forEach((function(e){return e.send=!0}))}},g=function(e,t){var n=e.map((function(e){return JSON.stringify(e.details)})),r=JSON.stringify(t);return-1!==n.indexOf(r)},v=function(e){return-1===(null==e?void 0:e.indexOf("tinypass"))},h=function(e){var t=!!r.__protected__.getLocalStorageItem("tinypassErrorHandlerTestMode");return e.tags.indexOf("wgt_err")>=0||t||0===y(0,1e3)},y=function(e,t){var n=e-.5+Math.random()*(t-e+1);return Math.round(n)},w=function(e,t){return void 0===e&&(e=[]),t?e.concat(t):e};return{name:"tinypassErrorHandler",addError:function(e,t){try{var n={place:t,tags:[s]};e instanceof Error?(n.stack=e.stack,n.message=e.message):n.stack=JSON.stringify(e),u&&(n.tags=w(n.tags,"initError")),l(n)}catch(e){}},initialize:function(){try{pn.isSandbox()||(t.subscribe(a,d),null===(e=window.addEventListener)||void 0===e||e.call(window,"error",p),f())}catch(e){console.warn("Cannot start watching errors",e)}var e}}}()}),pn.tinypassErrorHandler=pn.container.resolve("tinypassErrorHandler");var Cn=s(c());pn.container.register("main",{useValue:function(e){void 0===e&&(e=pn.container);var t=e.resolve("api"),n=e.resolve("cookie"),r=e.resolve("jqUtils"),o=e.resolve("util"),i=e.resolve("logging"),a=e.resolve("fingerprint"),s=e.resolve("user"),c=e.resolve("sha1"),u=e.resolve("activetimer"),l=e.resolve("scrollDepth"),d=e.resolve("doubleClickForPublisher"),p=e.resolve("offer"),f=e.resolve("viewportExit"),m=e.resolve("idle"),g=e.resolve("experience"),v=e.resolve("pianoId"),h=e.resolve("pianoEsp"),y=e.resolve("applePayIntegrationService"),w=e.resolve("datatransApplePayIntegrationService"),b=e.resolve("cxense"),_=(e.resolve("tinypassErrorHandler"),e.resolve("captchaV3")),k=pn.container.resolve("postmessage"),C=e.resolve("composerControlPolicy"),I=e.resolve("analytics"),S="exrs",E={minutes:120},P=null,x="voucher_code",T="__pvi",A=!1,O=!1,M={},N=null,R={APPLE_PAY_BT:25,APPLE_PAY_SS:38,APPLE_PAY_STRIPE:41,APPLE_PAY_PW:42,DATATRANS_APPLE_PAY:61},L=new Set(Object.values(R)),U=void 0,j=[],D=!1,B=function(){if("iP"===navigator.platform.substr(0,2)){var e=/constructor/i.test(window.HTMLElement),t=window.navigator,n=t.userAgent,r=!!window.indexedDB;if((-1===n.indexOf("Safari")||-1===n.indexOf("Version")||t.standalone)&&(r||!e)&&window.statusbar.visible&&(window.webkit&&window.webkit.messageHandlers||!e||r))return!0}return!1}();var F,V,q,z=function(){return o.parseJSON(o.__protected__.getCookie(T),!0)||{}},G=function(){return o.getCurrentDomainFromCookie(T,!0)},H=function(e,t){var n=M;M={};var r={};for(var o in n)if(n.hasOwnProperty(o))for(var i in r[o]=r[o]||[],n[o])n[o].hasOwnProperty(i)&&r[o].push(n[o][i]);we(r,e,t)},W=function(){return g.execute.invokeCount>0&&Cn.dataLayer.refresh(),b.__protected__.clearWidgets(),Cn.dataLayer.get("pageViewId")};function J(){function e(e,t,n){n=n||"0";var r=String(e);return r.length>=t?r:new Array(t-r.length+1).join(n)+r}if(ke())return Ce();var t=o.randomString(16),n=c.hash([a.getFingerprint(),window.location.href].join("")),r=new Date;return[[e(r.getFullYear(),4),e(r.getMonth()+1,2),e(r.getDate(),2),e(r.getHours(),2),e(r.getMinutes(),2),e(r.getSeconds(),2),e(r.getMilliseconds(),3)].join("-"),t,n].join("-")}var Q=function(e){var t={path:"/",expires:1,domain:V.currentDomain};return e&&(t.domain=e),t},X=function(e,t){e.domain=t.domain,e.time=(new Date).getTime(),o.__protected__.setCookieConsent("vx",T,o.toJSON(e,!0),t)},Y=function(e){var t=(new Date).getTime(),n=6e4*o.getBrowserTimezoneOffset(),r=o.getAppTimezoneOffset(),i=new Date(e.time).setHours(0,0,0,0)+864e5-n-r;return e.time+18e5<t||t>=i},$=function(){if(o.__protected__.cameFromFbSubscriptions()||!V.currentDomain)return!1;var e=o.getReferrer();if(N&&N===e)return!1;var t=o.getHostname(e),n=new RegExp(V.currentDomain.replace(/\./g,"\\.").replace(/^\\./,"\\.?")+"$").test(t);return Boolean(t)&&!n},K=function(){var e=z();(!e||!e.id||!e.time||Y(e)||$())&&(e.id="v-"+J()),function(e){var t=Q();e.domain||V.currentDomain?X(e,t):o.waitCall("domainIsReceived",(function(n){se(n),t.domain=n,X(e,t)}))}(e),V.visit=e},Z=function(e,t,n){var i,s,c,u="manual";if(void 0===t)t=window.location.href;else{if("object"!=_typeof(t))throw new Error("First parameter to track page must be a URL or an object");var l=t;if(void 0===l.url)throw new Error("Must supply url property");t=l.url,void 0!==l.tags&&(n=l.tags),void 0!==l.submitType&&(u=l.submitType)}n||(n=pn.tags),pn.customPageUrl&&(e.custom_page_url=o.prepareUrlParameter(pn.customPageUrl)),void 0!==n?"[object Array]"!==Object.prototype.toString.call(n)&&"[object String]"!==Object.prototype.toString.call(n)?(o.log("Tags must be an array or a comma-separated string, ignoring supplied tags"),n=""):n instanceof Array&&(n=n.join(",")):n="",q.track(),e.page_session_id=q.pageSessionId,e.track_count=q.trackCount,he(e),pn.contentCreated?c=pn.contentCreated:pn.contentCreatedSelector&&r.queryEl(pn.contentCreatedSelector)&&(c=null===(i=r.queryEl(pn.contentCreatedSelector))||void 0===i?void 0:i.innerHTML),c&&(pn.contentCreated||(pn.contentCreated=c),e.content_created=c),"boolean"==typeof pn.contentIsNative&&(e.content_is_native=pn.contentIsNative),pn.zone&&(e.zone=pn.zone),pn.itemId&&(e.item_id=pn.itemId);var d=pn.contentSection||ae("section");d&&(e.content_section=d);var p=pn.contentAuthor||ae("author");p&&(e.content_author=p);var f=pn.contentId||ae("id");f&&(e.content_id=f);var m,g=o.__protected__.getCookie("sailthru_hid");g&&(e.sailthru_hid=g),N&&N===o.getReferrer()?m="":(m=o.getReferrer(),N=m),e.referer=o.prepareUrlParameter(m),n&&(e.tags=n),e.url=o.prepareUrlParameter(t),e.fingerprint=a.getFingerprint(),e.adblocker=o.getAdblockStatus(),(e.adblocker===o.ADBLOCKER_STATUS.ENABLED_AFTER_DISABLED||e.adblocker===o.ADBLOCKER_STATUS.ENABLED)&&(pn.setCustomParam("_abr",o.getAdblockerStatusReason(),"user",!0),pn.setCustomParam("_absh",o.getAdblockerHistoryCookieInfo().cookieValue+"","user",!0)),e.timezone_offset=o.getBrowserTimezoneOffset(),e.submit_type=u;var v=ie();e.visit_id=v,e.new_visit=re(v);var h=function(){return Cn.dataLayer.get("content")||{}};return e.keywords=(null===(s=h().keywords)||void 0===s?void 0:s.join(","))||"",e.title=h().title||"",e.description=h().description||"",e.content_type=h().type||"",["keywords","title","description","content_type"].forEach((function(t){e[t]=e[t].substr(0,8192)})),e.custom_variables=JSON.stringify(pn.customVariables),te(e),e},ee=function(){var e={aid:pn.aid},t=o.getTbcCookie(),n={active:u.getActiveTimeInSeconds(),total:u.getTotalTimeInSeconds()};t&&(e.tbc=t),n.total<n.active&&(n.total=n.active),e.time_spent=JSON.stringify(n),e.scroll=JSON.stringify({max_page_height:l.getMaxDocumentHeight(),max_depth:l.getMaxScrollDepth()}),e.viewport_exit=f.getSumOfCodesDirection(),e.url=o.prepareUrlParameter(window.location.href),he(e),e.visit_id=ie(),oe();var i={},a=d.getAds(200);return a.length&&(i.dfp=a),r.isEmptyObject(i)||(e.ads=JSON.stringify(i)),e},te=function(e){var t={};return pn.customParams&&(t=r.deepExtend({},pn.customParams)),r.isEmptyObject(t)||(e.custom_params=JSON.stringify(t)),e},ne=function(){return q.id},re=function(e){var t=V.lastTrackedVisitId!==e;return V.lastTrackedVisitId=e,t},oe=function(){V.checkForRefresh=!0},ie=function(){return V.checkForRefresh&&(K(),V.checkForRefresh=!1),V.visit.id},ae=function(e){return(document.head.querySelector("meta[name="+e+"]")||{}).content},se=function(e){V.currentDomain=e},ce=function(){return!(pn.endpoint&&pn.endpoint.match(/sandbox/))},ue=function(e,n,r,a){pn.aid&&0!==pn.aid.length?!ce()||o.waitCall("refreshAccessTokenList",(function(){o.waitCall("offerCreate",(function(){i.setTime("track"),o.startCall("pageTrack"),t.callApi(e,n,(function(e){o.doneCall("pageTrack"),r&&r(e)}),pn.getExperienceEndpoint(!1)+"/api/v3",a)}))})):o.log("Must supply a valid tp.aid before calling tp.init()")},le=function(){A&&q.trackCount>0&&(de(),ve())},de=function(e){if(ce()&&!C.denyAll)try{var t=ee();f.isInitialized()&&f.resetSumOfCodesDirectionToDefault(),I.log.event({eventType:St.LOG_BEACON_REQUEST,payload:{url:pn.getExperienceEndpoint(!1)+"/api/v3/page/unload",params:t}}),me()}catch(e){o.error("main: error on tracking page unload event: ",e)}},pe=function(){O||(O=!0,de(!0))},fe=function(){A=!0},me=function(){A=!1},ge=function(){A&&pe(),H(!0,"beacon_request"),g.__protected__.sendStatisticsExecutedNodes("unload")},ve=function(){u.resetRecordedTime()},he=function(e){e&&(e.pageview_id=ne())},ye=function(e,t){if(ce()&&!C.denyAll)try{le();var n=Z({},e,t);ue("/page/track",n),fe()}catch(e){o.error("main: error on page tracking event: ",e)}},we=function(e,t,n){},be=function(){var e=o.getQueryParamByName(x);e&&p.startRedeemVoucher({voucherCode:e})},_e=function(){return P||(P=new Promise((function(e){if(null!==o.__protected__.getLocalStorageItem(S)&&e({has_active_apple_pay_card:o.__protected__.getLocalStorageItem(S)}),!pn.applePayMerchantId)return e({has_active_apple_pay_card:null}),P;Se((function(e){g.registerCallback("experienceFlow",(function(){U=!0,e(!0)}))})).then((function(t){var n=function(t){e({has_active_apple_pay_card:t}),o.__protected__.setLocalStorageItem("vx",S,t,E)};t?y.__protected__.applePayCanMakePaymentsWithActiveCard().then(n):n(null)}))})))};function ke(){return b.__protected__.isActivated()}var Ce=function(){return o.__protected__.randomStringCxCompatible()};function Ie(e){return function(t){var n=t.params;void 0===U&&(U=function(e){if(!Array.isArray(e)||!e.length)return!1;for(var t=0,n=e;t<n.length;t++){var r=n[t];if(L.has(r))return!0}return!1}(n)),j=n||[],e(U)}}function Se(e){return void 0!==U?Promise.resolve(U):B?(U=!1,Promise.resolve(!1)):new Promise((function(t){e(t)}))}var Ee=function(){Se((function(e){k.subscribe("ACTIVE_PAYMENT_METHODS_IDS_INITIALIZED",Ie(e)),k.subscribe("MY_ACCOUNT_ACTIVE_PAYMENT_METHODS_IDS_INITIALIZED",Ie(e))})).then((function(e){!e||(!D&&r.isFunction(y.initialize)&&(D=!0,y.initialize()),Pe(j))}))},Pe=function(e){var t=-1!==e.indexOf(R.DATATRANS_APPLE_PAY);r.isFunction(w.initialize)&&t&&w.initialize()};return{name:"main",fetchVisitId:ie,trackPageUnloadIfNecessary:le,externalResourcesDelay:_e,pageTrack:ye,trackPage:function(e,t){return ye(e,t)},buildPageTrackParams:Z,fetchPageViewId:ne,trackPageUnload:de,registerTrackUnload:fe,isRegisteredTrackUnload:function(){return A},unregisterTrackUnload:me,resetTimer:ve,resetAds:function(){d.resetAds()},trackAd:function(e,t,n){M[e]||(M[e]={}),M[e][t]=n,F()},init:function(){if(Cn.dataLayer.isReady||(o.log("DataLayer should be initialized wile calling tp.init()"),o.log("DataLayer was initialized by default configs"),Cn.dataLayer.init()),pn.aid&&0!==pn.aid.length){F=o.debounce(H,3e3),V={currentDomain:G(),lastTrackedVisitId:z().id,visit:{},checkForRefresh:!1},q={id:W(),pageSessionId:"s-"+J(),trackCount:0,tracked:!1,track:function(){q.tracked?q.id=W():q.tracked=!0,q.trackCount++}},ke()&&pn.cxenseSiteId&&Cn.dataLayer.set("siteId",pn.cxenseSiteId),K(),pn.isMockMode||(r.isFunction(d.initialize)&&d.initialize(),r.isFunction(u.initialize)&&u.initialize(),r.isFunction(l.initialize)&&l.initialize()),r.isFunction(m.initialize)&&m.initialize(),Ee(),r.isFunction(h.__protected__.init)&&setTimeout((function(){h.__protected__.init().catch((function(){}))}),5e3),r.isFunction(s.refreshAccessToken)&&s.refreshAccessToken(),_e();var e=s.getProvider();e.getName()===v.getName()&&e.__protected__.extendUserToken(),r.on(window,"beforeunload",(function(){return ge()})),r.on(window,"unload",(function(){return ge()})),_.addCaptchaV3();var t="cxTrackingId",n=o.getQueryParamByName(t);n&&(o.removeQueryParamByName(t),I.log.event({eventType:St.LOG_AUTO_MICRO_CONVERSION,payload:{trackingId:n,eventGroupId:"click",eventType:It.EXTERNAL_LINK,customParams:{href:location.href,source:"CX"}}}))}else o.log("Must supply a valid tp.aid before calling tp.init()")},checkToRunWidgetImmediately:function(){var e;be(),!(e=o.getQueryParamByName("verification_code"))||"pianoId"!==s.getProvider().name||o.waitCall("offerCreate",(function(){v.isUserValid()?v.__protected__.showEmailConfirmation({verification_code:e}):v.show({verification_code:e})})),v.checkAndShowEmailIsNotConfirmed(),r.isFunction(p.checkThreeDSRedirect)&&p.checkThreeDSRedirect()},trackAds:we,appHasApplePay:function(){return U},__private__:{VISIT_ID_COOKIE:T,VOUCHER_QUERY:x,collectedAds:M,unloadRegistered:A,unloadTriggered:O,getPageView:function(){return q},getVisitContainer:function(){return V},track:ue,checkVoucher:be,setPageViewId:he,currentEnvironmentSupportsPageTrack:ce,buildPageUnloadParams:ee,invalidateLastVisit:function(){var e=Q();n.remove(T,e)},getCurrentDomain:G,loadLastVisit:z,setVisitCurrentDomain:se,saveVisitCookie:X,getVisitCookieOptions:Q,isTimeExpired:Y,refreshVisit:K,generatePageViewId:J,trackCollectedAds:H,unloadHandler:ge,unloadAction:pe,buildPageCustomParams:te,hasExternalReferrer:$}}}()}),pn.main=pn.container.resolve("main");var In=s(c()),Sn=s(d()),En=function(){var e=null,t=function(t){e=t&&C(C({},e),t),In.dataLayer.isReady&&t&&(In.dataLayer.set("content",e),e=null)};return{set:function(e,n){var r;return t(((r={})[e]=n,r))},get:function(t){var n;return In.dataLayer.isReady?null===(n=In.dataLayer.get("content"))||void 0===n?void 0:n[t]:null==e?void 0:e[t]},init:function(){return t(e)}}}(),Pn={predefineValues:[]};window.tp&&window.tp.length&&(Pn.predefineValues=O([],window.tp||[],!0)),pn.tpPredefinedOptions=Pn,pn.container.register("tpPredefinedOptions",{useValue:Pn});var xn=function(){function e(e,t,n,r,o,i,a){this.tpPredefinedOptions=e,this.css=t,this.tinypassErrorHandler=n,this.gaService=r,this.ga4Service=o,this.utilService=i,this.consent=a,this.isDataLayerEnabled=!0,this.fullTPVersion=!1,this.isInitialized=!1,this.aid="",this.isSensitiveDataProtectionEnabled=!1,this.affiliateTokenName="affiliateToken",this.cxCdnUrl="https://cdn.cxense.com",this.c1XLoadCce=!0,this.c1XIntegrationVersion="v2",this.cxenseLibAwaitingTimeout=0,this.cxenseLibAwaitingRetryCount=0,this.trackPages=!0,this.debug=!1,this.userRef="",this.usePianoIdLiteUserProvider=!1,this.useTinypassAccounts=!1,this.useCondeUserProvider=!1,this.useGigyaUserProvider=!1,this.usePianoIdUserProvider=!1,this.useAidSpecifiedCookies=!1,this.sandbox=!1,this.zIndexes={backdrop:3e5,modal:300050,close:300100},this.customPreChecks=[],this.customParams={},this.externalLibraries=[],this.externalLibrariesCallbacks=[],this.customVariables={},this.locale="",this.trackPageView=!0,this.redirectToFbTimeout=3,this.isDoubleOptInCheckOnAccessCheckEnabled=!1,this.isMockMode=!1,this.inappBrowserReturn=!1,this.events=[],this.appList=[],this.cacheableShowTemplate=!0,this.initCallbacks=[],this.mainModuleInited=!1,this.restCallbacks=[],this.initTries=0,this.callbacks=[],t.loadOfferCss()}return Object.defineProperty(e.prototype,"tags",{get:function(){var e;return null===(e=En.get("tags"))||void 0===e?void 0:e.join(",")},set:function(e){var t;t=Array.isArray(e)?e:"string"==typeof e?[e]:null,En.set("tags",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentIsNative",{get:function(){return En.get("isNative")},set:function(e){En.set("isNative",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentId",{get:function(){return En.get("id")},set:function(e){En.set("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentCreated",{get:function(){var e;return(null===(e=En.get("createdAt"))||void 0===e?void 0:e.toString())||""},set:function(e){En.set("createdAt",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentAuthor",{get:function(){var e;return(null===(e=En.get("authors"))||void 0===e?void 0:e.join(","))||""},set:function(e){En.set("authors",[e])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSection",{get:function(){return En.get("section")},set:function(e){En.set("section",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zone",{get:function(){return En.get("zone")},set:function(e){En.set("zone",e)},enumerable:!1,configurable:!0}),e.prototype.initTp=function(){var e=this;try{var t=this.tpPredefinedOptions.predefineValues;if(this.tpPredefinedOptions.predefineValues=[],t.forEach((function(t){"function"==typeof t[1]?"init"===t[0]?e.initCallbacks.push(t[1]):e.restCallbacks.push(t):"init"===t[1]&&"function"==typeof t[2]?e.initCallbacks.push(t[2]):e.push(t)})),!this.aid&&this.initTries<10)return this.initTries++,void setTimeout((function(){return e.initTp()}),50);if(!this.aid)return;for(this.tinypassErrorHandler.initialize();this.restCallbacks.length;)try{var n=this.restCallbacks.shift();this.push(n)}catch(e){console.error(e),pn.tinypassErrorHandler.addError(e)}this._init(),this.externalLibraries.length&&this.realizeExternalLibraries(),this.isInitialized=!0,window.___tp=function(){}}catch(e){pn.tinypassErrorHandler.addError(e,"initTP"),console.error("init PN process error",e)}},e.prototype.realizeExternalLibraries=function(){var e=this,t=[];this.externalLibraries.forEach((function(n){var r=e.requireJsFile(n);t.push(r)})),Promise.all(t).then((function(){if(e.externalLibraries=[],e.externalLibrariesCallbacks)for(var t=0;t<e.externalLibrariesCallbacks.length;++t)An.externalLibrariesCallbacks[t]();An.externalLibrariesCallbacks=[]}))},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,o;for(n=0;n<e.length;n++)if("string"==typeof(r=(o=e[n]).shift())||r instanceof String){if(!this[r])return void console.error("Undefined method "+r);this[r].apply(this,o)}else r.apply(this,o)},e.prototype.init=function(e){this.isInitialized?(this.mainModuleInited||(this.mainModuleInited=!0,this.initMainModuleAfterInitCbk()),e&&e()):(e&&this.tpPredefinedOptions.predefineValues.push(["init",e]),this.initTp())},e.prototype._init=function(){var e={};if((this.cookieDomain||this.cookiePath)&&(e.cookieDefault={domain:this.cookieDomain,path:this.cookiePath}),In.dataLayer.init(e),En.init(),this.cxenseSiteId&&In.dataLayer.set("siteId",this.cxenseSiteId),pn.consent.__protected__.init(),pn.util&&pn.util.hasQueryParamByName&&pn.util.hasQueryParamByName("xpdebug")&&pn.setDebug(!0),pn.util.setTpccCookies(),pn.util.isSafariOrIOsUiWebView()&&!pn.user.isUserValid()&&pn.util.getQueryParamByName("userToken")){var t=pn.util.getQueryParamByName("cookieDomain"),n=pn.util.getQueryParamByName("userToken"),r=pn.util.getQueryParamByName("tokenListValue");pn.util.setAccessTokenListCookie({cookie_domain:t,value:r},n),pn.util.removeQueryParamByName("userToken"),pn.util.removeQueryParamByName("cookieDomain"),pn.util.removeQueryParamByName("tokenListValue")}if(this.mainModuleInited||(this.mainModuleInited=!0,this.initMainModuleAfterInitCbk()),pn.itp.init(),!this.aid){var o=new Error("Incorrect aid integration: ".concat(An.aid," url: ").concat(window.location.href));this.tinypassErrorHandler.addError(o)}pn.logging.setTime("completeInit")},e.prototype.initMainModuleAfterInitCbk=function(){for(pn.user.providerInit(),this.appList.indexOf(this.aid)<0&&(this.appList.push(this.aid),pn.main.init());this.initCallbacks.length;)try{this.initCallbacks.shift()()}catch(e){console.error(e),pn.tinypassErrorHandler.addError(e)}if(pn.main.checkToRunWidgetImmediately(),this.events){for(var e=0;e<this.events.length;e++)this.events[e]();this.events=[]}},e.prototype.requireJsFile=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.onload=t,r.onerror=t,r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}))},e.prototype.setAid=function(e){this.aid=e},e.prototype.enableSensitiveDataProtection=function(e){this.isSensitiveDataProtectionEnabled=e},e.prototype.reload=function(){location.href=pn.util.removeVoucherCodeFromUrl(location.href)},e.prototype.removeSharedAccountCodeFromUrl=function(){location.href=pn.util.removeSharedAccountCodeFromUrl(location.href)},e.prototype.setGAClientId=function(e){this.gaClientId=e,this.gaService.recreateWithClientId(e)},e.prototype.getGAClientId=function(){return this.gaClientId},e.prototype.enableGACrossDomainLinking=function(e){var t=this;this.gaCrossDomainLinking=!0;var n=Date.now();!function r(){var o=window.ga;if(o&&"function"==typeof o)try{o((function(n){if(void 0!==n&&void 0===e)t.setGAClientId(n.get("clientId"));else if(void 0!==e)for(var r=o.getAll(),i=0;i<r.length;i++){var a=r[i];if(a.get("trackingId")===e){t.setGAClientId(a.get("clientId"));break}}}))}catch(e){}else Date.now()-n<6e4&&setTimeout(r,500)}()},e.prototype.setGA4Config=function(e){this.ga4Service.setGa4Config(e)},e.prototype.setTags=function(e){this.tags=e instanceof Array?e.join(","):e},e.prototype.setCookieDomain=function(e){"."!==e[0]&&(e="."+e),this.cookieDomain=e},e.prototype.setCookiePath=function(e){this.cookiePath=e},e.prototype.setDontScrollTopModal=function(e){this.dontScrollTopModal=e},e.prototype.setUseExperience=function(e){this.useExperience=e},e.prototype.setExperimentalIosModal=function(e){this.experimentalIosModal=e},e.prototype.setApplePayMerchantId=function(e){this.applePayMerchantId=e},e.prototype.setContentIsNative=function(e){this.contentIsNative=e},e.prototype.setComposerHost=function(e){this.composerHost=e},e.prototype.setEndpoint=function(e){this.endpoint=e},e.prototype.setAffiliateTokenName=function(e){this.affiliateTokenName=e},e.prototype.setEspEndpoint=function(e){this.espEndpoint=e},e.prototype.setCxCdnUrl=function(e){this.cxCdnUrl=e},e.prototype.setC1XLoadCce=function(e){this.c1XLoadCce=e},e.prototype.setC1XIntegrationVersion=function(e){this.c1XIntegrationVersion=e},e.prototype.setDataLayerEnabled=function(e){this.isDataLayerEnabled=e},e.prototype.setCxenseSiteId=function(e){this.cxenseSiteId=e,In.dataLayer.set("siteId",e)},e.prototype.setCxenseLibAwaitingTimeout=function(e){this.cxenseLibAwaitingTimeout=e},e.prototype.setCxenseLibAwaitingRetryCount=function(e){this.cxenseLibAwaitingRetryCount=e},e.prototype.setContentId=function(e){this.contentId=e},e.prototype.setTrackPages=function(e){this.trackPages=e},e.prototype.setDebug=function(e){this.debug=e},e.prototype.setUserRef=function(e){this.userRef=e},e.prototype.setUsePianoIdLiteUserProvider=function(e){this.usePianoIdLiteUserProvider=e},e.prototype.setExternalJWT=function(e){this.externalJWT=e},e.prototype.getExternalJWT=function(){return this.externalJWT},e.prototype.setUseTinypassAccounts=function(e){this.useTinypassAccounts=e},e.prototype.setUseCondeUserProvider=function(e){this.useCondeUserProvider=e},e.prototype.setUseGigyaUserProvider=function(e){this.useGigyaUserProvider=e},e.prototype.setUsePianoIdUserProvider=function(e){this.usePianoIdUserProvider=e},e.prototype.setPianoIdUrl=function(e){this.pianoIdUrl=e},e.prototype.setItemId=function(e){this.itemId=e},e.prototype.setUseAidSpecifiedCookies=function(e){this.useAidSpecifiedCookies=e},e.prototype.setSandbox=function(e){this.sandbox=e},e.prototype.setContentCreatedSelector=function(e){this.contentCreatedSelector=e},e.prototype.setContentCreated=function(e){this.contentCreated=e},e.prototype.setContentAuthor=function(e){this.contentAuthor=e},e.prototype.setContentSection=function(e){this.contentSection=e},e.prototype.setZone=function(e){this.zone=e||""},e.prototype.isNonProdEndpoint=function(){return"sandbox"===this.endpoint||/^https?:\/\/(.*sandbox.*|\d+\.dev)\.(tinypass\.com|piano\.io)/i.test(this.endpoint)},e.prototype.setZIndexes=function(e){this.zIndexes=e},e.prototype.setCustomPreCheck=function(e){this.customPreChecks.push(e)},e.prototype.setLinkTermSelected=function(e){this.linkTermSelected=e},e.prototype.setCustomParam=function(e,t,n,r){var o=["content","user","request"];if(n||(n="content"),n=n.toLowerCase(),o.indexOf(n)<0)throw new Error("Undefined scope "+n+"\nAvailable scopes: "+o.join(", "));void 0===this.customParams[n]&&(this.customParams[n]={}),(void 0===this.customParams[n][e]||r)&&(this.customParams[n][e]=[]);for(var i=[].concat(t),a=0;a<i.length;a++){if("string"!=typeof i[a])throw new Error("setCustomParam accept only string values or array of strings");this.customParams[n][e].push(i[a])}},e.prototype.resetCustomParam=function(e){e||(e="content"),delete this.customParams[e]},e.prototype.addExternalLibrary=function(e,t){if("string"==typeof e)this.externalLibraries.push(e);else for(var n=0;n<e.length;++n)this.externalLibraries.push(e[n]);t&&this.externalLibrariesCallbacks.push(t),this.isInitialized&&this.realizeExternalLibraries()},e.prototype.setCustomVariable=function(e,t){this.customVariables[e]=t},e.prototype.saveCustomVariablesToLocalStorage=function(e){var t=function(e,t){pn.consent.__protected__.async((function(n){var r;return null===(r=n.composer)||void 0===r?void 0:r.localStorage.set(e,t)}))},n="__tp-customVariables";t(n,JSON.stringify(this.customVariables)),e&&t(n+"-expiration",Math.floor((new Date).getTime()/1e3)+e+"")},e.prototype.restoreCustomVariablesFromLocalstorage=function(){if("localStorage"in window&&null!==window.localStorage){var e=An.util.__protected__.getLocalStorageItem("customVariables");if(An.util.__protected__.removeLocalStorageItem("customVariables"),e)for(var t in e)this.customVariables[t]=e[t]}},e.prototype.handler=function(e,t){var n=this.registerPrefixedEvents;return function(){for(var r,o=[pn.offer,pn.template,pn.meter,pn.experience,pn.myaccount,pn.pianoId,pn.tinypassLogin,pn.swg,pn.user,pn.credit],i=0;i<o.length;i++){var a=o[i];if(a){var s=a.registerCallback(e,t);void 0!==s&&(r=s),void 0!==(s=n(a,e,t))&&(r=s)}}return r}},e.prototype.registerPrefixedEvents=function(e,t,n){for(var r,o,i,a=[{module:"offer",prefix:"checkout"},{module:"pianoId",prefix:"pianoId"}],s=0;s<a.length;s++){var c=a[s];e.name===c.module&&t.substring(0,c.prefix.length)===c.prefix&&(r=t.substring(c.prefix.length,c.prefix.length+1).toLowerCase()+t.substring(c.prefix.length+1,t.length),void 0!==(o=e.registerCallback(r,n))&&(i=o))}return i},e.prototype.addHandler=function(e,t){var n=this.handler(e,t);this.isInitialized?n():this.events.push(n)},e.prototype.setTrackPageview=function(e){this.trackPageView=e},e.prototype.setLocale=function(e){var t=this;this.locale=e,this.utilService.__protected__.setCookie("LANG",this.locale),this.isInitialized?this.changeLocale(e):this.initCallbacks.push((function(){t.changeLocale(e)}))},e.prototype.setPageURL=function(e){this.customPageUrl=e},e.prototype.setAdblockerCookieName=function(e){this.adblockerCookieName=e},e.prototype.setMaxCookieExpirationInDays=function(e){var t="string"==typeof e?parseInt(e,10):e;if(!(isFinite(t)&&t>0))throw new Error("maxCookieExpirationInDays must be a positive number");this.maxCookieExpirationInDays=t},e.prototype.getMaxCookieExpirationInDays=function(){return this.maxCookieExpirationInDays},e.prototype.setFbPixelId=function(e){this.fbPixelId=e},e.prototype.getFbPixelId=function(){return this.fbPixelId},e.prototype.setRedirectToFbTimeout=function(e){this.redirectToFbTimeout=e},e.prototype.enableDoubleOptInCheckOnAccessCheck=function(){this.isDoubleOptInCheckOnAccessCheckEnabled=!0},e.prototype.setCloudflareWorkerUrl=function(e){this.cloudflareWorkerUrl=e},e.prototype.getEndpoint=function(e,t){return e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1)),e.match(/\/v3$/)&&(e=e.substr(0,e.lastIndexOf("/v3"))),e.match(/\/api$/)&&(e=e.substr(0,e.lastIndexOf("/api"))),e.match(/^(http[s]?:)?\/\//)||(e="//"+e),void 0!==t&&t&&!e.match(/^http[s]?:/)&&(e="https:"+e),e},e.prototype._getEndpointRoot=function(e){var t="https://buy.tinypass.com";return!0===this.sandbox&&(this.endpoint="sandbox"),this.endpoint&&("sandbox"===this.endpoint?t="https://sandbox.tinypass.com":"prod"!==this.endpoint&&"production"!==this.endpoint&&(t=this.endpoint)),this.getEndpoint(t,e)},e.prototype._getApiEndpoint=function(){return this._getEndpointRoot()+"/api/v3"},e.prototype._getTrackingEndpoint=function(e){void 0===e&&(e="");var t=e||this.endpoint;return!0===this.sandbox?t="https://sandbox.tinypass.com":(void 0===this.endpoint||null===this.endpoint||""===this.endpoint||"prod"===this.endpoint||"production"===this.endpoint||this.endpoint.match(/(buy|api|api-v3)\.tinypass\.com/))&&(t=e||"https://api-v3.tinypass.com"),this.getEndpoint(t,!0)},e.prototype._getExperienceEndpoint=function(e){var t="https://c2.piano.io";return this.composerHost?t=this.composerHost:(!0===this.sandbox&&(this.endpoint="sandbox"),this.endpoint&&("sandbox"===this.endpoint?t="https://c2-sandbox.piano.io":"prod"!==this.endpoint&&"production"!==this.endpoint&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=this.endpoint).replace("//buy.tinypass.com","//c2.piano.io")).replace("//api.tinypass.com","//c2.piano.io")).replace("//buy-au.piano.io","//c2-au.piano.io")).replace("//api-au.piano.io","//c2-au.piano.io")).replace("//buy-ap.piano.io","//c2-ap.piano.io")).replace("//api-ap.piano.io","//c2-ap.piano.io")).replace("//buy-eu.piano.io","//c2-eu.piano.io")).replace("//api-eu.piano.io","//c2-eu.piano.io")).replace("//sandbox.tinypass.com","//c2-sandbox.piano.io")).replace("//sandbox.piano.io","//c2-sandbox.piano.io")).replace("//experience-au.piano.io","//c2-au.piano.io")).replace("//experience-eu.piano.io","//c2-eu.piano.io")).replace("//experience-ap.piano.io","//c2-ap.piano.io")).replace("//experience.tinypass.com","//c2.piano.io")).replace("//buy.piano.io","//c2.piano.io")).replace("//api.piano.io","//c2.piano.io")).replace("//experience.piano.io","//c2.piano.io")))),this.getEndpoint(t,e)},e.prototype._isSandbox=function(){return this.sandbox||"sandbox"===this.endpoint||!!this.endpoint&&-1!==this.endpoint.indexOf("//sandbox.tinypass.com")},e.prototype.changeLocale=function(e){pn.pianoId.isConfigured()&&pn.pianoId.updateLang(e),pn.postmessage.broadcast("langChanged",{lang:e})},e.prototype.pageTrack=function(e,t){pn.main.pageTrack(e,t)},e.prototype.trackPage=function(e,t){pn.main.pageTrack(e,t)},e.prototype.trackPageUnload=function(){pn.main.trackPageUnload()},e.prototype.trackAds=function(e){pn.main.trackAds(e)},e.prototype.trackAd=function(e,t,n){pn.main.trackAd(e,t,n)},e.prototype.onLoad=function(e){this.callbacks.push(e)},e.prototype.getEndpointRoot=function(e){return this._getEndpointRoot(e)},e.prototype.getExperienceEndpoint=function(e){return this._getExperienceEndpoint(e)},e.prototype.getApiEndpoint=function(){return this._getApiEndpoint()},e.prototype.getTrackingEndpoint=function(e){return void 0===e&&(e=""),this._getTrackingEndpoint(e)},e.prototype.isSandbox=function(){return this._isSandbox()},e.prototype.setCacheableShowTemplate=function(e){this.cacheableShowTemplate=e},e.prototype.getCacheableShowTemplate=function(){return this.cacheableShowTemplate},e.prototype.setSssAccessToken=function(e){this.sssAccessToken=e},e.prototype.setSssCallbackUrl=function(e){this.sssCallbackUrl=e},e.prototype.setSssMode=function(e){this.sssMode=e},e.prototype.setSssOriginUrl=function(e){this.sssOriginUrl=e},e.prototype.verifySignature=function(e,t,n){var r=Sn.Buffer.from(n,"base64"),o=Sn.Buffer.from(e),i=Sn.Buffer.from(t,"base64"),a={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}};return crypto.subtle.importKey("spki",r,a,!1,["verify"]).then((function(e){return crypto.subtle.verify(a,e,i,o)}))},e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([pn.singleton(),I(0,pn.inject("tpPredefinedOptions")),I(1,pn.inject("css")),I(2,pn.inject("tinypassErrorHandler")),I(3,pn.inject("gaService")),I(4,pn.inject("ga4Service")),I(5,pn.inject("util")),I(6,pn.inject("consent")),S("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object])],e),e}();pn.container.registerSingleton("tinypass",xn);var Tn=pn.container.resolve("tinypass");[{n:"polyfill",hM:!1},{n:"predefine",hM:!1},{n:"predefineTinypass",hM:!1},{n:"checkTinypass",hM:!1},{n:"css",hM:!0},{n:"ajax",hM:!0},{n:"jqUtils",hM:!0},{n:"cookie",hM:!0},{n:"localStorage",hM:!0},{n:"versionService",hM:!0},{n:"itp",hM:!0},{n:"util",hM:!0},{n:"api",hM:!0},{n:"postmessage",hM:!0},{n:"eventUtils",hM:!0},{n:"janrain",hM:!0},{n:"sha1",hM:!0},{n:"containerUtils",hM:!0},{n:"tinypassLogin",hM:!0},{n:"tinypassAccounts",hM:!0},{n:"condeUserProvider",hM:!0},{n:"gigya",hM:!0},{n:"jwtDecode",hM:!0},{n:"log",hM:!0},{n:"logging",hM:!0},{n:"observer",hM:!0},{n:"gaService",hM:!0},{n:"ga4Service",hM:!0},{n:"pianoIdLite",hM:!0},{n:"pianoId",hM:!0},{n:"user",hM:!0},{n:"viewportExit",hM:!0},{n:"template",hM:!0},{n:"offer",hM:!0},{n:"myaccount",hM:!0},{n:"meter",hM:!0},{n:"fingerprint",hM:!0},{n:"scrollDepth",hM:!0},{n:"idle",hM:!0},{n:"interaction",hM:!0},{n:"recWidgetService",hM:!0},{n:"piano",hM:!0},{n:"pianoEsp",hM:!0},{n:"swg",hM:!0},{n:"fbpixel",hM:!0},{n:"fbsubscriptions",hM:!0},{n:"cxense",hM:!0},{n:"experience",hM:!0},{n:"ifvisible",hM:!0},{n:"activetimer",hM:!0},{n:"doubleClickForPublisher",hM:!0},{n:"applePay",hM:!0},{n:"goCardlessDropin",hM:!0},{n:"applePayIntegrationService",hM:!0},{n:"datatransApplePayIntegrationService",hM:!0},{n:"stripeApplePayIntegrationService",hM:!0},{n:"obi3DSChallenge",hM:!0},{n:"amp",hM:!0},{n:"performanceMetrics",hM:!0},{n:"doubleOptIn",hM:!0},{n:"newscycle",hM:!0},{n:"captchaV3",hM:!0},{n:"main",hM:!0},{n:"tinypassErrorHandler",hM:!0},{n:"tinypass",hM:!0},{n:"postProcessing",hM:!1}].forEach((function(e){e.hM&&!pn.container.isRegistered(e.n)&&pn.container.resolve(e.n)})),Object.assign(pn,Tn),Object.setPrototypeOf(pn,xn.prototype);var An=window.tp=pn;pn.initTp()}();